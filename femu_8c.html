<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FEMU: femu.c 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FEMU
   &#160;<span id="projectnumber">原版 master 7e238cc</span>
   </div>
   <div id="projectbrief">FEMU: Accurate, Scalable and Extensible NVMe SSD Emulator (FAST&#39;18)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('femu_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">宏定义</a> &#124;
<a href="#func-members">函数</a> &#124;
<a href="#var-members">变量</a>  </div>
  <div class="headertitle">
<div class="title">femu.c 文件参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;qemu/osdep.h&quot;</code><br />
<code>#include &quot;hw/qdev-properties.h&quot;</code><br />
<code>#include &quot;<a class="el" href="nvme_8h_source.html">./nvme.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
femu.c 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c__incl.png" border="0" usemap="#femu_8c" alt=""/></div>
<map name="femu_8c" id="femu_8c">
<area shape="rect" title=" " alt="" coords="555,5,621,32"/>
<area shape="rect" title=" " alt="" coords="5,155,120,181"/>
<area shape="rect" title=" " alt="" coords="508,80,668,107"/>
<area shape="rect" href="nvme_8h.html" title=" " alt="" coords="829,80,907,107"/>
<area shape="rect" title=" " alt="" coords="145,155,247,181"/>
<area shape="rect" title=" " alt="" coords="272,155,379,181"/>
<area shape="rect" title=" " alt="" coords="403,155,514,181"/>
<area shape="rect" title=" " alt="" coords="539,155,651,181"/>
<area shape="rect" title=" " alt="" coords="675,155,779,181"/>
<area shape="rect" title=" " alt="" coords="803,155,933,181"/>
<area shape="rect" title=" " alt="" coords="957,155,1053,181"/>
<area shape="rect" title=" " alt="" coords="1078,155,1197,181"/>
<area shape="rect" href="dram_8h.html" title=" " alt="" coords="1221,155,1347,181"/>
<area shape="rect" href="rte__ring_8h.html" title=" " alt="" coords="1372,155,1479,181"/>
<area shape="rect" href="pqueue_8h.html" title="Priority Queue function declarations" alt="" coords="1503,155,1609,181"/>
<area shape="rect" href="nand_8h.html" title=" " alt="" coords="1633,155,1735,181"/>
<area shape="rect" href="timing_8h.html" title=" " alt="" coords="1760,155,1928,181"/>
<area shape="rect" title=" " alt="" coords="1134,229,1205,256"/>
<area shape="rect" title=" " alt="" coords="1229,229,1296,256"/>
<area shape="rect" title=" " alt="" coords="1321,229,1421,256"/>
<area shape="rect" title=" " alt="" coords="1445,229,1513,256"/>
<area shape="rect" title=" " alt="" coords="1537,229,1639,256"/>
<area shape="rect" href="rte__atomic__x86_8h.html" title=" " alt="" coords="1663,229,1798,256"/>
<area shape="rect" href="rte__branch__prediction_8h.html" title=" " alt="" coords="1822,229,1997,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:a412d88dd847ec3c6e8f4f1f669e183e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a412d88dd847ec3c6e8f4f1f669e183e5">NVME_SPEC_VER</a>&#160;&#160;&#160;(0x00010400)</td></tr>
<tr class="separator:a412d88dd847ec3c6e8f4f1f669e183e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:a25b1d92e20b65b39e29a38cb02ddcc19"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19">nvme_clear_ctrl</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, bool shutdown)</td></tr>
<tr class="separator:a25b1d92e20b65b39e29a38cb02ddcc19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31d7536be0fd698bd44a2ce15ce54987"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987">nvme_start_ctrl</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:a31d7536be0fd698bd44a2ce15ce54987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b4cf8d2b42e9d54982bcd45bd43d15"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15">nvme_write_bar</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, hwaddr offset, uint64_t data, unsigned size)</td></tr>
<tr class="separator:aa5b4cf8d2b42e9d54982bcd45bd43d15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863c74604ae2044f3df266c5d81c28e4"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a863c74604ae2044f3df266c5d81c28e4">nvme_mmio_read</a> (void *opaque, hwaddr addr, unsigned size)</td></tr>
<tr class="separator:a863c74604ae2044f3df266c5d81c28e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83bc83578ac4c5c414ec892ca2169e3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3">nvme_process_db_admin</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, hwaddr addr, int val)</td></tr>
<tr class="separator:ac83bc83578ac4c5c414ec892ca2169e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4067cc27c2856dec58abf30b2e3f121a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a4067cc27c2856dec58abf30b2e3f121a">nvme_process_db_io</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, hwaddr addr, int val)</td></tr>
<tr class="separator:a4067cc27c2856dec58abf30b2e3f121a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a5db5b8b1cead9d84276dfeeb4b066"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066">nvme_mmio_write</a> (void *opaque, hwaddr addr, uint64_t data, unsigned size)</td></tr>
<tr class="separator:a78a5db5b8b1cead9d84276dfeeb4b066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04df02f4267b9ff3d1dc8cee3fab6581"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a04df02f4267b9ff3d1dc8cee3fab6581">nvme_cmb_write</a> (void *opaque, hwaddr addr, uint64_t data, unsigned size)</td></tr>
<tr class="separator:a04df02f4267b9ff3d1dc8cee3fab6581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19c88acc017844e5a46446e274947053"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a19c88acc017844e5a46446e274947053">nvme_cmb_read</a> (void *opaque, hwaddr addr, unsigned size)</td></tr>
<tr class="separator:a19c88acc017844e5a46446e274947053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02f254917f6299ec50e4ed9cf78e13f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a02f254917f6299ec50e4ed9cf78e13f9">nvme_check_constraints</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:a02f254917f6299ec50e4ed9cf78e13f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61b5f2e26fd1e0a3d04ce574e8ef9d68"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a61b5f2e26fd1e0a3d04ce574e8ef9d68">nvme_ns_init_identify</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, <a class="el" href="structNvmeIdNs.html">NvmeIdNs</a> *id_ns)</td></tr>
<tr class="separator:a61b5f2e26fd1e0a3d04ce574e8ef9d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac38f13e024b64cd42d58b3e6951a3da8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#ac38f13e024b64cd42d58b3e6951a3da8">nvme_init_namespace</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, <a class="el" href="structNvmeNamespace.html">NvmeNamespace</a> *ns, Error **errp)</td></tr>
<tr class="separator:ac38f13e024b64cd42d58b3e6951a3da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac62fcc12cac3ca808b290e34dd507d66"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#ac62fcc12cac3ca808b290e34dd507d66">nvme_init_namespaces</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, Error **errp)</td></tr>
<tr class="separator:ac62fcc12cac3ca808b290e34dd507d66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af615b7b798522330f8e5375f392060ea"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#af615b7b798522330f8e5375f392060ea">nvme_init_ctrl</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:af615b7b798522330f8e5375f392060ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d4cc40606cf62f5edf085512acb599"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a85d4cc40606cf62f5edf085512acb599">nvme_init_cmb</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:a85d4cc40606cf62f5edf085512acb599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdad4c815f4a43df7b71e178c19868f0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#afdad4c815f4a43df7b71e178c19868f0">nvme_init_pci</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:afdad4c815f4a43df7b71e178c19868f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a47b73caa1fa75fb706e3ed8f16a73"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73">nvme_register_extensions</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:a76a47b73caa1fa75fb706e3ed8f16a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966fbeb7afc495936413dbc445a0dd45"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45">femu_realize</a> (PCIDevice *pci_dev, Error **errp)</td></tr>
<tr class="separator:a966fbeb7afc495936413dbc445a0dd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749caeadb2968b6c63c5f1b2d646eb5a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a749caeadb2968b6c63c5f1b2d646eb5a">nvme_destroy_poller</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:a749caeadb2968b6c63c5f1b2d646eb5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a340aa0343b4141d520e32a9e4bc303a0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0">femu_exit</a> (PCIDevice *pci_dev)</td></tr>
<tr class="separator:a340aa0343b4141d520e32a9e4bc303a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb3b70286609648db37222148efcf8d3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3">femu_class_init</a> (ObjectClass *oc, void *data)</td></tr>
<tr class="separator:aeb3b70286609648db37222148efcf8d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f22cca6531280ddfe5b948d83e7bbd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a99f22cca6531280ddfe5b948d83e7bbd">femu_register_types</a> (void)</td></tr>
<tr class="separator:a99f22cca6531280ddfe5b948d83e7bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
变量</h2></td></tr>
<tr class="memitem:a04c9e2f4a6e9acb3f0f23331f8e1cf09"><td class="memItemLeft" align="right" valign="top">static const MemoryRegionOps&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a04c9e2f4a6e9acb3f0f23331f8e1cf09">nvme_cmb_ops</a></td></tr>
<tr class="separator:a04c9e2f4a6e9acb3f0f23331f8e1cf09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a800b10ed96ab720491ce2d9c3d9e1"><td class="memItemLeft" align="right" valign="top">static const MemoryRegionOps&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a74a800b10ed96ab720491ce2d9c3d9e1">nvme_mmio_ops</a></td></tr>
<tr class="separator:a74a800b10ed96ab720491ce2d9c3d9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a386fa8e3bbdfe152b4768a83c22415b5"><td class="memItemLeft" align="right" valign="top">static Property&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a386fa8e3bbdfe152b4768a83c22415b5">femu_props</a> []</td></tr>
<tr class="separator:a386fa8e3bbdfe152b4768a83c22415b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee4d7c6797cc51dbd46104153e0e352"><td class="memItemLeft" align="right" valign="top">static const VMStateDescription&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#a3ee4d7c6797cc51dbd46104153e0e352">femu_vmstate</a></td></tr>
<tr class="separator:a3ee4d7c6797cc51dbd46104153e0e352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0047681e4f6d44aaca85d64f5a5dbac"><td class="memItemLeft" align="right" valign="top">static const TypeInfo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="femu_8c.html#ab0047681e4f6d44aaca85d64f5a5dbac">femu_info</a></td></tr>
<tr class="separator:ab0047681e4f6d44aaca85d64f5a5dbac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">宏定义说明</h2>
<a id="a412d88dd847ec3c6e8f4f1f669e183e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412d88dd847ec3c6e8f4f1f669e183e5">&#9670;&nbsp;</a></span>NVME_SPEC_VER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVME_SPEC_VER&#160;&#160;&#160;(0x00010400)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">函数说明</h2>
<a id="aeb3b70286609648db37222148efcf8d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb3b70286609648db37222148efcf8d3">&#9670;&nbsp;</a></span>femu_class_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void femu_class_init </td>
          <td>(</td>
          <td class="paramtype">ObjectClass *&#160;</td>
          <td class="paramname"><em>oc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;{</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    DeviceClass *dc = DEVICE_CLASS(oc);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    PCIDeviceClass *pc = PCI_DEVICE_CLASS(oc);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    pc-&gt;realize = <a class="code" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45">femu_realize</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    pc-&gt;exit = <a class="code" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0">femu_exit</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    pc-&gt;class_id = PCI_CLASS_STORAGE_EXPRESS;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    pc-&gt;vendor_id = PCI_VENDOR_ID_INTEL;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    pc-&gt;device_id = 0x5845;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    pc-&gt;revision = 2;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    set_bit(DEVICE_CATEGORY_STORAGE, dc-&gt;categories);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    dc-&gt;desc = <span class="stringliteral">&quot;FEMU Non-Volatile Memory Express&quot;</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    device_class_set_props(dc, <a class="code" href="femu_8c.html#a386fa8e3bbdfe152b4768a83c22415b5">femu_props</a>);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    dc-&gt;vmsd = &amp;<a class="code" href="femu_8c.html#a3ee4d7c6797cc51dbd46104153e0e352">femu_vmstate</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_aeb3b70286609648db37222148efcf8d3_cgraph.png" border="0" usemap="#femu_8c_aeb3b70286609648db37222148efcf8d3_cgraph" alt=""/></div>
<map name="femu_8c_aeb3b70286609648db37222148efcf8d3_cgraph" id="femu_8c_aeb3b70286609648db37222148efcf8d3_cgraph">
<area shape="rect" title=" " alt="" coords="5,259,129,285"/>
<area shape="rect" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0" title=" " alt="" coords="187,132,275,159"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,335,284,361"/>
<area shape="rect" href="dram_8c.html#a41776022e272a7b574daea5add213702" title=" " alt="" coords="354,56,505,83"/>
<area shape="rect" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19" title=" " alt="" coords="366,107,493,133"/>
<area shape="rect" href="femu_8c.html#a749caeadb2968b6c63c5f1b2d646eb5a" title=" " alt="" coords="350,157,509,184"/>
<area shape="rect" href="intr_8c.html#ad98adfb6254598edb5f608bbf2018c8c" title=" " alt="" coords="597,5,728,32"/>
<area shape="rect" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93" title=" " alt="" coords="605,56,720,83"/>
<area shape="rect" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e" title=" " alt="" coords="605,107,720,133"/>
<area shape="rect" href="intr_8c.html#a9e513f85a2a84b262bdcb918d1785fea" title=" " alt="" coords="799,5,993,32"/>
<area shape="rect" href="rte__ring_8h.html#aae4026d87730ebef2cbcd08a42778e80" title=" " alt="" coords="602,157,723,184"/>
<area shape="rect" href="pqueue_8h.html#acceacc4429dd9cd31d5af09f3f473cb0" title=" " alt="" coords="611,208,714,235"/>
<area shape="rect" href="rte__ring_8c.html#a564e012c1eb4ae08f9eea3acfd08b377" title=" " alt="" coords="843,157,949,184"/>
<area shape="rect" href="dram_8c.html#a995036898006c525a601ec4c0bd16091" title=" " alt="" coords="357,208,502,235"/>
<area shape="rect" href="femu_8c.html#a02f254917f6299ec50e4ed9cf78e13f9" title=" " alt="" coords="338,259,521,285"/>
<area shape="rect" href="nvme_8h.html#aafda35baa4ea5b7ca05146aa59f3c6f9" title=" " alt="" coords="361,309,498,336"/>
<area shape="rect" href="femu_8c.html#af615b7b798522330f8e5375f392060ea" title=" " alt="" coords="372,360,487,387"/>
<area shape="rect" href="femu_8c.html#ac62fcc12cac3ca808b290e34dd507d66" title=" " alt="" coords="341,411,517,437"/>
<area shape="rect" href="femu_8c.html#afdad4c815f4a43df7b71e178c19868f0" title=" " alt="" coords="373,461,486,488"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="332,715,527,741"/>
<area shape="rect" href="femu_8c.html#ac38f13e024b64cd42d58b3e6951a3da8" title=" " alt="" coords="578,411,747,437"/>
<area shape="rect" href="nvme_8h.html#ab5233c5c538a64df4e9b391949d334e3" title=" " alt="" coords="861,360,931,387"/>
<area shape="rect" href="femu_8c.html#a61b5f2e26fd1e0a3d04ce574e8ef9d68" title=" " alt="" coords="813,411,979,437"/>
<area shape="rect" href="femu_8c.html#a85d4cc40606cf62f5edf085512acb599" title=" " alt="" coords="601,461,724,488"/>
<area shape="rect" href="nvme_8h.html#acd64982aef4cb1864b53952a92068c27" title=" " alt="" coords="629,512,696,539"/>
<area shape="rect" href="nvme_8h.html#a91fafe4960342e59b47d66f807966b2e" title=" " alt="" coords="629,563,697,589"/>
<area shape="rect" href="bb_8c.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="582,613,743,640"/>
<area shape="rect" href="nop_8c.html#ad4130ad93f90bb1d6ba3bfd595214751" title=" " alt="" coords="582,664,743,691"/>
<area shape="rect" href="nvme_8h.html#a623f6939cbe95d9de1eab8847f6ddba0" title=" " alt="" coords="575,765,751,792"/>
<area shape="rect" href="nvme_8h.html#afbce5130c2fccec6d897d6efc144a7d8" title=" " alt="" coords="575,993,751,1020"/>
<area shape="rect" href="nvme_8h.html#a08aeb05994f79207836886d8a1475372" title=" " alt="" coords="583,1044,743,1071"/>
<area shape="rect" href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6" title=" " alt="" coords="629,1095,696,1121"/>
<area shape="rect" href="nvme_8h.html#a5e3ee6be1fc2a840978ffa649cf6339d" title=" " alt="" coords="629,1145,696,1172"/>
<area shape="rect" href="bb_8c.html#afd2d6d40a801b554569b5c4c364f8df6" title=" " alt="" coords="835,461,957,488"/>
<area shape="rect" href="bb_8c.html#a3fc7384f815cca2f52003206b20324df" title=" " alt="" coords="863,512,929,539"/>
<area shape="rect" href="bb_8c.html#a86a2ad222c79ea1e3eb798c53f472908" title=" " alt="" coords="850,563,942,589"/>
<area shape="rect" href="nop_8c.html#ab64cc71dd3eaeabb313d30fb4bd39535" title=" " alt="" coords="859,613,933,640"/>
<area shape="rect" href="nop_8c.html#a56ad5bb3626f3d51b93f720d91e65e69" title=" " alt="" coords="846,664,946,691"/>
<area shape="rect" href="oc12_8c.html#a68620169de187b09e15ef18b52eb72c6" title=" " alt="" coords="828,715,964,741"/>
<area shape="rect" href="oc12_8c.html#adb2f63023ff079bd918f3e0a2fc99c0a" title=" " alt="" coords="853,765,939,792"/>
<area shape="rect" href="oc12_8c.html#a0caef7cdff7d502bdf678c7e8c57e35e" title=" " alt="" coords="855,816,937,843"/>
<area shape="rect" href="oc12_8c.html#a3c41a58559ee2c92463ac4f25dab0a08" title=" " alt="" coords="843,867,949,893"/>
<area shape="rect" href="oc20_8c.html#a067e9b542ca7593640f20257d6f9c137" title=" " alt="" coords="828,917,964,944"/>
<area shape="rect" href="oc20_8c.html#a0d7f8f90592d8683dd918093e3d4a910" title=" " alt="" coords="853,968,939,995"/>
<area shape="rect" href="oc20_8c.html#a25e01fd61efab89abcea94af95d9c3d5" title=" " alt="" coords="842,1019,950,1045"/>
<area shape="rect" href="oc20_8c.html#ab8b64d072bf22bd8976f359cf512d456" title=" " alt="" coords="855,1069,937,1096"/>
<area shape="rect" href="oc20_8c.html#a2b271895f51ed6a3e57db3cf0a7f9f94" title=" " alt="" coords="843,1120,949,1147"/>
<area shape="rect" href="oc20_8c.html#a59be92e5cac7979f5bba9f2bf96bf9d3" title=" " alt="" coords="821,1171,971,1197"/>
<area shape="rect" href="zns_8c.html#a88a38b39db2e6829a576bebd97ece799" title=" " alt="" coords="833,1221,959,1248"/>
<area shape="rect" href="zns_8c.html#a8910113c66e3bce77dbbdbb560d9aefd" title=" " alt="" coords="858,1272,934,1299"/>
</map>
</div>

</div>
</div>
<a id="a340aa0343b4141d520e32a9e4bc303a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a340aa0343b4141d520e32a9e4bc303a0">&#9670;&nbsp;</a></span>femu_exit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void femu_exit </td>
          <td>(</td>
          <td class="paramtype">PCIDevice *&#160;</td>
          <td class="paramname"><em>pci_dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;{</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="structFemuCtrl.html">FemuCtrl</a> *n = <a class="code" href="nvme_8h.html#ae2aa6c922156d9434b6794e442d9343d">FEMU</a>(pci_dev);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a>(<span class="stringliteral">&quot;femu_exit starting!\n&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a2b07accc41de60cd0c6de43adde355ad">ext_ops</a>.<a class="code" href="structFemuExtCtrlOps.html#ae4aa79cc194dbd2ef7a47eecc0d5635f">exit</a>) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#a2b07accc41de60cd0c6de43adde355ad">ext_ops</a>.<a class="code" href="structFemuExtCtrlOps.html#ae4aa79cc194dbd2ef7a47eecc0d5635f">exit</a>(n);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19">nvme_clear_ctrl</a>(n, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="femu_8c.html#a749caeadb2968b6c63c5f1b2d646eb5a">nvme_destroy_poller</a>(n);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="dram_8c.html#a41776022e272a7b574daea5add213702">free_dram_backend</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ab4f555e0b42bfe51c089ab004c88ff48">mbe</a>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    g_free(n-&gt;<a class="code" href="structFemuCtrl.html#a98ca6ff3bc65ccc7f98a589e018b7d71">namespaces</a>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    g_free(n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a392d23a7bae9920c1573f7c601419ea7">int_vector_config</a>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    g_free(n-&gt;<a class="code" href="structFemuCtrl.html#abbc8bea7f714882de1433bb8c6303792">aer_reqs</a>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    g_free(n-&gt;<a class="code" href="structFemuCtrl.html#a0456828e9802380dee025b663079afcf">elpes</a>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    g_free(n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    g_free(n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    msix_uninit_exclusive_bar(pci_dev);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    memory_region_unref(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#ad84aa0e64f9fbe7fdac3eaaa26c077e3">iomem</a>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#abfbbff9ca2a3d79e3a8a4c3bd4c892e3">cmbsz</a>) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        memory_region_unref(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#ab880f4820c2fda0e6068c014eda64d1f">ctrl_mem</a>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a340aa0343b4141d520e32a9e4bc303a0_cgraph.png" border="0" usemap="#femu_8c_a340aa0343b4141d520e32a9e4bc303a0_cgraph" alt=""/></div>
<map name="femu_8c_a340aa0343b4141d520e32a9e4bc303a0_cgraph" id="femu_8c_a340aa0343b4141d520e32a9e4bc303a0_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,93,108"/>
<area shape="rect" href="dram_8c.html#a41776022e272a7b574daea5add213702" title=" " alt="" coords="145,31,296,57"/>
<area shape="rect" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19" title=" " alt="" coords="157,81,284,108"/>
<area shape="rect" href="femu_8c.html#a749caeadb2968b6c63c5f1b2d646eb5a" title=" " alt="" coords="141,157,300,184"/>
<area shape="rect" href="intr_8c.html#ad98adfb6254598edb5f608bbf2018c8c" title=" " alt="" coords="348,5,479,32"/>
<area shape="rect" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93" title=" " alt="" coords="356,56,471,83"/>
<area shape="rect" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e" title=" " alt="" coords="356,107,471,133"/>
<area shape="rect" href="intr_8c.html#a9e513f85a2a84b262bdcb918d1785fea" title=" " alt="" coords="527,5,721,32"/>
<area shape="rect" href="intr_8c.html#a1a56c08c52edde31f9e476178fb352a1" title=" " alt="" coords="769,5,984,32"/>
<area shape="rect" href="rte__ring_8h.html#aae4026d87730ebef2cbcd08a42778e80" title=" " alt="" coords="353,157,474,184"/>
<area shape="rect" href="pqueue_8h.html#acceacc4429dd9cd31d5af09f3f473cb0" title=" " alt="" coords="362,208,465,235"/>
<area shape="rect" href="rte__ring_8c.html#a564e012c1eb4ae08f9eea3acfd08b377" title=" " alt="" coords="571,157,677,184"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a340aa0343b4141d520e32a9e4bc303a0_icgraph.png" border="0" usemap="#femu_8c_a340aa0343b4141d520e32a9e4bc303a0_icgraph" alt=""/></div>
<map name="femu_8c_a340aa0343b4141d520e32a9e4bc303a0_icgraph" id="femu_8c_a340aa0343b4141d520e32a9e4bc303a0_icgraph">
<area shape="rect" title=" " alt="" coords="177,5,265,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a966fbeb7afc495936413dbc445a0dd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a966fbeb7afc495936413dbc445a0dd45">&#9670;&nbsp;</a></span>femu_realize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void femu_realize </td>
          <td>(</td>
          <td class="paramtype">PCIDevice *&#160;</td>
          <td class="paramname"><em>pci_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Error **&#160;</td>
          <td class="paramname"><em>errp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;{</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="structFemuCtrl.html">FemuCtrl</a> *n = <a class="code" href="nvme_8h.html#ae2aa6c922156d9434b6794e442d9343d">FEMU</a>(pci_dev);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    int64_t bs_size;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="nvme_8h.html#aafda35baa4ea5b7ca05146aa59f3c6f9">nvme_check_size</a>();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="femu_8c.html#a02f254917f6299ec50e4ed9cf78e13f9">nvme_check_constraints</a>(n)) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    bs_size = ((int64_t)n-&gt;<a class="code" href="structFemuCtrl.html#af50df220250d2ca0ff915e5ed29b5434">memsz</a>) * 1024 * 1024;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="dram_8c.html#a995036898006c525a601ec4c0bd16091">init_dram_backend</a>(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#ab4f555e0b42bfe51c089ab004c88ff48">mbe</a>, bs_size);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ab4f555e0b42bfe51c089ab004c88ff48">mbe</a>-&gt;<a class="code" href="structSsdDramBackend.html#aee922fd1d1b507dfe5a69e10317cbee4">femu_mode</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a157f69377a181cad8e1d1fe98aa6b31d">femu_mode</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a8c51540060b920896dd8897c51508e20">completed</a> = 0;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a9d1a8fc9f8a06cfff7668affaa2fbbf6">start_time</a> = time(NULL);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ab6a812bf164ed1eb955e470a1133abb8">reg_size</a> = pow2ceil(0x1004 + 2 * (n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> + 1) * 4);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a010a28b0d592b4f5b5f0f0131afc60ed">ns_size</a> = bs_size / (uint64_t)n-&gt;<a class="code" href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">num_namespaces</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">/* Coperd: [1..num_io_queues] are used as IO queues */</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a> = g_malloc0(<span class="keyword">sizeof</span>(*n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>) * (n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> + 1));</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a> = g_malloc0(<span class="keyword">sizeof</span>(*n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>) * (n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> + 1));</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a98ca6ff3bc65ccc7f98a589e018b7d71">namespaces</a> = g_malloc0(<span class="keyword">sizeof</span>(*n-&gt;<a class="code" href="structFemuCtrl.html#a98ca6ff3bc65ccc7f98a589e018b7d71">namespaces</a>) * n-&gt;<a class="code" href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">num_namespaces</a>);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a0456828e9802380dee025b663079afcf">elpes</a> = g_malloc0(<span class="keyword">sizeof</span>(*n-&gt;<a class="code" href="structFemuCtrl.html#a0456828e9802380dee025b663079afcf">elpes</a>) * (n-&gt;<a class="code" href="structFemuCtrl.html#a31fb867a33c2ccad78e9c82456391e89">elpe</a> + 1));</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#abbc8bea7f714882de1433bb8c6303792">aer_reqs</a> = g_malloc0(<span class="keyword">sizeof</span>(*n-&gt;<a class="code" href="structFemuCtrl.html#abbc8bea7f714882de1433bb8c6303792">aer_reqs</a>) * (n-&gt;<a class="code" href="structFemuCtrl.html#a101673f97321bbc185c290625ce0d8b2">aerl</a> + 1));</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a392d23a7bae9920c1573f7c601419ea7">int_vector_config</a> = g_malloc0(<span class="keyword">sizeof</span>(*n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a392d23a7bae9920c1573f7c601419ea7">int_vector_config</a>) * (n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> + 1));</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="femu_8c.html#afdad4c815f4a43df7b71e178c19868f0">nvme_init_pci</a>(n);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="femu_8c.html#af615b7b798522330f8e5375f392060ea">nvme_init_ctrl</a>(n);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="femu_8c.html#ac62fcc12cac3ca808b290e34dd507d66">nvme_init_namespaces</a>(n, errp);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73">nvme_register_extensions</a>(n);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a2b07accc41de60cd0c6de43adde355ad">ext_ops</a>.<a class="code" href="structFemuExtCtrlOps.html#abfbb9d2fd43fb82dcac7fc100e5eebf9">init</a>) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#a2b07accc41de60cd0c6de43adde355ad">ext_ops</a>.<a class="code" href="structFemuExtCtrlOps.html#abfbb9d2fd43fb82dcac7fc100e5eebf9">init</a>(n, errp);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a966fbeb7afc495936413dbc445a0dd45_cgraph.png" border="0" usemap="#femu_8c_a966fbeb7afc495936413dbc445a0dd45_cgraph" alt=""/></div>
<map name="femu_8c_a966fbeb7afc495936413dbc445a0dd45_cgraph" id="femu_8c_a966fbeb7afc495936413dbc445a0dd45_cgraph">
<area shape="rect" title=" " alt="" coords="5,157,112,184"/>
<area shape="rect" href="dram_8c.html#a995036898006c525a601ec4c0bd16091" title=" " alt="" coords="185,5,330,32"/>
<area shape="rect" href="femu_8c.html#a02f254917f6299ec50e4ed9cf78e13f9" title=" " alt="" coords="166,56,349,83"/>
<area shape="rect" href="nvme_8h.html#aafda35baa4ea5b7ca05146aa59f3c6f9" title=" " alt="" coords="189,107,326,133"/>
<area shape="rect" href="femu_8c.html#af615b7b798522330f8e5375f392060ea" title=" " alt="" coords="200,157,315,184"/>
<area shape="rect" href="femu_8c.html#ac62fcc12cac3ca808b290e34dd507d66" title=" " alt="" coords="169,208,345,235"/>
<area shape="rect" href="femu_8c.html#afdad4c815f4a43df7b71e178c19868f0" title=" " alt="" coords="201,259,314,285"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="160,512,355,539"/>
<area shape="rect" href="femu_8c.html#ac38f13e024b64cd42d58b3e6951a3da8" title=" " alt="" coords="406,208,575,235"/>
<area shape="rect" href="nvme_8h.html#ab5233c5c538a64df4e9b391949d334e3" title=" " alt="" coords="674,157,745,184"/>
<area shape="rect" href="femu_8c.html#a61b5f2e26fd1e0a3d04ce574e8ef9d68" title=" " alt="" coords="627,208,792,235"/>
<area shape="rect" href="femu_8c.html#a85d4cc40606cf62f5edf085512acb599" title=" " alt="" coords="429,259,552,285"/>
<area shape="rect" href="nvme_8h.html#acd64982aef4cb1864b53952a92068c27" title=" " alt="" coords="457,309,524,336"/>
<area shape="rect" href="nvme_8h.html#a91fafe4960342e59b47d66f807966b2e" title=" " alt="" coords="457,360,525,387"/>
<area shape="rect" href="bb_8c.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="410,411,571,437"/>
<area shape="rect" href="nop_8c.html#ad4130ad93f90bb1d6ba3bfd595214751" title=" " alt="" coords="410,461,571,488"/>
<area shape="rect" href="nvme_8h.html#a623f6939cbe95d9de1eab8847f6ddba0" title=" " alt="" coords="403,563,579,589"/>
<area shape="rect" href="nvme_8h.html#afbce5130c2fccec6d897d6efc144a7d8" title=" " alt="" coords="403,816,579,843"/>
<area shape="rect" href="nvme_8h.html#a08aeb05994f79207836886d8a1475372" title=" " alt="" coords="411,1044,571,1071"/>
<area shape="rect" href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6" title=" " alt="" coords="457,1095,524,1121"/>
<area shape="rect" href="nvme_8h.html#a5e3ee6be1fc2a840978ffa649cf6339d" title=" " alt="" coords="457,1145,524,1172"/>
<area shape="rect" href="bb_8c.html#afd2d6d40a801b554569b5c4c364f8df6" title=" " alt="" coords="649,259,770,285"/>
<area shape="rect" href="bb_8c.html#a3fc7384f815cca2f52003206b20324df" title=" " alt="" coords="676,309,743,336"/>
<area shape="rect" href="bb_8c.html#a86a2ad222c79ea1e3eb798c53f472908" title=" " alt="" coords="663,360,755,387"/>
<area shape="rect" href="bb_8c.html#a5d1e86a5f61a1db5c15dae757b35a5c3" title=" " alt="" coords="873,208,939,235"/>
<area shape="rect" href="bb_8c.html#aeaee718de94247f9ea5dc15b03680329" title=" " alt="" coords="847,259,965,285"/>
<area shape="rect" href="ftl_8c.html#af3f6de830b620d1f3060c7de8c8ddec0" title=" " alt="" coords="870,309,942,336"/>
<area shape="rect" href="bb_8c.html#a3b0eb3030af1311ad77c85da413a32d8" title=" " alt="" coords="853,360,959,387"/>
<area shape="rect" href="nvme-io_8c.html#a57765d5f7b83e5c6af69f1f5c501beb7" title=" " alt="" coords="1020,411,1103,437"/>
<area shape="rect" href="nop_8c.html#ab64cc71dd3eaeabb313d30fb4bd39535" title=" " alt="" coords="672,411,747,437"/>
<area shape="rect" href="nop_8c.html#a56ad5bb3626f3d51b93f720d91e65e69" title=" " alt="" coords="856,461,956,488"/>
<area shape="rect" href="nop_8c.html#aeaee718de94247f9ea5dc15b03680329" title=" " alt="" coords="847,411,965,437"/>
<area shape="rect" href="oc12_8c.html#a68620169de187b09e15ef18b52eb72c6" title=" " alt="" coords="641,512,777,539"/>
<area shape="rect" href="oc12_8c.html#adb2f63023ff079bd918f3e0a2fc99c0a" title=" " alt="" coords="667,563,752,589"/>
<area shape="rect" href="oc12_8c.html#a0caef7cdff7d502bdf678c7e8c57e35e" title=" " alt="" coords="669,613,750,640"/>
<area shape="rect" href="oc12_8c.html#a3c41a58559ee2c92463ac4f25dab0a08" title=" " alt="" coords="656,664,763,691"/>
<area shape="rect" href="oc12_8c.html#a9ad0ccde984b0ad5434da3622acc0389" title=" " alt="" coords="851,512,961,539"/>
<area shape="rect" href="oc12_8c.html#aada1f75e02b085c6a43438e5ab1c81e0" title=" " alt="" coords="852,563,960,589"/>
<area shape="rect" href="oc12_8c.html#a6edf286a27463261b9a975ee1eeefcc8" title=" " alt="" coords="840,613,972,640"/>
<area shape="rect" href="oc20_8c.html#a067e9b542ca7593640f20257d6f9c137" title=" " alt="" coords="641,715,777,741"/>
<area shape="rect" href="oc20_8c.html#a0d7f8f90592d8683dd918093e3d4a910" title=" " alt="" coords="667,765,752,792"/>
<area shape="rect" href="oc20_8c.html#a25e01fd61efab89abcea94af95d9c3d5" title=" " alt="" coords="655,816,763,843"/>
<area shape="rect" href="oc20_8c.html#ab8b64d072bf22bd8976f359cf512d456" title=" " alt="" coords="669,867,750,893"/>
<area shape="rect" href="oc20_8c.html#a2b271895f51ed6a3e57db3cf0a7f9f94" title=" " alt="" coords="656,917,763,944"/>
<area shape="rect" href="oc20_8c.html#a59be92e5cac7979f5bba9f2bf96bf9d3" title=" " alt="" coords="635,968,784,995"/>
<area shape="rect" href="zns_8c.html#a88a38b39db2e6829a576bebd97ece799" title=" " alt="" coords="646,1019,773,1045"/>
<area shape="rect" href="zns_8c.html#a8910113c66e3bce77dbbdbb560d9aefd" title=" " alt="" coords="671,1069,747,1096"/>
<area shape="rect" href="zns_8c.html#aa65a4a4ae802bdd6f8cc362247c6325b" title=" " alt="" coords="673,1120,745,1147"/>
<area shape="rect" href="zns_8c.html#ab23b42610e0276e68ccaac4d13e18bfa" title=" " alt="" coords="660,1171,759,1197"/>
<area shape="rect" href="zns_8c.html#a4c27f4956bf97dcabba73019e80b191a" title=" " alt="" coords="655,1221,764,1248"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a966fbeb7afc495936413dbc445a0dd45_icgraph.png" border="0" usemap="#femu_8c_a966fbeb7afc495936413dbc445a0dd45_icgraph" alt=""/></div>
<map name="femu_8c_a966fbeb7afc495936413dbc445a0dd45_icgraph" id="femu_8c_a966fbeb7afc495936413dbc445a0dd45_icgraph">
<area shape="rect" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a99f22cca6531280ddfe5b948d83e7bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99f22cca6531280ddfe5b948d83e7bbd">&#9670;&nbsp;</a></span>femu_register_types()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void femu_register_types </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    type_register_static(&amp;<a class="code" href="femu_8c.html#ab0047681e4f6d44aaca85d64f5a5dbac">femu_info</a>);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a02f254917f6299ec50e4ed9cf78e13f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02f254917f6299ec50e4ed9cf78e13f9">&#9670;&nbsp;</a></span>nvme_check_constraints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nvme_check_constraints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> ((n-&gt;<a class="code" href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">num_namespaces</a> == 0 || n-&gt;<a class="code" href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">num_namespaces</a> &gt; <a class="code" href="nvme_8h.html#a22b79bece90df79ade46e0999aa0e45d">NVME_MAX_NUM_NAMESPACES</a>)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        || (n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> &lt; 1 || n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> &gt; <a class="code" href="nvme_8h.html#aeea668dd085c0790c64598631f996b36">NVME_MAX_QS</a>) ||</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a> &gt; <a class="code" href="nvme_8h.html#ac31b5eee3c66e628b92c5dd99fe9dbc9">NVME_MAX_STRIDE</a>) ||</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#abd6b7da5cc2c552343a87ed43323a575">max_q_ents</a> &lt; 1) ||</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#ad2a9b8afdf4fd7e494cc4025ba47d741">max_sqes</a> &gt; <a class="code" href="nvme_8h.html#acb523111122957cb0cafcf2ca9208bcc">NVME_MAX_QUEUE_ES</a> || n-&gt;<a class="code" href="structFemuCtrl.html#ae737130695e70cf78e89fa16269b28ab">max_cqes</a> &gt; <a class="code" href="nvme_8h.html#acb523111122957cb0cafcf2ca9208bcc">NVME_MAX_QUEUE_ES</a> ||</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;         n-&gt;<a class="code" href="structFemuCtrl.html#ad2a9b8afdf4fd7e494cc4025ba47d741">max_sqes</a> &lt; <a class="code" href="nvme_8h.html#aa12409d4e066a991b0d6224a7c23ba0e">NVME_MIN_SQUEUE_ES</a> || n-&gt;<a class="code" href="structFemuCtrl.html#ae737130695e70cf78e89fa16269b28ab">max_cqes</a> &lt; <a class="code" href="nvme_8h.html#a84c4f2d49a3d154d0b737fad84f74f55">NVME_MIN_CQUEUE_ES</a>) ||</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a1dd8af12f361b973c120c80b43ca677c">vwc</a> &gt; 1 || n-&gt;<a class="code" href="structFemuCtrl.html#a5157a495168afc58a0631c7b689f0f23">intc</a> &gt; 1 || n-&gt;<a class="code" href="structFemuCtrl.html#aa7dd5d44d6fade5dd64cc4bdd680a4b5">cqr</a> &gt; 1 || n-&gt;<a class="code" href="structFemuCtrl.html#afa7be59e4d6d616e3104152b78d41350">extended</a> &gt; 1) ||</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a44e0e0b10fb25b302ecbe19b1e085940">nlbaf</a> &gt; 16) ||</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a665e480db08bf31552661c521abdd768">lba_index</a> &gt;= n-&gt;<a class="code" href="structFemuCtrl.html#a44e0e0b10fb25b302ecbe19b1e085940">nlbaf</a>) ||</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#ae1785a80724176a123fa5f8ba458e643">meta</a> &amp;&amp; !n-&gt;<a class="code" href="structFemuCtrl.html#addaf0def5160d73cf6adc2e5afb40948">mc</a>) ||</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#afa7be59e4d6d616e3104152b78d41350">extended</a> &amp;&amp; !(<a class="code" href="nvme_8h.html#ade3f32bb0eea4050edff1fa6aa9d7adc">NVME_ID_NS_MC_EXTENDED</a>(n-&gt;<a class="code" href="structFemuCtrl.html#addaf0def5160d73cf6adc2e5afb40948">mc</a>))) ||</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        (!n-&gt;<a class="code" href="structFemuCtrl.html#afa7be59e4d6d616e3104152b78d41350">extended</a> &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#ae1785a80724176a123fa5f8ba458e643">meta</a> &amp;&amp; !(<a class="code" href="nvme_8h.html#a19e708866bcd5dbe88a1a6ba68d62b41">NVME_ID_NS_MC_SEPARATE</a>(n-&gt;<a class="code" href="structFemuCtrl.html#addaf0def5160d73cf6adc2e5afb40948">mc</a>))) ||</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a> &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#ae1785a80724176a123fa5f8ba458e643">meta</a> &lt; 8) ||</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a> &amp;&amp; ((n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a> &amp; <a class="code" href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524aab19b1e4d6a67e91b4e8f8a2b6ec4496">DPS_FIRST_EIGHT</a>) &amp;&amp;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    !<a class="code" href="nvme_8h.html#adf53862fece86b6d4aea0eacd394a89c">NVME_ID_NS_DPC_FIRST_EIGHT</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ad8874d5f34ad77b916883e54291465e4">dpc</a>))) ||</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a> &amp;&amp; !(n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a> &amp; <a class="code" href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524aab19b1e4d6a67e91b4e8f8a2b6ec4496">DPS_FIRST_EIGHT</a>) &amp;&amp;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         !<a class="code" href="nvme_8h.html#aaa7181e8c0f5909e2343e4ecf8e60eea">NVME_ID_NS_DPC_LAST_EIGHT</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ad8874d5f34ad77b916883e54291465e4">dpc</a>)) ||</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a> &amp; <a class="code" href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524abf6bf44feedb74c6a49654775529d786">DPS_TYPE_MASK</a> &amp;&amp; !((n-&gt;<a class="code" href="structFemuCtrl.html#ad8874d5f34ad77b916883e54291465e4">dpc</a> &amp; <a class="code" href="nvme_8h.html#af67da6ec0e8971c48e5263aef804c871">NVME_ID_NS_DPC_TYPE_MASK</a>) &amp;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                     (1 &lt;&lt; ((n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a> &amp; <a class="code" href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524abf6bf44feedb74c6a49654775529d786">DPS_TYPE_MASK</a>) - 1)))) ||</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#aac04c0f3706032920e00d55fbe18fbfe">mpsmax</a> &gt; 0xf || n-&gt;<a class="code" href="structFemuCtrl.html#aac04c0f3706032920e00d55fbe18fbfe">mpsmax</a> &gt; n-&gt;<a class="code" href="structFemuCtrl.html#a8b6ee398ea78cc01b3e2d3c121e933aa">mpsmin</a>) ||</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#aad9e10e513218bf41a5fe498fea33e1f">oacs</a> &amp; ~(<a class="code" href="nvme_8h.html#a8b54138b79410c03932cbda6432f11bcab48f109e06ae031c938dfecc3c5deca4">NVME_OACS_FORMAT</a>)) ||</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        (n-&gt;<a class="code" href="structFemuCtrl.html#a19b37fe5892ac52aa01e3b8e7e0035f1">oncs</a> &amp; ~(<a class="code" href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aa728dcb2daaf4d4b6fd6f67d441fd3dae">NVME_ONCS_COMPARE</a> | <a class="code" href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aa2354e6a55a5d0065b8dfd3a33af6221d">NVME_ONCS_WRITE_UNCORR</a> |</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                     <a class="code" href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aad3aa66210104808011e11bb2c9a52f14">NVME_ONCS_DSM</a> | <a class="code" href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aa1fa2523620b4cf9057cb9d1fed348271">NVME_ONCS_WRITE_ZEROS</a>))) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                         <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;     }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a02f254917f6299ec50e4ed9cf78e13f9_icgraph.png" border="0" usemap="#femu_8c_a02f254917f6299ec50e4ed9cf78e13f9_icgraph" alt=""/></div>
<map name="femu_8c_a02f254917f6299ec50e4ed9cf78e13f9_icgraph" id="femu_8c_a02f254917f6299ec50e4ed9cf78e13f9_icgraph">
<area shape="rect" title=" " alt="" coords="332,5,515,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a25b1d92e20b65b39e29a38cb02ddcc19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25b1d92e20b65b39e29a38cb02ddcc19">&#9670;&nbsp;</a></span>nvme_clear_ctrl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_clear_ctrl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shutdown</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;{</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="comment">/* Coperd: pause nvme poller at earliest convenience */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a6291ffd43b13aa9c7bc871a7e1bb4a11">dataplane_started</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="keywordflow">if</span> (shutdown) {</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        <a class="code" href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a>(<span class="stringliteral">&quot;shutting down NVMe Controller ...\n&quot;</span>);</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        <a class="code" href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a>(<span class="stringliteral">&quot;disabling NVMe Controller ...\n&quot;</span>);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    }</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keywordflow">if</span> (shutdown) {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <a class="code" href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a>(<span class="stringliteral">&quot;%s,clear_guest_notifier\n&quot;</span>, __func__);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <a class="code" href="intr_8c.html#ad98adfb6254598edb5f608bbf2018c8c">nvme_clear_virq</a>(n);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    }</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a>; i++) {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[i] != NULL) {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;            <a class="code" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e">nvme_free_sq</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[i], n);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        }</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    }</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a>; i++) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[i] != NULL) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            <a class="code" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93">nvme_free_cq</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[i], n);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    }</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a> = 0;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a8462a22290ca55a344ab3047aa1d55bd">temp_thresh</a> = 0x14d;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a76662c7f1b9027edb1088c28b811c335">temp_warn_issued</a> = 0;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a9eed30c84e2fdec251abd2d112aa857a">dbs_addr</a> = 0;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a8deef2eb4dfac999392c54657407b645">dbs_addr_hva</a> = 0;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a6f86d8c1d2b5365aef55a5d879316868">eis_addr</a> = 0;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a525d33d10ee74874b135c7899fe80847">eis_addr_hva</a> = 0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_cgraph.png" border="0" usemap="#femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_cgraph" alt=""/></div>
<map name="femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_cgraph" id="femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,132,83"/>
<area shape="rect" href="intr_8c.html#ad98adfb6254598edb5f608bbf2018c8c" title=" " alt="" coords="180,5,311,32"/>
<area shape="rect" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93" title=" " alt="" coords="188,56,303,83"/>
<area shape="rect" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e" title=" " alt="" coords="188,107,303,133"/>
<area shape="rect" href="intr_8c.html#a9e513f85a2a84b262bdcb918d1785fea" title=" " alt="" coords="359,5,553,32"/>
<area shape="rect" href="intr_8c.html#a1a56c08c52edde31f9e476178fb352a1" title=" " alt="" coords="601,5,816,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_icgraph.png" border="0" usemap="#femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_icgraph" alt=""/></div>
<map name="femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_icgraph" id="femu_8c_a25b1d92e20b65b39e29a38cb02ddcc19_icgraph">
<area shape="rect" title=" " alt="" coords="372,31,499,57"/>
<area shape="rect" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0" title=" " alt="" coords="217,5,305,32"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="197,56,324,83"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="15,5,139,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,56,149,83"/>
</map>
</div>

</div>
</div>
<a id="a19c88acc017844e5a46446e274947053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19c88acc017844e5a46446e274947053">&#9670;&nbsp;</a></span>nvme_cmb_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t nvme_cmb_read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hwaddr&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    uint64_t val;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="structFemuCtrl.html">FemuCtrl</a> *n = (<a class="code" href="structFemuCtrl.html">FemuCtrl</a> *)opaque;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    memcpy(&amp;val, &amp;n-&gt;<a class="code" href="structFemuCtrl.html#a1be1203ca1d05eb8f7824e365c3c44e2">cmbuf</a>[addr], size);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a04df02f4267b9ff3d1dc8cee3fab6581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04df02f4267b9ff3d1dc8cee3fab6581">&#9670;&nbsp;</a></span>nvme_cmb_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_cmb_write </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hwaddr&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="structFemuCtrl.html">FemuCtrl</a> *n = (<a class="code" href="structFemuCtrl.html">FemuCtrl</a> *)opaque;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    memcpy(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a1be1203ca1d05eb8f7824e365c3c44e2">cmbuf</a>[addr], &amp;data, size);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a749caeadb2968b6c63c5f1b2d646eb5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a749caeadb2968b6c63c5f1b2d646eb5a">&#9670;&nbsp;</a></span>nvme_destroy_poller()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_destroy_poller </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a>(<span class="stringliteral">&quot;Destroying NVMe poller !!\n&quot;</span>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= n-&gt;<a class="code" href="structFemuCtrl.html#a78baba4717dd495d81af587a1a95a0b7">num_poller</a>; i++) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        qemu_thread_join(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a226acb27573ba9226d9a426b95bfca20">poller</a>[i]);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= n-&gt;<a class="code" href="structFemuCtrl.html#a78baba4717dd495d81af587a1a95a0b7">num_poller</a>; i++) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="pqueue_8h.html#acceacc4429dd9cd31d5af09f3f473cb0">pqueue_free</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a3b6bdba05fa2cf581ace5cc08cd365f5">pq</a>[i]);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="rte__ring_8h.html#aae4026d87730ebef2cbcd08a42778e80">femu_ring_free</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ad818a28bdef83c4bb07c0d4f00942b06">to_poller</a>[i]);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="rte__ring_8h.html#aae4026d87730ebef2cbcd08a42778e80">femu_ring_free</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a0ff7c6d5e0e6313cc66e2d62f4e98221">to_ftl</a>[i]);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    g_free(n-&gt;<a class="code" href="structFemuCtrl.html#a78003b6c4ed89a589c99c4b01b9c689a">should_isr</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_cgraph.png" border="0" usemap="#femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_cgraph" alt=""/></div>
<map name="femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_cgraph" id="femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,164,57"/>
<area shape="rect" href="rte__ring_8h.html#aae4026d87730ebef2cbcd08a42778e80" title=" " alt="" coords="212,5,333,32"/>
<area shape="rect" href="pqueue_8h.html#acceacc4429dd9cd31d5af09f3f473cb0" title=" " alt="" coords="221,56,324,83"/>
<area shape="rect" href="rte__ring_8c.html#a564e012c1eb4ae08f9eea3acfd08b377" title=" " alt="" coords="381,5,487,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_icgraph.png" border="0" usemap="#femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_icgraph" alt=""/></div>
<map name="femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_icgraph" id="femu_8c_a749caeadb2968b6c63c5f1b2d646eb5a_icgraph">
<area shape="rect" title=" " alt="" coords="313,5,472,32"/>
<area shape="rect" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0" title=" " alt="" coords="177,5,265,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a85d4cc40606cf62f5edf085512acb599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85d4cc40606cf62f5edf085512acb599">&#9670;&nbsp;</a></span>nvme_init_cmb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_init_cmb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ab056a3f25a92f5ed0afc6be0ad423ebc">cmbloc</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a599d81ece0c6074fae8893b34a929109">cmbloc</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#adaa7ca7347697c8bd7be655f8e3e1ce1">cmbsz</a>  = n-&gt;<a class="code" href="structFemuCtrl.html#abfbbff9ca2a3d79e3a8a4c3bd4c892e3">cmbsz</a>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a1be1203ca1d05eb8f7824e365c3c44e2">cmbuf</a> = g_malloc0(<a class="code" href="nvme_8h.html#a8531499a7f89bcd8161379d5773eaa9a">NVME_CMBSZ_GETSIZE</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#adaa7ca7347697c8bd7be655f8e3e1ce1">cmbsz</a>));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    memory_region_init_io(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#ab880f4820c2fda0e6068c014eda64d1f">ctrl_mem</a>, OBJECT(n), &amp;<a class="code" href="femu_8c.html#a04c9e2f4a6e9acb3f0f23331f8e1cf09">nvme_cmb_ops</a>, n, <span class="stringliteral">&quot;nvme-cmb&quot;</span>,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                          <a class="code" href="nvme_8h.html#a8531499a7f89bcd8161379d5773eaa9a">NVME_CMBSZ_GETSIZE</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#adaa7ca7347697c8bd7be655f8e3e1ce1">cmbsz</a>));</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    pci_register_bar(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>, <a class="code" href="nvme_8h.html#a3c67084a1720ad470489be5edb36ae5c">NVME_CMBLOC_BIR</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ab056a3f25a92f5ed0afc6be0ad423ebc">cmbloc</a>),</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                     PCI_BASE_ADDRESS_SPACE_MEMORY |</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                     PCI_BASE_ADDRESS_MEM_TYPE_64, &amp;n-&gt;<a class="code" href="structFemuCtrl.html#ab880f4820c2fda0e6068c014eda64d1f">ctrl_mem</a>); }</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a85d4cc40606cf62f5edf085512acb599_icgraph.png" border="0" usemap="#femu_8c_a85d4cc40606cf62f5edf085512acb599_icgraph" alt=""/></div>
<map name="femu_8c_a85d4cc40606cf62f5edf085512acb599_icgraph" id="femu_8c_a85d4cc40606cf62f5edf085512acb599_icgraph">
<area shape="rect" title=" " alt="" coords="493,5,616,32"/>
<area shape="rect" href="femu_8c.html#afdad4c815f4a43df7b71e178c19868f0" title=" " alt="" coords="332,5,445,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="af615b7b798522330f8e5375f392060ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af615b7b798522330f8e5375f392060ea">&#9670;&nbsp;</a></span>nvme_init_ctrl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_init_ctrl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="structNvmeIdCtrl.html">NvmeIdCtrl</a> *<span class="keywordtype">id</span> = &amp;n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    uint8_t *pci_conf = n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>.config;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">char</span> *subnqn;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">id</span>-&gt;vid = cpu_to_le16(pci_get_word(pci_conf + PCI_VENDOR_ID));</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">id</span>-&gt;ssvid = cpu_to_le16(pci_get_word(pci_conf + PCI_SUBSYSTEM_VENDOR_ID));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordtype">id</span>-&gt;rab          = 6;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordtype">id</span>-&gt;ieee[0]      = 0x00;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">id</span>-&gt;ieee[1]      = 0x02;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordtype">id</span>-&gt;ieee[2]      = 0xb3;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">id</span>-&gt;cmic         = 0;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordtype">id</span>-&gt;mdts         = n-&gt;<a class="code" href="structFemuCtrl.html#ab5a216b7e1406665640e42409e2c8de8">mdts</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">id</span>-&gt;ver          = 0x00010300;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">id</span>-&gt;oacs         = cpu_to_le16(n-&gt;<a class="code" href="structFemuCtrl.html#aad9e10e513218bf41a5fe498fea33e1f">oacs</a> | <a class="code" href="nvme_8h.html#a8b54138b79410c03932cbda6432f11bca85b74c8eb089683b81699f2b4ce1a0b4">NVME_OACS_DBBUF</a>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordtype">id</span>-&gt;acl          = n-&gt;<a class="code" href="structFemuCtrl.html#aeec16819b74093e71d70d08ec2a45eea">acl</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordtype">id</span>-&gt;aerl         = n-&gt;<a class="code" href="structFemuCtrl.html#a101673f97321bbc185c290625ce0d8b2">aerl</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordtype">id</span>-&gt;frmw         = 7 &lt;&lt; 1 | 1;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordtype">id</span>-&gt;lpa          = <a class="code" href="nvme_8h.html#a720b004b4054c0faa53069ad867af926a09f15803560d82030a8222517d6daede">NVME_LPA_NS_SMART</a> | <a class="code" href="nvme_8h.html#a720b004b4054c0faa53069ad867af926a95d3707d5039c7d79040091c7fda43a0">NVME_LPA_CSE</a> | <a class="code" href="nvme_8h.html#a720b004b4054c0faa53069ad867af926a5152447894ba419aa9ffbb2f638c67bd">NVME_LPA_EXTENDED</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">id</span>-&gt;elpe         = n-&gt;<a class="code" href="structFemuCtrl.html#a31fb867a33c2ccad78e9c82456391e89">elpe</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">id</span>-&gt;npss         = 0;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">id</span>-&gt;sqes         = (n-&gt;<a class="code" href="structFemuCtrl.html#ad2a9b8afdf4fd7e494cc4025ba47d741">max_sqes</a> &lt;&lt; 4) | 0x6;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">id</span>-&gt;cqes         = (n-&gt;<a class="code" href="structFemuCtrl.html#ae737130695e70cf78e89fa16269b28ab">max_cqes</a> &lt;&lt; 4) | 0x4;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordtype">id</span>-&gt;nn           = cpu_to_le32(n-&gt;<a class="code" href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">num_namespaces</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordtype">id</span>-&gt;oncs         = cpu_to_le16(n-&gt;<a class="code" href="structFemuCtrl.html#a19b37fe5892ac52aa01e3b8e7e0035f1">oncs</a>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    subnqn           = g_strdup_printf(<span class="stringliteral">&quot;nqn.2019-08.org.qemu:%s&quot;</span>, n-&gt;<a class="code" href="structFemuCtrl.html#a7058666c9b1eaec0493d7514a60493aa">serial</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    strpadcpy((<span class="keywordtype">char</span> *)id-&gt;<a class="code" href="structNvmeIdCtrl.html#a1fe51dee35d75796daf8b758c448543d">subnqn</a>, <span class="keyword">sizeof</span>(id-&gt;<a class="code" href="structNvmeIdCtrl.html#a1fe51dee35d75796daf8b758c448543d">subnqn</a>), subnqn, <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">id</span>-&gt;fuses        = cpu_to_le16(0);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordtype">id</span>-&gt;fna          = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordtype">id</span>-&gt;vwc          = n-&gt;<a class="code" href="structFemuCtrl.html#a1dd8af12f361b973c120c80b43ca677c">vwc</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">id</span>-&gt;awun         = cpu_to_le16(0);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordtype">id</span>-&gt;awupf        = cpu_to_le16(0);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordtype">id</span>-&gt;psd[0].mp    = cpu_to_le16(0x9c4);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">id</span>-&gt;psd[0].enlat = cpu_to_le32(0x10);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordtype">id</span>-&gt;psd[0].exlat = cpu_to_le32(0x4);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a58f1323ae312b9d4781f1bb8d3a30e0f">arbitration</a>     = 0x1f0f0706;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#ad0949f4a41576cf534231a8ceb73bec7">power_mgmt</a>      = 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a8462a22290ca55a344ab3047aa1d55bd">temp_thresh</a>     = 0x14d;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a63adb2ba3685f4bf39e7375c37be8b14">err_rec</a>         = 0;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a3425f02bb96f18760ef44b0e0a055741">volatile_wc</a>     = n-&gt;<a class="code" href="structFemuCtrl.html#a1dd8af12f361b973c120c80b43ca677c">vwc</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a6115970b3015eb88da80de2ef298c39a">num_io_queues</a>   = ((n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> - 1) | ((n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> -</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                                              1) &lt;&lt; 16));</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a484359e6104d0f3bfc1f3a81189497d7">int_coalescing</a>  = n-&gt;<a class="code" href="structFemuCtrl.html#a10b78b0a27397642311d5a7571397dd5">intc_thresh</a> | (n-&gt;<a class="code" href="structFemuCtrl.html#a17f33974ac2017aa9059ee2169fed8e5">intc_time</a> &lt;&lt; 8);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a2d973610d2446267d4290905c373407a">write_atomicity</a> = 0;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a36ec14134ad2d2e9e12ee59cf8c7f8b2">async_config</a>    = 0x0;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a877d533f2292d0b48b8fa51a0982e7be">sw_prog_marker</a>  = 0;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt;= n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a>; i++) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a392d23a7bae9920c1573f7c601419ea7">int_vector_config</a>[i] = i | (n-&gt;<a class="code" href="structFemuCtrl.html#a5157a495168afc58a0631c7b689f0f23">intc</a> &lt;&lt; 16);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a> = 0;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="nvme_8h.html#a5398c868fe6dd866d362d033f3ab7254">NVME_CAP_SET_MQES</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, n-&gt;<a class="code" href="structFemuCtrl.html#abd6b7da5cc2c552343a87ed43323a575">max_q_ents</a>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="nvme_8h.html#aa1b4a61f26a3b8a87c066ec90a1cdde5">NVME_CAP_SET_CQR</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, n-&gt;<a class="code" href="structFemuCtrl.html#aa7dd5d44d6fade5dd64cc4bdd680a4b5">cqr</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="nvme_8h.html#ab29fb0f1f7bb8079954ce617d60e309b">NVME_CAP_SET_AMS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, 1);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="nvme_8h.html#a5b035b881c5f238d08d2788cd5586a8c">NVME_CAP_SET_TO</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, 0xf);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="nvme_8h.html#a2f70b9a841d79206c0e202811811bb1d">NVME_CAP_SET_DSTRD</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="nvme_8h.html#aeb65074adf567541aa15b4ea7c5dc840">NVME_CAP_SET_NSSRS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, 0);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="nvme_8h.html#a4dafffcc7e1c39b89809806b8dec8085">NVME_CAP_SET_CSS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, 1);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="nvme_8h.html#a4dafffcc7e1c39b89809806b8dec8085">NVME_CAP_SET_CSS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, <a class="code" href="nvme_8h.html#aaefe481d54f102fbcbf8e6fdc2732f03a958776bc677b132e542c7c258f359a4a">NVME_CAP_CSS_CSI_SUPP</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="nvme_8h.html#a4dafffcc7e1c39b89809806b8dec8085">NVME_CAP_SET_CSS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, <a class="code" href="nvme_8h.html#aaefe481d54f102fbcbf8e6fdc2732f03a9eed416cace45ae3b29b683488fc3ade">NVME_CAP_CSS_ADMIN_ONLY</a>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="nvme_8h.html#a93708ba9e1699c226d187043ab7724ae">NVME_CAP_SET_MPSMIN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, n-&gt;<a class="code" href="structFemuCtrl.html#a8b6ee398ea78cc01b3e2d3c121e933aa">mpsmin</a>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="nvme_8h.html#a41336d7a8cd2ea97a1c0fe425b28634e">NVME_CAP_SET_MPSMAX</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>, n-&gt;<a class="code" href="structFemuCtrl.html#aac04c0f3706032920e00d55fbe18fbfe">mpsmax</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#aca1bc08dfde0c3b5be3c9a73e9579f9b">vs</a> = <a class="code" href="femu_8c.html#a412d88dd847ec3c6e8f4f1f669e183e5">NVME_SPEC_VER</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a685531f770430492ba7ac28d3eb869c7">intmc</a> = n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a6388aeea1a613c4341fe8a6c4d6cafb6">intms</a> = 0;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ada17b92a62409a544d72524c34cfe8e4">temperature</a> = <a class="code" href="nvme_8h.html#a35e5d0f44d80ad9b99d3dac6672af991">NVME_TEMPERATURE</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_af615b7b798522330f8e5375f392060ea_icgraph.png" border="0" usemap="#femu_8c_af615b7b798522330f8e5375f392060ea_icgraph" alt=""/></div>
<map name="femu_8c_af615b7b798522330f8e5375f392060ea_icgraph" id="femu_8c_af615b7b798522330f8e5375f392060ea_icgraph">
<area shape="rect" title=" " alt="" coords="332,5,447,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ac38f13e024b64cd42d58b3e6951a3da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac38f13e024b64cd42d58b3e6951a3da8">&#9670;&nbsp;</a></span>nvme_init_namespace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nvme_init_namespace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structNvmeNamespace.html">NvmeNamespace</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Error **&#160;</td>
          <td class="paramname"><em>errp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="structNvmeIdNs.html">NvmeIdNs</a> *id_ns = &amp;ns-&gt;<a class="code" href="structNvmeNamespace.html#ac5c0ddf3fd8b71e4387062b8a5e1075d">id_ns</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    uint64_t num_blks;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordtype">int</span> lba_index;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="femu_8c.html#a61b5f2e26fd1e0a3d04ce574e8ef9d68">nvme_ns_init_identify</a>(n, id_ns);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    lba_index = <a class="code" href="nvme_8h.html#a91333268a64e669e088f20aaf0bfd9b7">NVME_ID_NS_FLBAS_INDEX</a>(ns-&gt;<a class="code" href="structNvmeNamespace.html#ac5c0ddf3fd8b71e4387062b8a5e1075d">id_ns</a>.<a class="code" href="structNvmeIdNs.html#ac2061ba91f1d2bf0282bfe22221f65a2">flbas</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    num_blks = n-&gt;<a class="code" href="structFemuCtrl.html#a010a28b0d592b4f5b5f0f0131afc60ed">ns_size</a> / ((1 &lt;&lt; id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a751e3c19983752a5acb34244eba649e8">lbaf</a>[lba_index].<a class="code" href="structNvmeLBAF.html#ac0a10526d855cab5ceed66963c0f5a44">lbads</a>));</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#ad67c077eb81ad2014ec2d9217c2c537d">nuse</a> = id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a0588b7533fd0a4d1d56fd12b8fb7502d">ncap</a> = id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a4a814e395ae6ea7b3b7c5cba1c22ad85">nsze</a> = cpu_to_le64(num_blks);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a0b48d3c6cc09b094369348af59a3b096">csi</a> = <a class="code" href="nvme_8h.html#a2342f477442526e6bc2aa046f9bd4a94a28181a48fe56de9ccab6eb11dd3fc9cc">NVME_CSI_NVM</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    ns-&gt;<a class="code" href="structNvmeNamespace.html#a8354f38841896795412b089fdfbe1528">ctrl</a> = n;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    ns-&gt;<a class="code" href="structNvmeNamespace.html#ad0b627e5006c33450b452a995b5c4704">ns_blks</a> = <a class="code" href="nvme_8h.html#ab5233c5c538a64df4e9b391949d334e3">ns_blks</a>(ns, lba_index);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    ns-&gt;<a class="code" href="structNvmeNamespace.html#afc01a4df7d13a2a27416a4472efec6d1">util</a> = bitmap_new(num_blks);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    ns-&gt;<a class="code" href="structNvmeNamespace.html#a82fb6235b209c097c887181151ad33a1">uncorrectable</a> = bitmap_new(num_blks);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_cgraph.png" border="0" usemap="#femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_cgraph" alt=""/></div>
<map name="femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_cgraph" id="femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,175,57"/>
<area shape="rect" href="nvme_8h.html#ab5233c5c538a64df4e9b391949d334e3" title=" " alt="" coords="270,5,341,32"/>
<area shape="rect" href="femu_8c.html#a61b5f2e26fd1e0a3d04ce574e8ef9d68" title=" " alt="" coords="223,56,388,83"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_icgraph.png" border="0" usemap="#femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_icgraph" alt=""/></div>
<map name="femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_icgraph" id="femu_8c_ac38f13e024b64cd42d58b3e6951a3da8_icgraph">
<area shape="rect" title=" " alt="" coords="556,5,725,32"/>
<area shape="rect" href="femu_8c.html#ac62fcc12cac3ca808b290e34dd507d66" title=" " alt="" coords="332,5,508,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ac62fcc12cac3ca808b290e34dd507d66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac62fcc12cac3ca808b290e34dd507d66">&#9670;&nbsp;</a></span>nvme_init_namespaces()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nvme_init_namespaces </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Error **&#160;</td>
          <td class="paramname"><em>errp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">/* FIXME: FEMU only supports 1 namesapce now */</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    assert(n-&gt;<a class="code" href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">num_namespaces</a> == 1);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n-&gt;<a class="code" href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">num_namespaces</a>; i++) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="structNvmeNamespace.html">NvmeNamespace</a> *ns = &amp;n-&gt;<a class="code" href="structFemuCtrl.html#a98ca6ff3bc65ccc7f98a589e018b7d71">namespaces</a>[i];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        ns-&gt;<a class="code" href="structNvmeNamespace.html#a1868691a915c0a0cc8eeef08fe969f51">size</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a010a28b0d592b4f5b5f0f0131afc60ed">ns_size</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        ns-&gt;<a class="code" href="structNvmeNamespace.html#a0ed912de2d37b54d07b1f27deb7c5bb6">start_block</a> = i * n-&gt;<a class="code" href="structFemuCtrl.html#a010a28b0d592b4f5b5f0f0131afc60ed">ns_size</a> &gt;&gt; BDRV_SECTOR_BITS;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        ns-&gt;<a class="code" href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">id</a> = i + 1;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="femu_8c.html#ac38f13e024b64cd42d58b3e6951a3da8">nvme_init_namespace</a>(n, ns, errp)) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_ac62fcc12cac3ca808b290e34dd507d66_cgraph.png" border="0" usemap="#femu_8c_ac62fcc12cac3ca808b290e34dd507d66_cgraph" alt=""/></div>
<map name="femu_8c_ac62fcc12cac3ca808b290e34dd507d66_cgraph" id="femu_8c_ac62fcc12cac3ca808b290e34dd507d66_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,181,57"/>
<area shape="rect" href="femu_8c.html#ac38f13e024b64cd42d58b3e6951a3da8" title=" " alt="" coords="229,31,399,57"/>
<area shape="rect" href="nvme_8h.html#ab5233c5c538a64df4e9b391949d334e3" title=" " alt="" coords="494,5,565,32"/>
<area shape="rect" href="femu_8c.html#a61b5f2e26fd1e0a3d04ce574e8ef9d68" title=" " alt="" coords="447,56,612,83"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_ac62fcc12cac3ca808b290e34dd507d66_icgraph.png" border="0" usemap="#femu_8c_ac62fcc12cac3ca808b290e34dd507d66_icgraph" alt=""/></div>
<map name="femu_8c_ac62fcc12cac3ca808b290e34dd507d66_icgraph" id="femu_8c_ac62fcc12cac3ca808b290e34dd507d66_icgraph">
<area shape="rect" title=" " alt="" coords="332,5,508,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="afdad4c815f4a43df7b71e178c19868f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdad4c815f4a43df7b71e178c19868f0">&#9670;&nbsp;</a></span>nvme_init_pci()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_init_pci </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    uint8_t *pci_conf = n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>.config;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    pci_conf[PCI_INTERRUPT_PIN] = 1;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">/* Coperd: QEMU-OCSSD(0x1d1d,0x1f1f), QEMU-NVMe(0x8086,0x5845) */</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    pci_config_set_prog_interface(pci_conf, 0x2);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    pci_config_set_vendor_id(pci_conf, n-&gt;<a class="code" href="structFemuCtrl.html#aaef4372b47aa52d5f1b56da9648c2af3">vid</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    pci_config_set_device_id(pci_conf, n-&gt;<a class="code" href="structFemuCtrl.html#a5a2d2916702c9376ea6f688c9cb812e5">did</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    pci_config_set_class(pci_conf, PCI_CLASS_STORAGE_EXPRESS);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    pcie_endpoint_cap_init(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>, 0x80);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    memory_region_init_io(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#ad84aa0e64f9fbe7fdac3eaaa26c077e3">iomem</a>, OBJECT(n), &amp;<a class="code" href="femu_8c.html#a74a800b10ed96ab720491ce2d9c3d9e1">nvme_mmio_ops</a>, n, <span class="stringliteral">&quot;nvme&quot;</span>,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                          n-&gt;<a class="code" href="structFemuCtrl.html#ab6a812bf164ed1eb955e470a1133abb8">reg_size</a>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    pci_register_bar(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>, 0, PCI_BASE_ADDRESS_SPACE_MEMORY |</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                     PCI_BASE_ADDRESS_MEM_TYPE_64, &amp;n-&gt;<a class="code" href="structFemuCtrl.html#ad84aa0e64f9fbe7fdac3eaaa26c077e3">iomem</a>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (msix_init_exclusive_bar(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>, n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> + 1, 4, NULL)) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    msi_init(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>, 0x50, 32, <span class="keyword">true</span>, <span class="keyword">false</span>, NULL);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#abfbbff9ca2a3d79e3a8a4c3bd4c892e3">cmbsz</a>) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="femu_8c.html#a85d4cc40606cf62f5edf085512acb599">nvme_init_cmb</a>(n);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_afdad4c815f4a43df7b71e178c19868f0_cgraph.png" border="0" usemap="#femu_8c_afdad4c815f4a43df7b71e178c19868f0_cgraph" alt=""/></div>
<map name="femu_8c_afdad4c815f4a43df7b71e178c19868f0_cgraph" id="femu_8c_afdad4c815f4a43df7b71e178c19868f0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,119,32"/>
<area shape="rect" href="femu_8c.html#a85d4cc40606cf62f5edf085512acb599" title=" " alt="" coords="167,5,289,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_afdad4c815f4a43df7b71e178c19868f0_icgraph.png" border="0" usemap="#femu_8c_afdad4c815f4a43df7b71e178c19868f0_icgraph" alt=""/></div>
<map name="femu_8c_afdad4c815f4a43df7b71e178c19868f0_icgraph" id="femu_8c_afdad4c815f4a43df7b71e178c19868f0_icgraph">
<area shape="rect" title=" " alt="" coords="332,5,445,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a863c74604ae2044f3df266c5d81c28e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a863c74604ae2044f3df266c5d81c28e4">&#9670;&nbsp;</a></span>nvme_mmio_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t nvme_mmio_read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hwaddr&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="structFemuCtrl.html">FemuCtrl</a> *n = (<a class="code" href="structFemuCtrl.html">FemuCtrl</a> *)opaque;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    uint8_t *ptr = (uint8_t *)&amp;n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    uint64_t val = 0;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    if (addr &lt; <span class="keyword">sizeof</span>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>)) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        memcpy(&amp;val, ptr + addr, size);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a78a5db5b8b1cead9d84276dfeeb4b066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a5db5b8b1cead9d84276dfeeb4b066">&#9670;&nbsp;</a></span>nvme_mmio_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_mmio_write </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hwaddr&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="structFemuCtrl.html">FemuCtrl</a> *n = (<a class="code" href="structFemuCtrl.html">FemuCtrl</a> *)opaque;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (addr &lt; <span class="keyword">sizeof</span>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>)) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15">nvme_write_bar</a>(n, addr, data, size);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (addr &gt;= 0x1000 &amp;&amp; addr &lt; 0x1008) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3">nvme_process_db_admin</a>(n, addr, data);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="femu_8c.html#a4067cc27c2856dec58abf30b2e3f121a">nvme_process_db_io</a>(n, addr, data);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a78a5db5b8b1cead9d84276dfeeb4b066_cgraph.png" border="0" usemap="#femu_8c_a78a5db5b8b1cead9d84276dfeeb4b066_cgraph" alt=""/></div>
<map name="femu_8c_a78a5db5b8b1cead9d84276dfeeb4b066_cgraph" id="femu_8c_a78a5db5b8b1cead9d84276dfeeb4b066_cgraph">
<area shape="rect" title=" " alt="" coords="5,463,149,490"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,514,384,540"/>
<area shape="rect" href="femu_8c.html#a4067cc27c2856dec58abf30b2e3f121a" title=" " alt="" coords="895,514,1054,540"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="691,108,817,135"/>
<area shape="rect" href="nvme-util_8c.html#a7c210df43397e8f04e184a472f8efe0e" title=" " alt="" coords="1135,362,1273,388"/>
<area shape="rect" href="nvme-util_8c.html#ab586dd53da50fb72e2a7359e5f5ce7b6" title=" " alt="" coords="1135,514,1273,540"/>
<area shape="rect" href="intr_8c.html#ab8fc684c66f6970e095cb683d02426d5" title=" " alt="" coords="667,818,841,844"/>
<area shape="rect" href="nvme-admin_8c.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,615,619,642"/>
<area shape="rect" href="intr_8c.html#a1bcc1a1b3495a3ea33365a4afaf44b0a" title=" " alt="" coords="1591,868,1767,895"/>
<area shape="rect" href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484" title=" " alt="" coords="1139,615,1269,642"/>
<area shape="rect" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8" title=" " alt="" coords="1611,210,1746,236"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="683,412,825,439"/>
<area shape="rect" href="nvme_8h.html#ab5c77706290dc892f52e14dfe39504b6" title=" " alt="" coords="1141,666,1267,692"/>
<area shape="rect" href="nvme-util_8c.html#a1983cbf62a2b154bc0c1e8f01f2bb1b6" title=" " alt="" coords="687,615,821,642"/>
<area shape="rect" href="nvme-util_8c.html#a0c728e2926a6efc38005202a2b224647" title=" " alt="" coords="681,666,827,692"/>
<area shape="rect" href="nvme-util_8c.html#a4fdc790b9e67ae29e3ef256182ed345b" title=" " alt="" coords="689,564,819,591"/>
<area shape="rect" href="nvme-admin_8c.html#abd65f91764a2624cdc4e608f3dc7932e" title=" " alt="" coords="911,615,1039,642"/>
<area shape="rect" href="nvme-admin_8c.html#af3ddf1e4e280aa3f367a5b2b44879b41" title=" " alt="" coords="910,159,1039,186"/>
<area shape="rect" href="nvme-admin_8c.html#a2c43f1bdb51a2e35c2ecdb9ed9db64ec" title=" " alt="" coords="910,362,1039,388"/>
<area shape="rect" href="nvme-admin_8c.html#ac1090eb738e0aa389ef5a647e647a09f" title=" " alt="" coords="921,210,1029,236"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="921,463,1029,490"/>
<area shape="rect" href="nvme-admin_8c.html#af11a6f9497c3496eb41dda00362bac96" title=" " alt="" coords="919,1147,1030,1174"/>
<area shape="rect" href="nvme-admin_8c.html#abf593ed87b332bec6cb6fca0e2bed1be" title=" " alt="" coords="904,1076,1045,1103"/>
<area shape="rect" href="nvme-admin_8c.html#ace67c34426486b78b1b20cba61ab28b8" title=" " alt="" coords="917,988,1032,1015"/>
<area shape="rect" href="nvme-admin_8c.html#ae23b14397c30828a57903ec27a4c150c" title=" " alt="" coords="917,818,1032,844"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="889,311,1060,338"/>
<area shape="rect" href="nvme-admin_8c.html#ad712f926297fd28d117c32d18e3566dc" title=" " alt="" coords="905,412,1045,439"/>
<area shape="rect" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93" title=" " alt="" coords="1147,210,1261,236"/>
<area shape="rect" href="nvme-util_8c.html#a6410408d19dd2986cba9a815d25871a8" title=" " alt="" coords="1149,108,1259,135"/>
<area shape="rect" href="intr_8c.html#aa6089f663c0aef824344bde303c46238" title=" " alt="" coords="1137,159,1271,186"/>
<area shape="rect" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da" title=" " alt="" coords="1361,210,1529,236"/>
<area shape="rect" href="nvme-util_8c.html#ac3b74834e78afe9ce3db5074e8398a0f" title=" " alt="" coords="1149,311,1259,338"/>
<area shape="rect" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e" title=" " alt="" coords="1147,260,1261,287"/>
<area shape="rect" href="nvme-io_8c.html#a03a3accd495e0b00d01b80e009af5c9f" title=" " alt="" coords="1129,412,1279,439"/>
<area shape="rect" href="intr_8c.html#ac07d39a331aa32f4da4f27f31f1abc1c" title=" " alt="" coords="1373,463,1518,490"/>
<area shape="rect" href="nvme-admin_8c.html#a1068e4177c9ff25ec1cc15b18d26356b" title=" " alt="" coords="1108,1223,1300,1250"/>
<area shape="rect" href="dma_8c.html#a83e01cb3ebf3721ca1fd024940ed6aa6" title=" " alt="" coords="1388,919,1503,946"/>
<area shape="rect" href="nvme_8h.html#ae412c484b40ac7903597a299757a7a83" title=" " alt="" coords="1132,1122,1276,1148"/>
<area shape="rect" href="nvme-admin_8c.html#aff81480a8e081d70ea6fc2b09a02af21" title=" " alt="" coords="1131,970,1277,996"/>
<area shape="rect" href="nvme-admin_8c.html#a4e3add88b587075ed1a120f75f73ea44" title=" " alt="" coords="1126,1020,1282,1047"/>
<area shape="rect" href="nvme-admin_8c.html#a295e47dd4c386bd7ad30d98ea4b45929" title=" " alt="" coords="1134,1071,1274,1098"/>
<area shape="rect" href="nvme-admin_8c.html#af7d9ef3eb88525869cf3506520028cf0" title=" " alt="" coords="1136,919,1272,946"/>
<area shape="rect" href="nvme-admin_8c.html#a834f603280a3a10a14da324da6bd9a62" title=" " alt="" coords="1115,868,1293,895"/>
<area shape="rect" href="nvme-admin_8c.html#a6a27adda12530ad69ecc17512ede9ddd" title=" " alt="" coords="1133,716,1275,743"/>
<area shape="rect" href="nvme-admin_8c.html#a7db584730c5821def2e8208f0aaf3f05" title=" " alt="" coords="1120,767,1288,794"/>
<area shape="rect" href="nvme-admin_8c.html#a9896b513919b735c2049dd8e59d588c0" title=" " alt="" coords="1135,818,1273,844"/>
<area shape="rect" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19" title=" " alt="" coords="911,58,1038,84"/>
<area shape="rect" href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987" title=" " alt="" coords="913,108,1037,135"/>
<area shape="rect" href="intr_8c.html#ad98adfb6254598edb5f608bbf2018c8c" title=" " alt="" coords="1139,58,1269,84"/>
<area shape="rect" href="intr_8c.html#a9e513f85a2a84b262bdcb918d1785fea" title=" " alt="" coords="1348,58,1543,84"/>
</map>
</div>

</div>
</div>
<a id="a61b5f2e26fd1e0a3d04ce574e8ef9d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b5f2e26fd1e0a3d04ce574e8ef9d68">&#9670;&nbsp;</a></span>nvme_ns_init_identify()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_ns_init_identify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structNvmeIdNs.html">NvmeIdNs</a> *&#160;</td>
          <td class="paramname"><em>id_ns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;{</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordtype">int</span> npdg;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">/* NSFEAT Bit 3: Support the Deallocated or Unwritten Logical Block error */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a37d82bc83c29f8eb8040f48a5262980c">nsfeat</a>        |= (0x4 | 0x10);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#aaa72a59d6652fb5fb0a2453d58fb9fa3">nlbaf</a>         = n-&gt;<a class="code" href="structFemuCtrl.html#a44e0e0b10fb25b302ecbe19b1e085940">nlbaf</a> - 1;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#ac2061ba91f1d2bf0282bfe22221f65a2">flbas</a>         = n-&gt;<a class="code" href="structFemuCtrl.html#a665e480db08bf31552661c521abdd768">lba_index</a> | (n-&gt;<a class="code" href="structFemuCtrl.html#afa7be59e4d6d616e3104152b78d41350">extended</a> &lt;&lt; 4);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#aaf996e4b4662143c7cb56cb8d42573e6">mc</a>            = n-&gt;<a class="code" href="structFemuCtrl.html#addaf0def5160d73cf6adc2e5afb40948">mc</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#ae17d963f2c76fadcb0f7962929e50345">dpc</a>           = n-&gt;<a class="code" href="structFemuCtrl.html#ad8874d5f34ad77b916883e54291465e4">dpc</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#acc6d0826dfaffd161fe99cf87b4872ce">dps</a>           = n-&gt;<a class="code" href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">dps</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#adaa4210801b64bb868cd33dff4f7853e">dlfeat</a>        = 0x9;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a751e3c19983752a5acb34244eba649e8">lbaf</a>[0].<a class="code" href="structNvmeLBAF.html#ac0a10526d855cab5ceed66963c0f5a44">lbads</a> = 9;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a751e3c19983752a5acb34244eba649e8">lbaf</a>[0].<a class="code" href="structNvmeLBAF.html#af9a6ca47dd0427de8ce39721e4b79464">ms</a>    = 0;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    npdg = 1;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    id_ns-&gt;<a class="code" href="structNvmeIdNs.html#ad259dc0e228606d6213450c9c146791a">npda</a> = id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a253f93bc4614efc3b4c21732ea40d36f">npdg</a> = npdg - 1;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n-&gt;<a class="code" href="structFemuCtrl.html#a44e0e0b10fb25b302ecbe19b1e085940">nlbaf</a>; i++) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a751e3c19983752a5acb34244eba649e8">lbaf</a>[i].<a class="code" href="structNvmeLBAF.html#ac0a10526d855cab5ceed66963c0f5a44">lbads</a> = BDRV_SECTOR_BITS + i;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        id_ns-&gt;<a class="code" href="structNvmeIdNs.html#a751e3c19983752a5acb34244eba649e8">lbaf</a>[i].<a class="code" href="structNvmeLBAF.html#af9a6ca47dd0427de8ce39721e4b79464">ms</a>    = cpu_to_le16(n-&gt;<a class="code" href="structFemuCtrl.html#ae1785a80724176a123fa5f8ba458e643">meta</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a61b5f2e26fd1e0a3d04ce574e8ef9d68_icgraph.png" border="0" usemap="#femu_8c_a61b5f2e26fd1e0a3d04ce574e8ef9d68_icgraph" alt=""/></div>
<map name="femu_8c_a61b5f2e26fd1e0a3d04ce574e8ef9d68_icgraph" id="femu_8c_a61b5f2e26fd1e0a3d04ce574e8ef9d68_icgraph">
<area shape="rect" title=" " alt="" coords="773,5,939,32"/>
<area shape="rect" href="femu_8c.html#ac38f13e024b64cd42d58b3e6951a3da8" title=" " alt="" coords="556,5,725,32"/>
<area shape="rect" href="femu_8c.html#ac62fcc12cac3ca808b290e34dd507d66" title=" " alt="" coords="332,5,508,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ac83bc83578ac4c5c414ec892ca2169e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83bc83578ac4c5c414ec892ca2169e3">&#9670;&nbsp;</a></span>nvme_process_db_admin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_process_db_admin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hwaddr&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    uint32_t qid;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    uint16_t new_val = val &amp; 0xffff;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="structNvmeSQueue.html">NvmeSQueue</a> *sq;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (((addr - 0x1000) &gt;&gt; (2 + n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>)) &amp; 1) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="structNvmeCQueue.html">NvmeCQueue</a> *cq;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        qid = ((addr - (0x1000 + (1 &lt;&lt; (2 + n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>)))) &gt;&gt; (3 +</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                                                 n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="nvme-util_8c.html#a7c210df43397e8f04e184a472f8efe0e">nvme_check_cqid</a>(n, qid)) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        cq = n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[qid];</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">if</span> (new_val &gt;= cq-&gt;size) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">head</a> = new_val;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span> (cq-&gt;tail != cq-&gt;head) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <a class="code" href="intr_8c.html#ab8fc684c66f6970e095cb683d02426d5">nvme_isr_notify_admin</a>(cq);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        qid = (addr - 0x1000) &gt;&gt; (3 + n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="nvme-util_8c.html#ab586dd53da50fb72e2a7359e5f5ce7b6">nvme_check_sqid</a>(n, qid)) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        sq = n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[qid];</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (new_val &gt;= sq-&gt;<a class="code" href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">size</a>) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">tail</a> = new_val;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="nvme-admin_8c.html#a7042f589909852500d6f26c36b78850b">nvme_process_sq_admin</a>(sq);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_cgraph.png" border="0" usemap="#femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_cgraph" alt=""/></div>
<map name="femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_cgraph" id="femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_cgraph">
<area shape="rect" title=" " alt="" coords="5,284,192,311"/>
<area shape="rect" href="nvme-util_8c.html#a7c210df43397e8f04e184a472f8efe0e" title=" " alt="" coords="955,183,1094,209"/>
<area shape="rect" href="nvme-util_8c.html#ab586dd53da50fb72e2a7359e5f5ce7b6" title=" " alt="" coords="955,284,1094,311"/>
<area shape="rect" href="intr_8c.html#ab8fc684c66f6970e095cb683d02426d5" title=" " alt="" coords="475,183,649,209"/>
<area shape="rect" href="nvme-admin_8c.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="240,588,427,615"/>
<area shape="rect" href="intr_8c.html#a1bcc1a1b3495a3ea33365a4afaf44b0a" title=" " alt="" coords="697,81,873,108"/>
<area shape="rect" href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484" title=" " alt="" coords="959,537,1090,564"/>
<area shape="rect" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8" title=" " alt="" coords="1413,487,1548,513"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="491,588,633,615"/>
<area shape="rect" href="nvme_8h.html#ab5c77706290dc892f52e14dfe39504b6" title=" " alt="" coords="962,436,1087,463"/>
<area shape="rect" href="nvme-util_8c.html#a1983cbf62a2b154bc0c1e8f01f2bb1b6" title=" " alt="" coords="495,1145,629,1172"/>
<area shape="rect" href="nvme-util_8c.html#a0c728e2926a6efc38005202a2b224647" title=" " alt="" coords="489,1196,635,1223"/>
<area shape="rect" href="nvme-util_8c.html#a4fdc790b9e67ae29e3ef256182ed345b" title=" " alt="" coords="497,1095,627,1121"/>
<area shape="rect" href="nvme-admin_8c.html#abd65f91764a2624cdc4e608f3dc7932e" title=" " alt="" coords="721,487,849,513"/>
<area shape="rect" href="nvme-admin_8c.html#af3ddf1e4e280aa3f367a5b2b44879b41" title=" " alt="" coords="721,132,850,159"/>
<area shape="rect" href="nvme-admin_8c.html#a2c43f1bdb51a2e35c2ecdb9ed9db64ec" title=" " alt="" coords="721,284,850,311"/>
<area shape="rect" href="nvme-admin_8c.html#ac1090eb738e0aa389ef5a647e647a09f" title=" " alt="" coords="731,183,839,209"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="731,385,839,412"/>
<area shape="rect" href="nvme-admin_8c.html#af11a6f9497c3496eb41dda00362bac96" title=" " alt="" coords="730,1247,841,1273"/>
<area shape="rect" href="nvme-admin_8c.html#abf593ed87b332bec6cb6fca0e2bed1be" title=" " alt="" coords="715,588,856,615"/>
<area shape="rect" href="nvme-admin_8c.html#ace67c34426486b78b1b20cba61ab28b8" title=" " alt="" coords="728,715,843,741"/>
<area shape="rect" href="nvme-admin_8c.html#ae23b14397c30828a57903ec27a4c150c" title=" " alt="" coords="728,1044,843,1071"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="700,1145,871,1172"/>
<area shape="rect" href="nvme-admin_8c.html#ad712f926297fd28d117c32d18e3566dc" title=" " alt="" coords="715,1399,855,1425"/>
<area shape="rect" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93" title=" " alt="" coords="967,132,1082,159"/>
<area shape="rect" href="nvme-util_8c.html#a6410408d19dd2986cba9a815d25871a8" title=" " alt="" coords="970,81,1079,108"/>
<area shape="rect" href="intr_8c.html#aa6089f663c0aef824344bde303c46238" title=" " alt="" coords="957,31,1092,57"/>
<area shape="rect" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da" title=" " alt="" coords="1187,233,1355,260"/>
<area shape="rect" href="intr_8c.html#a4546f8dc3153b6b272979b26d9ee3a5f" title=" " alt="" coords="1176,56,1365,83"/>
<area shape="rect" href="intr_8c.html#a404cdb00218c3c3b27c4048b43d7d8db" title=" " alt="" coords="1179,5,1362,32"/>
<area shape="rect" href="nvme-util_8c.html#ac3b74834e78afe9ce3db5074e8398a0f" title=" " alt="" coords="970,233,1079,260"/>
<area shape="rect" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e" title=" " alt="" coords="967,335,1082,361"/>
<area shape="rect" href="nvme-io_8c.html#a03a3accd495e0b00d01b80e009af5c9f" title=" " alt="" coords="949,385,1100,412"/>
<area shape="rect" href="nvme-admin_8c.html#a1068e4177c9ff25ec1cc15b18d26356b" title=" " alt="" coords="929,1348,1121,1375"/>
<area shape="rect" href="dma_8c.html#a83e01cb3ebf3721ca1fd024940ed6aa6" title=" " alt="" coords="1213,943,1328,969"/>
<area shape="rect" href="nvme_8h.html#ae412c484b40ac7903597a299757a7a83" title=" " alt="" coords="953,639,1097,665"/>
<area shape="rect" href="nvme-admin_8c.html#aff81480a8e081d70ea6fc2b09a02af21" title=" " alt="" coords="952,689,1097,716"/>
<area shape="rect" href="nvme-admin_8c.html#a4e3add88b587075ed1a120f75f73ea44" title=" " alt="" coords="947,740,1103,767"/>
<area shape="rect" href="nvme-admin_8c.html#a295e47dd4c386bd7ad30d98ea4b45929" title=" " alt="" coords="955,791,1095,817"/>
<area shape="rect" href="nvme-admin_8c.html#af7d9ef3eb88525869cf3506520028cf0" title=" " alt="" coords="957,841,1093,868"/>
<area shape="rect" href="nvme-admin_8c.html#a834f603280a3a10a14da324da6bd9a62" title=" " alt="" coords="936,1095,1113,1121"/>
<area shape="rect" href="nvme-admin_8c.html#a6a27adda12530ad69ecc17512ede9ddd" title=" " alt="" coords="953,1145,1096,1172"/>
<area shape="rect" href="nvme-admin_8c.html#a7db584730c5821def2e8208f0aaf3f05" title=" " alt="" coords="941,1196,1109,1223"/>
<area shape="rect" href="nvme-admin_8c.html#a9896b513919b735c2049dd8e59d588c0" title=" " alt="" coords="956,1247,1093,1273"/>
<area shape="rect" href="nvme-admin_8c.html#a50ae77ec77f7a89c1a067df80c5cd767" title=" " alt="" coords="943,892,1106,919"/>
<area shape="rect" href="nvme-admin_8c.html#aeb087910e36564f94d4dc54c6af7622c" title=" " alt="" coords="921,943,1128,969"/>
<area shape="rect" href="nvme-admin_8c.html#a9eeb98def2fad8039662200e9854b7e7" title=" " alt="" coords="946,993,1103,1020"/>
<area shape="rect" href="nvme-admin_8c.html#a1067c1ab64f621b7e8d68043437c04eb" title=" " alt="" coords="933,1044,1116,1071"/>
<area shape="rect" href="nvme-io_8c.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title=" " alt="" coords="949,1297,1100,1324"/>
<area shape="rect" href="dma_8c.html#adef0f21bc237d992b4ae8b29258645a8" title=" " alt="" coords="965,1399,1084,1425"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_icgraph.png" border="0" usemap="#femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_icgraph" alt=""/></div>
<map name="femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_icgraph" id="femu_8c_ac83bc83578ac4c5c414ec892ca2169e3_icgraph">
<area shape="rect" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="a4067cc27c2856dec58abf30b2e3f121a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4067cc27c2856dec58abf30b2e3f121a">&#9670;&nbsp;</a></span>nvme_process_db_io()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_process_db_io </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hwaddr&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    uint32_t qid;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    uint16_t new_val = val &amp; 0xffff;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="structNvmeSQueue.html">NvmeSQueue</a> *sq;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a6291ffd43b13aa9c7bc871a7e1bb4a11">dataplane_started</a>) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (addr &amp; ((1 &lt;&lt; (2 + n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>)) - 1)) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (((addr - 0x1000) &gt;&gt; (2 + n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>)) &amp; 1) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="structNvmeCQueue.html">NvmeCQueue</a> *cq;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        qid = ((addr - (0x1000 + (1 &lt;&lt; (2 + n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>)))) &gt;&gt; (3 +</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                                                 n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>));</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="nvme-util_8c.html#a7c210df43397e8f04e184a472f8efe0e">nvme_check_cqid</a>(n, qid)) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        cq = n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[qid];</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span> (new_val &gt;= cq-&gt;size) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">if</span> (!cq-&gt;db_addr) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            cq-&gt;<a class="code" href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">head</a> = new_val;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (cq-&gt;tail != cq-&gt;head) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <a class="code" href="intr_8c.html#ac07d39a331aa32f4da4f27f31f1abc1c">nvme_isr_notify_io</a>(cq);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        qid = (addr - 0x1000) &gt;&gt; (3 + n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="nvme-util_8c.html#ab586dd53da50fb72e2a7359e5f5ce7b6">nvme_check_sqid</a>(n, qid)) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        sq = n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[qid];</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> (new_val &gt;= sq-&gt;<a class="code" href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">size</a>) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">if</span> (!sq-&gt;<a class="code" href="structNvmeSQueue.html#a6c854ba52b14d2f7bbc195451d41dc6d">db_addr</a>) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            sq-&gt;<a class="code" href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">tail</a> = new_val;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a4067cc27c2856dec58abf30b2e3f121a_cgraph.png" border="0" usemap="#femu_8c_a4067cc27c2856dec58abf30b2e3f121a_cgraph" alt=""/></div>
<map name="femu_8c_a4067cc27c2856dec58abf30b2e3f121a_cgraph" id="femu_8c_a4067cc27c2856dec58abf30b2e3f121a_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,164,83"/>
<area shape="rect" href="nvme-util_8c.html#a7c210df43397e8f04e184a472f8efe0e" title=" " alt="" coords="215,5,354,32"/>
<area shape="rect" href="nvme-util_8c.html#ab586dd53da50fb72e2a7359e5f5ce7b6" title=" " alt="" coords="215,56,354,83"/>
<area shape="rect" href="intr_8c.html#ac07d39a331aa32f4da4f27f31f1abc1c" title=" " alt="" coords="212,107,357,133"/>
<area shape="rect" href="intr_8c.html#a1bcc1a1b3495a3ea33365a4afaf44b0a" title=" " alt="" coords="405,107,581,133"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a4067cc27c2856dec58abf30b2e3f121a_icgraph.png" border="0" usemap="#femu_8c_a4067cc27c2856dec58abf30b2e3f121a_icgraph" alt=""/></div>
<map name="femu_8c_a4067cc27c2856dec58abf30b2e3f121a_icgraph" id="femu_8c_a4067cc27c2856dec58abf30b2e3f121a_icgraph">
<area shape="rect" title=" " alt="" coords="197,5,356,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="a76a47b73caa1fa75fb706e3ed8f16a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a47b73caa1fa75fb706e3ed8f16a73">&#9670;&nbsp;</a></span>nvme_register_extensions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nvme_register_extensions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6">OCSSD</a>(n)) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">switch</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a9adc8aaa77ccdd696a9e230e5d05311d">lver</a>) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="nvme_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ab9e570d6692e7572ba67dc461b304eab">OCSSD12</a>:</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="nvme_8h.html#a623f6939cbe95d9de1eab8847f6ddba0">nvme_register_ocssd12</a>(n);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="nvme_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6b9670dad69f39036db2fcfe5ede7996">OCSSD20</a>:</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <a class="code" href="nvme_8h.html#afbce5130c2fccec6d897d6efc144a7d8">nvme_register_ocssd20</a>(n);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="nvme_8h.html#a91fafe4960342e59b47d66f807966b2e">NOSSD</a>(n)) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <a class="code" href="nop_8c.html#ad4130ad93f90bb1d6ba3bfd595214751">nvme_register_nossd</a>(n);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="nvme_8h.html#acd64982aef4cb1864b53952a92068c27">BBSSD</a>(n)) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="bb_8c.html#a5b8b300920ee99be86c5e3e80a6f7949">nvme_register_bbssd</a>(n);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="nvme_8h.html#a5e3ee6be1fc2a840978ffa649cf6339d">ZNSSD</a>(n)) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <a class="code" href="nvme_8h.html#a08aeb05994f79207836886d8a1475372">nvme_register_znssd</a>(n);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_cgraph.png" border="0" usemap="#femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_cgraph" alt=""/></div>
<map name="femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_cgraph" id="femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_cgraph">
<area shape="rect" title=" " alt="" coords="5,537,200,564"/>
<area shape="rect" href="nvme_8h.html#acd64982aef4cb1864b53952a92068c27" title=" " alt="" coords="303,81,369,108"/>
<area shape="rect" href="nvme_8h.html#a91fafe4960342e59b47d66f807966b2e" title=" " alt="" coords="302,132,370,159"/>
<area shape="rect" href="bb_8c.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="255,183,417,209"/>
<area shape="rect" href="nop_8c.html#ad4130ad93f90bb1d6ba3bfd595214751" title=" " alt="" coords="255,259,417,285"/>
<area shape="rect" href="nvme_8h.html#a623f6939cbe95d9de1eab8847f6ddba0" title=" " alt="" coords="248,537,424,564"/>
<area shape="rect" href="nvme_8h.html#afbce5130c2fccec6d897d6efc144a7d8" title=" " alt="" coords="248,841,424,868"/>
<area shape="rect" href="nvme_8h.html#a08aeb05994f79207836886d8a1475372" title=" " alt="" coords="256,1069,416,1096"/>
<area shape="rect" href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6" title=" " alt="" coords="303,1120,369,1147"/>
<area shape="rect" href="nvme_8h.html#a5e3ee6be1fc2a840978ffa649cf6339d" title=" " alt="" coords="303,1171,369,1197"/>
<area shape="rect" href="bb_8c.html#afd2d6d40a801b554569b5c4c364f8df6" title=" " alt="" coords="486,31,607,57"/>
<area shape="rect" href="bb_8c.html#a3fc7384f815cca2f52003206b20324df" title=" " alt="" coords="513,107,580,133"/>
<area shape="rect" href="bb_8c.html#a86a2ad222c79ea1e3eb798c53f472908" title=" " alt="" coords="501,157,593,184"/>
<area shape="rect" href="bb_8c.html#a5d1e86a5f61a1db5c15dae757b35a5c3" title=" " alt="" coords="721,5,786,32"/>
<area shape="rect" href="bb_8c.html#aeaee718de94247f9ea5dc15b03680329" title=" " alt="" coords="694,56,813,83"/>
<area shape="rect" href="ftl_8c.html#af3f6de830b620d1f3060c7de8c8ddec0" title=" " alt="" coords="717,107,789,133"/>
<area shape="rect" href="bb_8c.html#a3b0eb3030af1311ad77c85da413a32d8" title=" " alt="" coords="701,157,806,184"/>
<area shape="rect" href="nvme-io_8c.html#a57765d5f7b83e5c6af69f1f5c501beb7" title=" " alt="" coords="885,208,968,235"/>
<area shape="rect" href="nop_8c.html#ab64cc71dd3eaeabb313d30fb4bd39535" title=" " alt="" coords="509,208,584,235"/>
<area shape="rect" href="nop_8c.html#a56ad5bb3626f3d51b93f720d91e65e69" title=" " alt="" coords="703,259,803,285"/>
<area shape="rect" href="nop_8c.html#aeaee718de94247f9ea5dc15b03680329" title=" " alt="" coords="694,208,813,235"/>
<area shape="rect" href="oc12_8c.html#a68620169de187b09e15ef18b52eb72c6" title=" " alt="" coords="479,411,615,437"/>
<area shape="rect" href="oc12_8c.html#adb2f63023ff079bd918f3e0a2fc99c0a" title=" " alt="" coords="504,512,589,539"/>
<area shape="rect" href="oc12_8c.html#a0caef7cdff7d502bdf678c7e8c57e35e" title=" " alt="" coords="506,563,587,589"/>
<area shape="rect" href="oc12_8c.html#a3c41a58559ee2c92463ac4f25dab0a08" title=" " alt="" coords="493,689,600,716"/>
<area shape="rect" href="oc12_8c.html#a9ad0ccde984b0ad5434da3622acc0389" title=" " alt="" coords="699,309,808,336"/>
<area shape="rect" href="oc12_8c.html#aada1f75e02b085c6a43438e5ab1c81e0" title=" " alt="" coords="699,360,807,387"/>
<area shape="rect" href="oc12_8c.html#a6edf286a27463261b9a975ee1eeefcc8" title=" " alt="" coords="687,411,819,437"/>
<area shape="rect" href="oc12_8c.html#a126a85634fc530e22284c185df8f5f81" title=" " alt="" coords="698,461,809,488"/>
<area shape="rect" href="oc12_8c.html#a42a412e9ba005df6611a73cfbb61ed85" title=" " alt="" coords="679,512,828,539"/>
<area shape="rect" href="oc12_8c.html#a08d50fc7f025a0a40c4a68a76fd5a088" title=" " alt="" coords="692,563,815,589"/>
<area shape="rect" href="oc12_8c.html#aef55b0e79dd4659d66fc1d7d83b3a88a" title=" " alt="" coords="687,613,819,640"/>
<area shape="rect" href="oc12_8c.html#aab1abde67fc0b44326b1772846549abf" title=" " alt="" coords="683,664,824,691"/>
<area shape="rect" href="oc12_8c.html#a62b547738c301cdf347f2ce68659c93d" title=" " alt="" coords="693,715,813,741"/>
<area shape="rect" href="oc12_8c.html#a7e3ff8c5923a54ae4b9167627877b7ba" title=" " alt="" coords="709,765,798,792"/>
<area shape="rect" href="oc12_8c.html#af8b73b03b7edcdc1740a24b053ce72a5" title=" " alt="" coords="707,816,800,843"/>
<area shape="rect" href="oc20_8c.html#a067e9b542ca7593640f20257d6f9c137" title=" " alt="" coords="479,740,615,767"/>
<area shape="rect" href="oc20_8c.html#a0d7f8f90592d8683dd918093e3d4a910" title=" " alt="" coords="504,791,589,817"/>
<area shape="rect" href="oc20_8c.html#a25e01fd61efab89abcea94af95d9c3d5" title=" " alt="" coords="493,841,601,868"/>
<area shape="rect" href="oc20_8c.html#ab8b64d072bf22bd8976f359cf512d456" title=" " alt="" coords="506,892,587,919"/>
<area shape="rect" href="oc20_8c.html#a2b271895f51ed6a3e57db3cf0a7f9f94" title=" " alt="" coords="493,943,600,969"/>
<area shape="rect" href="oc20_8c.html#a59be92e5cac7979f5bba9f2bf96bf9d3" title=" " alt="" coords="472,993,621,1020"/>
<area shape="rect" href="oc20_8c.html#a3c1738dbe25b76260ddc2461c2da77c3" title=" " alt="" coords="699,867,808,893"/>
<area shape="rect" href="oc20_8c.html#aa67a8ddafb3c80d6e0ab95a9868a594c" title=" " alt="" coords="700,917,807,944"/>
<area shape="rect" href="oc20_8c.html#a8be26a9c7b84ac8d851148e656771ff3" title=" " alt="" coords="669,968,837,995"/>
<area shape="rect" href="zns_8c.html#a88a38b39db2e6829a576bebd97ece799" title=" " alt="" coords="483,1044,610,1071"/>
<area shape="rect" href="zns_8c.html#a8910113c66e3bce77dbbdbb560d9aefd" title=" " alt="" coords="509,1095,585,1121"/>
<area shape="rect" href="zns_8c.html#aa65a4a4ae802bdd6f8cc362247c6325b" title=" " alt="" coords="511,1145,583,1172"/>
<area shape="rect" href="zns_8c.html#ab23b42610e0276e68ccaac4d13e18bfa" title=" " alt="" coords="497,1196,596,1223"/>
<area shape="rect" href="zns_8c.html#a4c27f4956bf97dcabba73019e80b191a" title=" " alt="" coords="492,1247,601,1273"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_icgraph.png" border="0" usemap="#femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_icgraph" alt=""/></div>
<map name="femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_icgraph" id="femu_8c_a76a47b73caa1fa75fb706e3ed8f16a73_icgraph">
<area shape="rect" title=" " alt="" coords="332,5,527,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,5,284,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a31d7536be0fd698bd44a2ce15ce54987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31d7536be0fd698bd44a2ce15ce54987">&#9670;&nbsp;</a></span>nvme_start_ctrl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nvme_start_ctrl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    uint32_t page_bits = <a class="code" href="nvme_8h.html#a86a363198b7e3bc64f884486fbdeb54e">NVME_CC_MPS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>) + 12;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    uint32_t page_size = 1 &lt;&lt; page_bits;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[0] || n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[0] || !n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad9c59a25a4e498d4e4e900ffb3a88510">asq</a> || !n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a170fe347757e94199156109b2b18ecb3">acq</a> ||</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad9c59a25a4e498d4e4e900ffb3a88510">asq</a> &amp; (page_size - 1) || n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a170fe347757e94199156109b2b18ecb3">acq</a> &amp; (page_size - 1) ||</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="nvme_8h.html#a86a363198b7e3bc64f884486fbdeb54e">NVME_CC_MPS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>) &lt; <a class="code" href="nvme_8h.html#a734c36442c9ecbd6dd5c01cc9c3bd19d">NVME_CAP_MPSMIN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>) ||</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="nvme_8h.html#a86a363198b7e3bc64f884486fbdeb54e">NVME_CC_MPS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>) &gt; <a class="code" href="nvme_8h.html#a34bdca89b7571f765e4ff765b87f04da">NVME_CAP_MPSMAX</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">cap</a>) ||</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <a class="code" href="nvme_8h.html#a586a685e8170c1bff4967278814abf28">NVME_CC_IOCQES</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>) &lt; <a class="code" href="nvme_8h.html#ac66de43e848ed6c3bf3c13aee9d9adc0">NVME_CTRL_CQES_MIN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>.<a class="code" href="structNvmeIdCtrl.html#a12fd9605e757c7cd2661cf65286c7643">cqes</a>) ||</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="nvme_8h.html#a586a685e8170c1bff4967278814abf28">NVME_CC_IOCQES</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>) &gt; <a class="code" href="nvme_8h.html#ad36e96c860b2f3c47151a0c73fbb8095">NVME_CTRL_CQES_MAX</a>(n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>.<a class="code" href="structNvmeIdCtrl.html#a12fd9605e757c7cd2661cf65286c7643">cqes</a>) ||</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="nvme_8h.html#a82d8c50b518a59a20ab2ce44e8fbb649">NVME_CC_IOSQES</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>) &lt; <a class="code" href="nvme_8h.html#a42429fbfebab5b37b5d98eb165c56cec">NVME_CTRL_SQES_MIN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>.<a class="code" href="structNvmeIdCtrl.html#a4d5b2ac38d5efd309393898a831db589">sqes</a>) ||</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="nvme_8h.html#a82d8c50b518a59a20ab2ce44e8fbb649">NVME_CC_IOSQES</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>) &gt; <a class="code" href="nvme_8h.html#aa0da8a8759cd4aaa954ce25be3fedd75">NVME_CTRL_SQES_MAX</a>(n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>.<a class="code" href="structNvmeIdCtrl.html#a4d5b2ac38d5efd309393898a831db589">sqes</a>) ||</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        !<a class="code" href="nvme_8h.html#a5b29ebc822a49d8187a8c0e2a09da6db">NVME_AQA_ASQS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">aqa</a>) || <a class="code" href="nvme_8h.html#a5b29ebc822a49d8187a8c0e2a09da6db">NVME_AQA_ASQS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">aqa</a>) &gt; 4095 ||</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        !<a class="code" href="nvme_8h.html#a0191da122469b61090591fbe5f8fcd89">NVME_AQA_ACQS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">aqa</a>) || <a class="code" href="nvme_8h.html#a0191da122469b61090591fbe5f8fcd89">NVME_AQA_ACQS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">aqa</a>) &gt; 4095) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#afd9011b5ddb7b9f315e109cf606b9370">page_bits</a> = page_bits;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">page_size</a> = 1 &lt;&lt; n-&gt;<a class="code" href="structFemuCtrl.html#afd9011b5ddb7b9f315e109cf606b9370">page_bits</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a362b7dc11bd4e51d46a93c43b2f011df">max_prp_ents</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">page_size</a> / <span class="keyword">sizeof</span>(uint64_t);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#ac4f8d305f94dfd341fe6e7f39c06c47c">cqe_size</a> = 1 &lt;&lt; <a class="code" href="nvme_8h.html#a586a685e8170c1bff4967278814abf28">NVME_CC_IOCQES</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a3cbec385b70e8c6a03b463e00ac08d92">sqe_size</a> = 1 &lt;&lt; <a class="code" href="nvme_8h.html#a82d8c50b518a59a20ab2ce44e8fbb649">NVME_CC_IOSQES</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="nvme-util_8c.html#a6410408d19dd2986cba9a815d25871a8">nvme_init_cq</a>(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a4b7690748b8cf7f87af867703f1dd025">admin_cq</a>, n, n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a170fe347757e94199156109b2b18ecb3">acq</a>, 0, 0, <a class="code" href="nvme_8h.html#a0191da122469b61090591fbe5f8fcd89">NVME_AQA_ACQS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">aqa</a>) +</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                 1, 1, 1);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="nvme-util_8c.html#ac3b74834e78afe9ce3db5074e8398a0f">nvme_init_sq</a>(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a586d06b8f4ebd787d1874a8e2e08536c">admin_sq</a>, n, n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad9c59a25a4e498d4e4e900ffb3a88510">asq</a>, 0, 0, <a class="code" href="nvme_8h.html#a5b29ebc822a49d8187a8c0e2a09da6db">NVME_AQA_ASQS</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">aqa</a>) +</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                 1, <a class="code" href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971ac6aa7c4a8d807a2454ef40d6e77a4f10">NVME_Q_PRIO_HIGH</a>, 1);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">/* Currently only used by FEMU ZNS extension */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#a2b07accc41de60cd0c6de43adde355ad">ext_ops</a>.<a class="code" href="structFemuExtCtrlOps.html#ac413e402a862c54d63ad71202218b3ec">start_ctrl</a>) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#a2b07accc41de60cd0c6de43adde355ad">ext_ops</a>.<a class="code" href="structFemuExtCtrlOps.html#ac413e402a862c54d63ad71202218b3ec">start_ctrl</a>(n);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a31d7536be0fd698bd44a2ce15ce54987_cgraph.png" border="0" usemap="#femu_8c_a31d7536be0fd698bd44a2ce15ce54987_cgraph" alt=""/></div>
<map name="femu_8c_a31d7536be0fd698bd44a2ce15ce54987_cgraph" id="femu_8c_a31d7536be0fd698bd44a2ce15ce54987_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,129,57"/>
<area shape="rect" href="nvme-util_8c.html#a6410408d19dd2986cba9a815d25871a8" title=" " alt="" coords="177,5,287,32"/>
<area shape="rect" href="nvme-util_8c.html#ac3b74834e78afe9ce3db5074e8398a0f" title=" " alt="" coords="177,56,287,83"/>
<area shape="rect" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da" title=" " alt="" coords="335,31,503,57"/>
<area shape="rect" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8" title=" " alt="" coords="551,31,685,57"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_a31d7536be0fd698bd44a2ce15ce54987_icgraph.png" border="0" usemap="#femu_8c_a31d7536be0fd698bd44a2ce15ce54987_icgraph" alt=""/></div>
<map name="femu_8c_a31d7536be0fd698bd44a2ce15ce54987_icgraph" id="femu_8c_a31d7536be0fd698bd44a2ce15ce54987_icgraph">
<area shape="rect" title=" " alt="" coords="372,5,496,32"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="197,5,324,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="aa5b4cf8d2b42e9d54982bcd45bd43d15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5b4cf8d2b42e9d54982bcd45bd43d15">&#9670;&nbsp;</a></span>nvme_write_bar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nvme_write_bar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hwaddr&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">switch</span> (offset) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">case</span> 0xc:</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a6388aeea1a613c4341fe8a6c4d6cafb6">intms</a> |= data &amp; 0xffffffff;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a685531f770430492ba7ac28d3eb869c7">intmc</a> = n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a6388aeea1a613c4341fe8a6c4d6cafb6">intms</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">case</span> 0x10:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a6388aeea1a613c4341fe8a6c4d6cafb6">intms</a> &amp;= ~(data &amp; 0xffffffff);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a685531f770430492ba7ac28d3eb869c7">intmc</a> = n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a6388aeea1a613c4341fe8a6c4d6cafb6">intms</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">case</span> 0x14:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="nvme_8h.html#a7e51f3d6fd2c420bd306a1ef4f8776bd">NVME_CC_EN</a>(data) &amp;&amp; !<a class="code" href="nvme_8h.html#a7e51f3d6fd2c420bd306a1ef4f8776bd">NVME_CC_EN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>)) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a> = data;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987">nvme_start_ctrl</a>(n)) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ab91f0c44c7c71d988334b0fb8af64c18">csts</a> = <a class="code" href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a5580979dcb13f537eeb9fcc837b082ff">NVME_CSTS_FAILED</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ab91f0c44c7c71d988334b0fb8af64c18">csts</a> = <a class="code" href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a1c3265611429720e7eacd82fb5727b5d">NVME_CSTS_READY</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="nvme_8h.html#a7e51f3d6fd2c420bd306a1ef4f8776bd">NVME_CC_EN</a>(data) &amp;&amp; <a class="code" href="nvme_8h.html#a7e51f3d6fd2c420bd306a1ef4f8776bd">NVME_CC_EN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>)) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <a class="code" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19">nvme_clear_ctrl</a>(n, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ab91f0c44c7c71d988334b0fb8af64c18">csts</a> &amp;= ~<a class="code" href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a1c3265611429720e7eacd82fb5727b5d">NVME_CSTS_READY</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="nvme_8h.html#ada404e80675e34a0a6c922252b59a2a4">NVME_CC_SHN</a>(data) &amp;&amp; !(<a class="code" href="nvme_8h.html#ada404e80675e34a0a6c922252b59a2a4">NVME_CC_SHN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>))) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <a class="code" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19">nvme_clear_ctrl</a>(n, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a> = data;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ab91f0c44c7c71d988334b0fb8af64c18">csts</a> |= <a class="code" href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a2953e4fbc13802a060c0453f9e35a713">NVME_CSTS_SHST_COMPLETE</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="nvme_8h.html#ada404e80675e34a0a6c922252b59a2a4">NVME_CC_SHN</a>(data) &amp;&amp; <a class="code" href="nvme_8h.html#ada404e80675e34a0a6c922252b59a2a4">NVME_CC_SHN</a>(n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a>)) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ab91f0c44c7c71d988334b0fb8af64c18">csts</a> &amp;= ~<a class="code" href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a2953e4fbc13802a060c0453f9e35a713">NVME_CSTS_SHST_COMPLETE</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">cc</a> = data;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">case</span> 0x24:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">aqa</a> = data &amp; 0xffffffff;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">case</span> 0x28:</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad9c59a25a4e498d4e4e900ffb3a88510">asq</a> = data;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">case</span> 0x2c:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#ad9c59a25a4e498d4e4e900ffb3a88510">asq</a> |= data &lt;&lt; 32;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">case</span> 0x30:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a170fe347757e94199156109b2b18ecb3">acq</a> = data;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">case</span> 0x34:</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        n-&gt;<a class="code" href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">bar</a>.<a class="code" href="structNvmeBar.html#a170fe347757e94199156109b2b18ecb3">acq</a> |= data &lt;&lt; 32;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_cgraph.png" border="0" usemap="#femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_cgraph" alt=""/></div>
<map name="femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_cgraph" id="femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,132,159"/>
<area shape="rect" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19" title=" " alt="" coords="180,81,307,108"/>
<area shape="rect" href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987" title=" " alt="" coords="181,157,305,184"/>
<area shape="rect" href="intr_8c.html#ad98adfb6254598edb5f608bbf2018c8c" title=" " alt="" coords="355,5,485,32"/>
<area shape="rect" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93" title=" " alt="" coords="363,56,477,83"/>
<area shape="rect" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e" title=" " alt="" coords="363,107,477,133"/>
<area shape="rect" href="intr_8c.html#a9e513f85a2a84b262bdcb918d1785fea" title=" " alt="" coords="533,5,728,32"/>
<area shape="rect" href="intr_8c.html#a1a56c08c52edde31f9e476178fb352a1" title=" " alt="" coords="776,5,991,32"/>
<area shape="rect" href="nvme-util_8c.html#a6410408d19dd2986cba9a815d25871a8" title=" " alt="" coords="365,157,475,184"/>
<area shape="rect" href="nvme-util_8c.html#ac3b74834e78afe9ce3db5074e8398a0f" title=" " alt="" coords="365,208,475,235"/>
<area shape="rect" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da" title=" " alt="" coords="547,183,715,209"/>
<area shape="rect" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8" title=" " alt="" coords="816,183,951,209"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_icgraph.png" border="0" usemap="#femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_icgraph" alt=""/></div>
<map name="femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_icgraph" id="femu_8c_aa5b4cf8d2b42e9d54982bcd45bd43d15_icgraph">
<area shape="rect" title=" " alt="" coords="197,5,324,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">变量说明</h2>
<a id="ab0047681e4f6d44aaca85d64f5a5dbac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0047681e4f6d44aaca85d64f5a5dbac">&#9670;&nbsp;</a></span>femu_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const TypeInfo femu_info</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>初始值:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .name          = <span class="stringliteral">&quot;femu&quot;</span>,</div>
<div class="line">    .parent        = TYPE_PCI_DEVICE,</div>
<div class="line">    .instance_size = <span class="keyword">sizeof</span>(<a class="code" href="nvme_8h.html#a244bfc22a89680cfb2924aa52c61f942">FemuCtrl</a>),</div>
<div class="line">    .class_init    = <a class="code" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3">femu_class_init</a>,</div>
<div class="line">    .interfaces = (InterfaceInfo[]) {</div>
<div class="line">        { INTERFACE_PCIE_DEVICE },</div>
<div class="line">        { }</div>
<div class="line">    },</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a386fa8e3bbdfe152b4768a83c22415b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386fa8e3bbdfe152b4768a83c22415b5">&#9670;&nbsp;</a></span>femu_props</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Property femu_props[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ee4d7c6797cc51dbd46104153e0e352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee4d7c6797cc51dbd46104153e0e352">&#9670;&nbsp;</a></span>femu_vmstate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const VMStateDescription femu_vmstate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>初始值:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .name = <span class="stringliteral">&quot;femu&quot;</span>,</div>
<div class="line">    .unmigratable = 1,</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a04c9e2f4a6e9acb3f0f23331f8e1cf09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04c9e2f4a6e9acb3f0f23331f8e1cf09">&#9670;&nbsp;</a></span>nvme_cmb_ops</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const MemoryRegionOps nvme_cmb_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>初始值:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .read = <a class="code" href="femu_8c.html#a19c88acc017844e5a46446e274947053">nvme_cmb_read</a>,</div>
<div class="line">    .write = <a class="code" href="femu_8c.html#a04df02f4267b9ff3d1dc8cee3fab6581">nvme_cmb_write</a>,</div>
<div class="line">    .endianness = DEVICE_LITTLE_ENDIAN,</div>
<div class="line">    .impl = {</div>
<div class="line">        .min_access_size = 2,</div>
<div class="line">        .max_access_size = 8,</div>
<div class="line">    },</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a74a800b10ed96ab720491ce2d9c3d9e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a800b10ed96ab720491ce2d9c3d9e1">&#9670;&nbsp;</a></span>nvme_mmio_ops</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const MemoryRegionOps nvme_mmio_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>初始值:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .read = <a class="code" href="femu_8c.html#a863c74604ae2044f3df266c5d81c28e4">nvme_mmio_read</a>,</div>
<div class="line">    .write = <a class="code" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066">nvme_mmio_write</a>,</div>
<div class="line">    .endianness = DEVICE_LITTLE_ENDIAN,</div>
<div class="line">    .impl = {</div>
<div class="line">        .min_access_size = 2,</div>
<div class="line">        .max_access_size = 8,</div>
<div class="line">    },</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astructNvmeCQueue_html"><div class="ttname"><a href="structNvmeCQueue.html">NvmeCQueue</a></div><div class="ttdef"><b>Definition:</b> nvme.h:1028</div></div>
<div class="ttc" id="anvme_8h_html_a3c67084a1720ad470489be5edb36ae5c"><div class="ttname"><a href="nvme_8h.html#a3c67084a1720ad470489be5edb36ae5c">NVME_CMBLOC_BIR</a></div><div class="ttdeci">#define NVME_CMBLOC_BIR(cmbloc)</div><div class="ttdef"><b>Definition:</b> nvme.h:213</div></div>
<div class="ttc" id="aintr_8c_html_ac07d39a331aa32f4da4f27f31f1abc1c"><div class="ttname"><a href="intr_8c.html#ac07d39a331aa32f4da4f27f31f1abc1c">nvme_isr_notify_io</a></div><div class="ttdeci">void nvme_isr_notify_io(void *opaque)</div><div class="ttdef"><b>Definition:</b> intr.c:178</div></div>
<div class="ttc" id="astructNvmeIdNs_html_ad67c077eb81ad2014ec2d9217c2c537d"><div class="ttname"><a href="structNvmeIdNs.html#ad67c077eb81ad2014ec2d9217c2c537d">NvmeIdNs::nuse</a></div><div class="ttdeci">uint64_t nuse</div><div class="ttdef"><b>Definition:</b> nvme.h:860</div></div>
<div class="ttc" id="astructFemuCtrl_html_a599d81ece0c6074fae8893b34a929109"><div class="ttname"><a href="structFemuCtrl.html#a599d81ece0c6074fae8893b34a929109">FemuCtrl::cmbloc</a></div><div class="ttdeci">uint32_t cmbloc</div><div class="ttdef"><b>Definition:</b> nvme.h:1255</div></div>
<div class="ttc" id="astructNvmeNamespace_html_aded48306fad86bd7ca9160443a24604d"><div class="ttname"><a href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">NvmeNamespace::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> nvme.h:1065</div></div>
<div class="ttc" id="astructFemuCtrl_html_aac04c0f3706032920e00d55fbe18fbfe"><div class="ttname"><a href="structFemuCtrl.html#aac04c0f3706032920e00d55fbe18fbfe">FemuCtrl::mpsmax</a></div><div class="ttdeci">uint8_t mpsmax</div><div class="ttdef"><b>Definition:</b> nvme.h:1241</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_a12fd9605e757c7cd2661cf65286c7643"><div class="ttname"><a href="structNvmeIdCtrl.html#a12fd9605e757c7cd2661cf65286c7643">NvmeIdCtrl::cqes</a></div><div class="ttdeci">uint8_t cqes</div><div class="ttdef"><b>Definition:</b> nvme.h:732</div></div>
<div class="ttc" id="astructFemuCtrl_html_a31fb867a33c2ccad78e9c82456391e89"><div class="ttname"><a href="structFemuCtrl.html#a31fb867a33c2ccad78e9c82456391e89">FemuCtrl::elpe</a></div><div class="ttdeci">uint8_t elpe</div><div class="ttdef"><b>Definition:</b> nvme.h:1225</div></div>
<div class="ttc" id="afemu_8c_html_a25b1d92e20b65b39e29a38cb02ddcc19"><div class="ttname"><a href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19">nvme_clear_ctrl</a></div><div class="ttdeci">static void nvme_clear_ctrl(FemuCtrl *n, bool shutdown)</div><div class="ttdef"><b>Definition:</b> femu.c:8</div></div>
<div class="ttc" id="astructFemuCtrl_html"><div class="ttname"><a href="structFemuCtrl.html">FemuCtrl</a></div><div class="ttdef"><b>Definition:</b> nvme.h:1170</div></div>
<div class="ttc" id="astructNvmeIdNs_html_ad259dc0e228606d6213450c9c146791a"><div class="ttname"><a href="structNvmeIdNs.html#ad259dc0e228606d6213450c9c146791a">NvmeIdNs::npda</a></div><div class="ttdeci">uint16_t npda</div><div class="ttdef"><b>Definition:</b> nvme.h:882</div></div>
<div class="ttc" id="astructFemuCtrl_html_abfbbff9ca2a3d79e3a8a4c3bd4c892e3"><div class="ttname"><a href="structFemuCtrl.html#abfbbff9ca2a3d79e3a8a4c3bd4c892e3">FemuCtrl::cmbsz</a></div><div class="ttdeci">uint32_t cmbsz</div><div class="ttdef"><b>Definition:</b> nvme.h:1254</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9f37c1e2d56205e4c7d0015aa9af44e2"><div class="ttname"><a href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">FemuCtrl::sq</a></div><div class="ttdeci">NvmeSQueue ** sq</div><div class="ttdef"><b>Definition:</b> nvme.h:1266</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a6c854ba52b14d2f7bbc195451d41dc6d"><div class="ttname"><a href="structNvmeSQueue.html#a6c854ba52b14d2f7bbc195451d41dc6d">NvmeSQueue::db_addr</a></div><div class="ttdeci">uint64_t db_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1021</div></div>
<div class="ttc" id="astructFemuCtrl_html_a2b07accc41de60cd0c6de43adde355ad"><div class="ttname"><a href="structFemuCtrl.html#a2b07accc41de60cd0c6de43adde355ad">FemuCtrl::ext_ops</a></div><div class="ttdeci">FemuExtCtrlOps ext_ops</div><div class="ttdef"><b>Definition:</b> nvme.h:1206</div></div>
<div class="ttc" id="apqueue_8h_html_acceacc4429dd9cd31d5af09f3f473cb0"><div class="ttname"><a href="pqueue_8h.html#acceacc4429dd9cd31d5af09f3f473cb0">pqueue_free</a></div><div class="ttdeci">void pqueue_free(pqueue_t *q)</div><div class="ttdef"><b>Definition:</b> pqueue.c:62</div></div>
<div class="ttc" id="astructNvmeIdNs_html"><div class="ttname"><a href="structNvmeIdNs.html">NvmeIdNs</a></div><div class="ttdef"><b>Definition:</b> nvme.h:857</div></div>
<div class="ttc" id="anvme_8h_html_ab29fb0f1f7bb8079954ce617d60e309b"><div class="ttname"><a href="nvme_8h.html#ab29fb0f1f7bb8079954ce617d60e309b">NVME_CAP_SET_AMS</a></div><div class="ttdeci">#define NVME_CAP_SET_AMS(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:101</div></div>
<div class="ttc" id="astructNvmeIdNs_html_aaa72a59d6652fb5fb0a2453d58fb9fa3"><div class="ttname"><a href="structNvmeIdNs.html#aaa72a59d6652fb5fb0a2453d58fb9fa3">NvmeIdNs::nlbaf</a></div><div class="ttdeci">uint8_t nlbaf</div><div class="ttdef"><b>Definition:</b> nvme.h:862</div></div>
<div class="ttc" id="anvme_8h_html_a41336d7a8cd2ea97a1c0fe425b28634e"><div class="ttname"><a href="nvme_8h.html#a41336d7a8cd2ea97a1c0fe425b28634e">NVME_CAP_SET_MPSMAX</a></div><div class="ttdeci">#define NVME_CAP_SET_MPSMAX(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:115</div></div>
<div class="ttc" id="astructFemuCtrl_html_ab6a812bf164ed1eb955e470a1133abb8"><div class="ttname"><a href="structFemuCtrl.html#ab6a812bf164ed1eb955e470a1133abb8">FemuCtrl::reg_size</a></div><div class="ttdeci">uint32_t reg_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1217</div></div>
<div class="ttc" id="astructFemuCtrl_html_a7058666c9b1eaec0493d7514a60493aa"><div class="ttname"><a href="structFemuCtrl.html#a7058666c9b1eaec0493d7514a60493aa">FemuCtrl::serial</a></div><div class="ttdeci">char * serial</div><div class="ttdef"><b>Definition:</b> nvme.h:1262</div></div>
<div class="ttc" id="anvme_8h_html_acd64982aef4cb1864b53952a92068c27"><div class="ttname"><a href="nvme_8h.html#acd64982aef4cb1864b53952a92068c27">BBSSD</a></div><div class="ttdeci">static bool BBSSD(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nvme.h:1368</div></div>
<div class="ttc" id="astructFemuCtrl_html_a8b6ee398ea78cc01b3e2d3c121e933aa"><div class="ttname"><a href="structFemuCtrl.html#a8b6ee398ea78cc01b3e2d3c121e933aa">FemuCtrl::mpsmin</a></div><div class="ttdeci">uint8_t mpsmin</div><div class="ttdef"><b>Definition:</b> nvme.h:1240</div></div>
<div class="ttc" id="astructNvmeNamespace_html_a82fb6235b209c097c887181151ad33a1"><div class="ttname"><a href="structNvmeNamespace.html#a82fb6235b209c097c887181151ad33a1">NvmeNamespace::uncorrectable</a></div><div class="ttdeci">unsigned long * uncorrectable</div><div class="ttdef"><b>Definition:</b> nvme.h:1064</div></div>
<div class="ttc" id="astructNvmeBar_html_adaa7ca7347697c8bd7be655f8e3e1ce1"><div class="ttname"><a href="structNvmeBar.html#adaa7ca7347697c8bd7be655f8e3e1ce1">NvmeBar::cmbsz</a></div><div class="ttdeci">uint32_t cmbsz</div><div class="ttdef"><b>Definition:</b> nvme.h:46</div></div>
<div class="ttc" id="astructFemuCtrl_html_a1dd8af12f361b973c120c80b43ca677c"><div class="ttname"><a href="structFemuCtrl.html#a1dd8af12f361b973c120c80b43ca677c">FemuCtrl::vwc</a></div><div class="ttdeci">uint8_t vwc</div><div class="ttdef"><b>Definition:</b> nvme.h:1233</div></div>
<div class="ttc" id="astructFemuCtrl_html_afd9011b5ddb7b9f315e109cf606b9370"><div class="ttname"><a href="structFemuCtrl.html#afd9011b5ddb7b9f315e109cf606b9370">FemuCtrl::page_bits</a></div><div class="ttdeci">uint16_t page_bits</div><div class="ttdef"><b>Definition:</b> nvme.h:1211</div></div>
<div class="ttc" id="astructFemuCtrl_html_abbc8bea7f714882de1433bb8c6303792"><div class="ttname"><a href="structFemuCtrl.html#abbc8bea7f714882de1433bb8c6303792">FemuCtrl::aer_reqs</a></div><div class="ttdeci">NvmeRequest ** aer_reqs</div><div class="ttdef"><b>Definition:</b> nvme.h:1264</div></div>
<div class="ttc" id="anvme_8h_html_aafda35baa4ea5b7ca05146aa59f3c6f9"><div class="ttname"><a href="nvme_8h.html#aafda35baa4ea5b7ca05146aa59f3c6f9">nvme_check_size</a></div><div class="ttdeci">static void nvme_check_size(void)</div><div class="ttdef"><b>Definition:</b> nvme.h:933</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a2d973610d2446267d4290905c373407a"><div class="ttname"><a href="structNvmeFeatureVal.html#a2d973610d2446267d4290905c373407a">NvmeFeatureVal::write_atomicity</a></div><div class="ttdeci">uint32_t write_atomicity</div><div class="ttdef"><b>Definition:</b> nvme.h:794</div></div>
<div class="ttc" id="anvme_8h_html_ade3f32bb0eea4050edff1fa6aa9d7adc"><div class="ttname"><a href="nvme_8h.html#ade3f32bb0eea4050edff1fa6aa9d7adc">NVME_ID_NS_MC_EXTENDED</a></div><div class="ttdeci">#define NVME_ID_NS_MC_EXTENDED(mc)</div><div class="ttdef"><b>Definition:</b> nvme.h:916</div></div>
<div class="ttc" id="astructNvmeBar_html_a1c99ea162fb33570d0928805284ad5bd"><div class="ttname"><a href="structNvmeBar.html#a1c99ea162fb33570d0928805284ad5bd">NvmeBar::cc</a></div><div class="ttdeci">uint32_t cc</div><div class="ttdef"><b>Definition:</b> nvme.h:38</div></div>
<div class="ttc" id="anvme_8h_html_a42429fbfebab5b37b5d98eb165c56cec"><div class="ttname"><a href="nvme_8h.html#a42429fbfebab5b37b5d98eb165c56cec">NVME_CTRL_SQES_MIN</a></div><div class="ttdeci">#define NVME_CTRL_SQES_MIN(sqes)</div><div class="ttdef"><b>Definition:</b> nvme.h:780</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a58f1323ae312b9d4781f1bb8d3a30e0f"><div class="ttname"><a href="structNvmeFeatureVal.html#a58f1323ae312b9d4781f1bb8d3a30e0f">NvmeFeatureVal::arbitration</a></div><div class="ttdeci">uint32_t arbitration</div><div class="ttdef"><b>Definition:</b> nvme.h:786</div></div>
<div class="ttc" id="anvme_8h_html_a6447daa9208ec8c663aa5f6d9b403377a5580979dcb13f537eeb9fcc837b082ff"><div class="ttname"><a href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a5580979dcb13f537eeb9fcc837b082ff">NVME_CSTS_FAILED</a></div><div class="ttdeci">@ NVME_CSTS_FAILED</div><div class="ttdef"><b>Definition:</b> nvme.h:178</div></div>
<div class="ttc" id="anvme_8h_html_aef2bfc05ccbdba79aef90226efe46ad4"><div class="ttname"><a href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a></div><div class="ttdeci">#define femu_debug(fmt,...)</div><div class="ttdef"><b>Definition:</b> nvme.h:1485</div></div>
<div class="ttc" id="astructFemuCtrl_html_aa7dd5d44d6fade5dd64cc4bdd680a4b5"><div class="ttname"><a href="structFemuCtrl.html#aa7dd5d44d6fade5dd64cc4bdd680a4b5">FemuCtrl::cqr</a></div><div class="ttdeci">uint8_t cqr</div><div class="ttdef"><b>Definition:</b> nvme.h:1229</div></div>
<div class="ttc" id="afemu_8c_html_a31d7536be0fd698bd44a2ce15ce54987"><div class="ttname"><a href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987">nvme_start_ctrl</a></div><div class="ttdeci">static int nvme_start_ctrl(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> femu.c:44</div></div>
<div class="ttc" id="astructFemuCtrl_html_aaef4372b47aa52d5f1b56da9648c2af3"><div class="ttname"><a href="structFemuCtrl.html#aaef4372b47aa52d5f1b56da9648c2af3">FemuCtrl::vid</a></div><div class="ttdeci">uint16_t vid</div><div class="ttdef"><b>Definition:</b> nvme.h:1251</div></div>
<div class="ttc" id="astructFemuCtrl_html_ae419c3a209fe0ffb9f6e04bc6ff3cd7e"><div class="ttname"><a href="structFemuCtrl.html#ae419c3a209fe0ffb9f6e04bc6ff3cd7e">FemuCtrl::bar</a></div><div class="ttdeci">NvmeBar bar</div><div class="ttdef"><b>Definition:</b> nvme.h:1174</div></div>
<div class="ttc" id="astructFemuCtrl_html_a78baba4717dd495d81af587a1a95a0b7"><div class="ttname"><a href="structFemuCtrl.html#a78baba4717dd495d81af587a1a95a0b7">FemuCtrl::num_poller</a></div><div class="ttdeci">uint32_t num_poller</div><div class="ttdef"><b>Definition:</b> nvme.h:1323</div></div>
<div class="ttc" id="astructNvmeNamespace_html_afc01a4df7d13a2a27416a4472efec6d1"><div class="ttname"><a href="structNvmeNamespace.html#afc01a4df7d13a2a27416a4472efec6d1">NvmeNamespace::util</a></div><div class="ttdeci">unsigned long * util</div><div class="ttdef"><b>Definition:</b> nvme.h:1063</div></div>
<div class="ttc" id="astructFemuCtrl_html_a3cbec385b70e8c6a03b463e00ac08d92"><div class="ttname"><a href="structFemuCtrl.html#a3cbec385b70e8c6a03b463e00ac08d92">FemuCtrl::sqe_size</a></div><div class="ttdeci">uint16_t sqe_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1214</div></div>
<div class="ttc" id="anvme_8h_html_a22b79bece90df79ade46e0999aa0e45d"><div class="ttname"><a href="nvme_8h.html#a22b79bece90df79ade46e0999aa0e45d">NVME_MAX_NUM_NAMESPACES</a></div><div class="ttdeci">#define NVME_MAX_NUM_NAMESPACES</div><div class="ttdef"><b>Definition:</b> nvme.h:78</div></div>
<div class="ttc" id="anvme_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8ab9e570d6692e7572ba67dc461b304eab"><div class="ttname"><a href="nvme_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8ab9e570d6692e7572ba67dc461b304eab">OCSSD12</a></div><div class="ttdeci">@ OCSSD12</div><div class="ttdef"><b>Definition:</b> nvme.h:1354</div></div>
<div class="ttc" id="anvme_8h_html_a720b004b4054c0faa53069ad867af926a09f15803560d82030a8222517d6daede"><div class="ttname"><a href="nvme_8h.html#a720b004b4054c0faa53069ad867af926a09f15803560d82030a8222517d6daede">NVME_LPA_NS_SMART</a></div><div class="ttdeci">@ NVME_LPA_NS_SMART</div><div class="ttdef"><b>Definition:</b> nvme.h:775</div></div>
<div class="ttc" id="astructNvmeBar_html_ab91f0c44c7c71d988334b0fb8af64c18"><div class="ttname"><a href="structNvmeBar.html#ab91f0c44c7c71d988334b0fb8af64c18">NvmeBar::csts</a></div><div class="ttdeci">uint32_t csts</div><div class="ttdef"><b>Definition:</b> nvme.h:40</div></div>
<div class="ttc" id="astructFemuCtrl_html_a226acb27573ba9226d9a426b95bfca20"><div class="ttname"><a href="structFemuCtrl.html#a226acb27573ba9226d9a426b95bfca20">FemuCtrl::poller</a></div><div class="ttdeci">QemuThread * poller</div><div class="ttdef"><b>Definition:</b> nvme.h:1258</div></div>
<div class="ttc" id="astructFemuExtCtrlOps_html_ae4aa79cc194dbd2ef7a47eecc0d5635f"><div class="ttname"><a href="structFemuExtCtrlOps.html#ae4aa79cc194dbd2ef7a47eecc0d5635f">FemuExtCtrlOps::exit</a></div><div class="ttdeci">void(* exit)(struct FemuCtrl *)</div><div class="ttdef"><b>Definition:</b> nvme.h:1162</div></div>
<div class="ttc" id="anvme_8h_html_a734c36442c9ecbd6dd5c01cc9c3bd19d"><div class="ttname"><a href="nvme_8h.html#a734c36442c9ecbd6dd5c01cc9c3bd19d">NVME_CAP_MPSMIN</a></div><div class="ttdeci">#define NVME_CAP_MPSMIN(cap)</div><div class="ttdef"><b>Definition:</b> nvme.h:94</div></div>
<div class="ttc" id="astructFemuCtrl_html_a8deef2eb4dfac999392c54657407b645"><div class="ttname"><a href="structFemuCtrl.html#a8deef2eb4dfac999392c54657407b645">FemuCtrl::dbs_addr_hva</a></div><div class="ttdeci">uint64_t dbs_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1279</div></div>
<div class="ttc" id="astructNvmeIdNs_html_a253f93bc4614efc3b4c21732ea40d36f"><div class="ttname"><a href="structNvmeIdNs.html#a253f93bc4614efc3b4c21732ea40d36f">NvmeIdNs::npdg</a></div><div class="ttdeci">uint16_t npdg</div><div class="ttdef"><b>Definition:</b> nvme.h:881</div></div>
<div class="ttc" id="astructFemuCtrl_html_a4f7a49ec4c0d8551955122bf9ddb73c5"><div class="ttname"><a href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">FemuCtrl::db_stride</a></div><div class="ttdeci">uint8_t db_stride</div><div class="ttdef"><b>Definition:</b> nvme.h:1222</div></div>
<div class="ttc" id="anvme_8h_html_aa1b4a61f26a3b8a87c066ec90a1cdde5"><div class="ttname"><a href="nvme_8h.html#aa1b4a61f26a3b8a87c066ec90a1cdde5">NVME_CAP_SET_CQR</a></div><div class="ttdeci">#define NVME_CAP_SET_CQR(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:99</div></div>
<div class="ttc" id="astructFemuCtrl_html_ad2a9b8afdf4fd7e494cc4025ba47d741"><div class="ttname"><a href="structFemuCtrl.html#ad2a9b8afdf4fd7e494cc4025ba47d741">FemuCtrl::max_sqes</a></div><div class="ttdeci">uint8_t max_sqes</div><div class="ttdef"><b>Definition:</b> nvme.h:1230</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9eed30c84e2fdec251abd2d112aa857a"><div class="ttname"><a href="structFemuCtrl.html#a9eed30c84e2fdec251abd2d112aa857a">FemuCtrl::dbs_addr</a></div><div class="ttdeci">uint64_t dbs_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1277</div></div>
<div class="ttc" id="afemu_8c_html_ac83bc83578ac4c5c414ec892ca2169e3"><div class="ttname"><a href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3">nvme_process_db_admin</a></div><div class="ttdeci">static void nvme_process_db_admin(FemuCtrl *n, hwaddr addr, int val)</div><div class="ttdef"><b>Definition:</b> femu.c:146</div></div>
<div class="ttc" id="astructFemuCtrl_html_a4bd5012806e5cda6eb475cb787f4be3d"><div class="ttname"><a href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">FemuCtrl::features</a></div><div class="ttdeci">NvmeFeatureVal features</div><div class="ttdef"><b>Definition:</b> nvme.h:1270</div></div>
<div class="ttc" id="anvme_8h_html_a8f00ab0eaff0945cb32aff5a10ed1524aab19b1e4d6a67e91b4e8f8a2b6ec4496"><div class="ttname"><a href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524aab19b1e4d6a67e91b4e8f8a2b6ec4496">DPS_FIRST_EIGHT</a></div><div class="ttdeci">@ DPS_FIRST_EIGHT</div><div class="ttdef"><b>Definition:</b> nvme.h:930</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a8462a22290ca55a344ab3047aa1d55bd"><div class="ttname"><a href="structNvmeFeatureVal.html#a8462a22290ca55a344ab3047aa1d55bd">NvmeFeatureVal::temp_thresh</a></div><div class="ttdeci">uint32_t temp_thresh</div><div class="ttdef"><b>Definition:</b> nvme.h:788</div></div>
<div class="ttc" id="astructNvmeNamespace_html"><div class="ttname"><a href="structNvmeNamespace.html">NvmeNamespace</a></div><div class="ttdef"><b>Definition:</b> nvme.h:1059</div></div>
<div class="ttc" id="aintr_8c_html_ad98adfb6254598edb5f608bbf2018c8c"><div class="ttname"><a href="intr_8c.html#ad98adfb6254598edb5f608bbf2018c8c">nvme_clear_virq</a></div><div class="ttdeci">int nvme_clear_virq(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> intr.c:222</div></div>
<div class="ttc" id="astructNvmeNamespace_html_a0ed912de2d37b54d07b1f27deb7c5bb6"><div class="ttname"><a href="structNvmeNamespace.html#a0ed912de2d37b54d07b1f27deb7c5bb6">NvmeNamespace::start_block</a></div><div class="ttdeci">uint64_t start_block</div><div class="ttdef"><b>Definition:</b> nvme.h:1068</div></div>
<div class="ttc" id="anvme_8h_html_a8b54138b79410c03932cbda6432f11bca85b74c8eb089683b81699f2b4ce1a0b4"><div class="ttname"><a href="nvme_8h.html#a8b54138b79410c03932cbda6432f11bca85b74c8eb089683b81699f2b4ce1a0b4">NVME_OACS_DBBUF</a></div><div class="ttdeci">@ NVME_OACS_DBBUF</div><div class="ttdef"><b>Definition:</b> nvme.h:758</div></div>
<div class="ttc" id="anvme_8h_html_ac36f475ca5b446f4fde4c9b90bec77c8a6b9670dad69f39036db2fcfe5ede7996"><div class="ttname"><a href="nvme_8h.html#ac36f475ca5b446f4fde4c9b90bec77c8a6b9670dad69f39036db2fcfe5ede7996">OCSSD20</a></div><div class="ttdeci">@ OCSSD20</div><div class="ttdef"><b>Definition:</b> nvme.h:1355</div></div>
<div class="ttc" id="anvme-util_8c_html_a7c210df43397e8f04e184a472f8efe0e"><div class="ttname"><a href="nvme-util_8c.html#a7c210df43397e8f04e184a472f8efe0e">nvme_check_cqid</a></div><div class="ttdeci">int nvme_check_cqid(FemuCtrl *n, uint16_t cqid)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:8</div></div>
<div class="ttc" id="astructNvmeBar_html_a6388aeea1a613c4341fe8a6c4d6cafb6"><div class="ttname"><a href="structNvmeBar.html#a6388aeea1a613c4341fe8a6c4d6cafb6">NvmeBar::intms</a></div><div class="ttdeci">uint32_t intms</div><div class="ttdef"><b>Definition:</b> nvme.h:36</div></div>
<div class="ttc" id="anvme_8h_html_aaa7181e8c0f5909e2343e4ecf8e60eea"><div class="ttname"><a href="nvme_8h.html#aaa7181e8c0f5909e2343e4ecf8e60eea">NVME_ID_NS_DPC_LAST_EIGHT</a></div><div class="ttdeci">#define NVME_ID_NS_DPC_LAST_EIGHT(dpc)</div><div class="ttdef"><b>Definition:</b> nvme.h:917</div></div>
<div class="ttc" id="afemu_8c_html_a76a47b73caa1fa75fb706e3ed8f16a73"><div class="ttname"><a href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73">nvme_register_extensions</a></div><div class="ttdeci">static int nvme_register_extensions(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> femu.c:493</div></div>
<div class="ttc" id="anvme_8h_html_a3137e88859bdb464f96bebbb259bbf8aa2354e6a55a5d0065b8dfd3a33af6221d"><div class="ttname"><a href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aa2354e6a55a5d0065b8dfd3a33af6221d">NVME_ONCS_WRITE_UNCORR</a></div><div class="ttdeci">@ NVME_ONCS_WRITE_UNCORR</div><div class="ttdef"><b>Definition:</b> nvme.h:763</div></div>
<div class="ttc" id="anvme_8h_html_a2342f477442526e6bc2aa046f9bd4a94a28181a48fe56de9ccab6eb11dd3fc9cc"><div class="ttname"><a href="nvme_8h.html#a2342f477442526e6bc2aa046f9bd4a94a28181a48fe56de9ccab6eb11dd3fc9cc">NVME_CSI_NVM</a></div><div class="ttdeci">@ NVME_CSI_NVM</div><div class="ttdef"><b>Definition:</b> nvme.h:118</div></div>
<div class="ttc" id="anvme_8h_html_a244bfc22a89680cfb2924aa52c61f942"><div class="ttname"><a href="nvme_8h.html#a244bfc22a89680cfb2924aa52c61f942">FemuCtrl</a></div><div class="ttdeci">struct FemuCtrl FemuCtrl</div></div>
<div class="ttc" id="afemu_8c_html_a386fa8e3bbdfe152b4768a83c22415b5"><div class="ttname"><a href="femu_8c.html#a386fa8e3bbdfe152b4768a83c22415b5">femu_props</a></div><div class="ttdeci">static Property femu_props[]</div><div class="ttdef"><b>Definition:</b> femu.c:602</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a36ec14134ad2d2e9e12ee59cf8c7f8b2"><div class="ttname"><a href="structNvmeFeatureVal.html#a36ec14134ad2d2e9e12ee59cf8c7f8b2">NvmeFeatureVal::async_config</a></div><div class="ttdeci">uint32_t async_config</div><div class="ttdef"><b>Definition:</b> nvme.h:795</div></div>
<div class="ttc" id="astructNvmeSQueue_html"><div class="ttname"><a href="structNvmeSQueue.html">NvmeSQueue</a></div><div class="ttdef"><b>Definition:</b> nvme.h:1003</div></div>
<div class="ttc" id="astructNvmeIdNs_html_a0588b7533fd0a4d1d56fd12b8fb7502d"><div class="ttname"><a href="structNvmeIdNs.html#a0588b7533fd0a4d1d56fd12b8fb7502d">NvmeIdNs::ncap</a></div><div class="ttdeci">uint64_t ncap</div><div class="ttdef"><b>Definition:</b> nvme.h:859</div></div>
<div class="ttc" id="astructNvmeNamespace_html_a8354f38841896795412b089fdfbe1528"><div class="ttname"><a href="structNvmeNamespace.html#a8354f38841896795412b089fdfbe1528">NvmeNamespace::ctrl</a></div><div class="ttdeci">struct FemuCtrl * ctrl</div><div class="ttdef"><b>Definition:</b> nvme.h:1060</div></div>
<div class="ttc" id="astructFemuCtrl_html_a586d06b8f4ebd787d1874a8e2e08536c"><div class="ttname"><a href="structFemuCtrl.html#a586d06b8f4ebd787d1874a8e2e08536c">FemuCtrl::admin_sq</a></div><div class="ttdeci">NvmeSQueue admin_sq</div><div class="ttdef"><b>Definition:</b> nvme.h:1268</div></div>
<div class="ttc" id="afemu_8c_html_ab0047681e4f6d44aaca85d64f5a5dbac"><div class="ttname"><a href="femu_8c.html#ab0047681e4f6d44aaca85d64f5a5dbac">femu_info</a></div><div class="ttdeci">static const TypeInfo femu_info</div><div class="ttdef"><b>Definition:</b> femu.c:676</div></div>
<div class="ttc" id="astructFemuCtrl_html_a5157a495168afc58a0631c7b689f0f23"><div class="ttname"><a href="structFemuCtrl.html#a5157a495168afc58a0631c7b689f0f23">FemuCtrl::intc</a></div><div class="ttdeci">uint8_t intc</div><div class="ttdef"><b>Definition:</b> nvme.h:1244</div></div>
<div class="ttc" id="anvme_8h_html_a623f6939cbe95d9de1eab8847f6ddba0"><div class="ttname"><a href="nvme_8h.html#a623f6939cbe95d9de1eab8847f6ddba0">nvme_register_ocssd12</a></div><div class="ttdeci">int nvme_register_ocssd12(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> oc12.c:1084</div></div>
<div class="ttc" id="astructNvmeNamespace_html_ac5c0ddf3fd8b71e4387062b8a5e1075d"><div class="ttname"><a href="structNvmeNamespace.html#ac5c0ddf3fd8b71e4387062b8a5e1075d">NvmeNamespace::id_ns</a></div><div class="ttdeci">NvmeIdNs id_ns</div><div class="ttdef"><b>Definition:</b> nvme.h:1061</div></div>
<div class="ttc" id="astructNvmeBar_html_ad5910458ce9220c367e14c8482117018"><div class="ttname"><a href="structNvmeBar.html#ad5910458ce9220c367e14c8482117018">NvmeBar::cap</a></div><div class="ttdeci">uint64_t cap</div><div class="ttdef"><b>Definition:</b> nvme.h:34</div></div>
<div class="ttc" id="afemu_8c_html_a04c9e2f4a6e9acb3f0f23331f8e1cf09"><div class="ttname"><a href="femu_8c.html#a04c9e2f4a6e9acb3f0f23331f8e1cf09">nvme_cmb_ops</a></div><div class="ttdeci">static const MemoryRegionOps nvme_cmb_ops</div><div class="ttdef"><b>Definition:</b> femu.c:266</div></div>
<div class="ttc" id="anvme_8h_html_adf53862fece86b6d4aea0eacd394a89c"><div class="ttname"><a href="nvme_8h.html#adf53862fece86b6d4aea0eacd394a89c">NVME_ID_NS_DPC_FIRST_EIGHT</a></div><div class="ttdeci">#define NVME_ID_NS_DPC_FIRST_EIGHT(dpc)</div><div class="ttdef"><b>Definition:</b> nvme.h:918</div></div>
<div class="ttc" id="astructFemuCtrl_html_ab5a216b7e1406665640e42409e2c8de8"><div class="ttname"><a href="structFemuCtrl.html#ab5a216b7e1406665640e42409e2c8de8">FemuCtrl::mdts</a></div><div class="ttdeci">uint8_t mdts</div><div class="ttdef"><b>Definition:</b> nvme.h:1228</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9d1a8fc9f8a06cfff7668affaa2fbbf6"><div class="ttname"><a href="structFemuCtrl.html#a9d1a8fc9f8a06cfff7668affaa2fbbf6">FemuCtrl::start_time</a></div><div class="ttdeci">time_t start_time</div><div class="ttdef"><b>Definition:</b> nvme.h:1208</div></div>
<div class="ttc" id="anvme_8h_html_a93708ba9e1699c226d187043ab7724ae"><div class="ttname"><a href="nvme_8h.html#a93708ba9e1699c226d187043ab7724ae">NVME_CAP_SET_MPSMIN</a></div><div class="ttdeci">#define NVME_CAP_SET_MPSMIN(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:113</div></div>
<div class="ttc" id="astructFemuCtrl_html_a8c51540060b920896dd8897c51508e20"><div class="ttname"><a href="structFemuCtrl.html#a8c51540060b920896dd8897c51508e20">FemuCtrl::completed</a></div><div class="ttdeci">int completed</div><div class="ttdef"><b>Definition:</b> nvme.h:1309</div></div>
<div class="ttc" id="astructFemuCtrl_html_a78003b6c4ed89a589c99c4b01b9c689a"><div class="ttname"><a href="structFemuCtrl.html#a78003b6c4ed89a589c99c4b01b9c689a">FemuCtrl::should_isr</a></div><div class="ttdeci">bool * should_isr</div><div class="ttdef"><b>Definition:</b> nvme.h:1315</div></div>
<div class="ttc" id="afemu_8c_html_a85d4cc40606cf62f5edf085512acb599"><div class="ttname"><a href="femu_8c.html#a85d4cc40606cf62f5edf085512acb599">nvme_init_cmb</a></div><div class="ttdeci">static void nvme_init_cmb(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> femu.c:455</div></div>
<div class="ttc" id="anvme_8h_html_a3137e88859bdb464f96bebbb259bbf8aa1fa2523620b4cf9057cb9d1fed348271"><div class="ttname"><a href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aa1fa2523620b4cf9057cb9d1fed348271">NVME_ONCS_WRITE_ZEROS</a></div><div class="ttdeci">@ NVME_ONCS_WRITE_ZEROS</div><div class="ttdef"><b>Definition:</b> nvme.h:765</div></div>
<div class="ttc" id="astructSsdDramBackend_html_aee922fd1d1b507dfe5a69e10317cbee4"><div class="ttname"><a href="structSsdDramBackend.html#aee922fd1d1b507dfe5a69e10317cbee4">SsdDramBackend::femu_mode</a></div><div class="ttdeci">int femu_mode</div><div class="ttdef"><b>Definition:</b> dram.h:10</div></div>
<div class="ttc" id="anvme_8h_html_a5b035b881c5f238d08d2788cd5586a8c"><div class="ttname"><a href="nvme_8h.html#a5b035b881c5f238d08d2788cd5586a8c">NVME_CAP_SET_TO</a></div><div class="ttdeci">#define NVME_CAP_SET_TO(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:103</div></div>
<div class="ttc" id="anvme_8h_html_a5398c868fe6dd866d362d033f3ab7254"><div class="ttname"><a href="nvme_8h.html#a5398c868fe6dd866d362d033f3ab7254">NVME_CAP_SET_MQES</a></div><div class="ttdeci">#define NVME_CAP_SET_MQES(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:97</div></div>
<div class="ttc" id="astructFemuCtrl_html_afa7be59e4d6d616e3104152b78d41350"><div class="ttname"><a href="structFemuCtrl.html#afa7be59e4d6d616e3104152b78d41350">FemuCtrl::extended</a></div><div class="ttdeci">uint8_t extended</div><div class="ttdef"><b>Definition:</b> nvme.h:1238</div></div>
<div class="ttc" id="anvme_8h_html_aaefe481d54f102fbcbf8e6fdc2732f03a958776bc677b132e542c7c258f359a4a"><div class="ttname"><a href="nvme_8h.html#aaefe481d54f102fbcbf8e6fdc2732f03a958776bc677b132e542c7c258f359a4a">NVME_CAP_CSS_CSI_SUPP</a></div><div class="ttdeci">@ NVME_CAP_CSS_CSI_SUPP</div><div class="ttdef"><b>Definition:</b> nvme.h:124</div></div>
<div class="ttc" id="astructNvmeBar_html_a170fe347757e94199156109b2b18ecb3"><div class="ttname"><a href="structNvmeBar.html#a170fe347757e94199156109b2b18ecb3">NvmeBar::acq</a></div><div class="ttdeci">uint64_t acq</div><div class="ttdef"><b>Definition:</b> nvme.h:44</div></div>
<div class="ttc" id="astructFemuCtrl_html_a6f86d8c1d2b5365aef55a5d879316868"><div class="ttname"><a href="structFemuCtrl.html#a6f86d8c1d2b5365aef55a5d879316868">FemuCtrl::eis_addr</a></div><div class="ttdeci">uint64_t eis_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1278</div></div>
<div class="ttc" id="anvme_8h_html_a8f00ab0eaff0945cb32aff5a10ed1524abf6bf44feedb74c6a49654775529d786"><div class="ttname"><a href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524abf6bf44feedb74c6a49654775529d786">DPS_TYPE_MASK</a></div><div class="ttdeci">@ DPS_TYPE_MASK</div><div class="ttdef"><b>Definition:</b> nvme.h:929</div></div>
<div class="ttc" id="afemu_8c_html_af615b7b798522330f8e5375f392060ea"><div class="ttname"><a href="femu_8c.html#af615b7b798522330f8e5375f392060ea">nvme_init_ctrl</a></div><div class="ttdeci">static void nvme_init_ctrl(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> femu.c:381</div></div>
<div class="ttc" id="anvme_8h_html_aeb65074adf567541aa15b4ea7c5dc840"><div class="ttname"><a href="nvme_8h.html#aeb65074adf567541aa15b4ea7c5dc840">NVME_CAP_SET_NSSRS</a></div><div class="ttdeci">#define NVME_CAP_SET_NSSRS(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:107</div></div>
<div class="ttc" id="astructFemuCtrl_html_ac4f8d305f94dfd341fe6e7f39c06c47c"><div class="ttname"><a href="structFemuCtrl.html#ac4f8d305f94dfd341fe6e7f39c06c47c">FemuCtrl::cqe_size</a></div><div class="ttdeci">uint16_t cqe_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1213</div></div>
<div class="ttc" id="astructFemuCtrl_html_ae1785a80724176a123fa5f8ba458e643"><div class="ttname"><a href="structFemuCtrl.html#ae1785a80724176a123fa5f8ba458e643">FemuCtrl::meta</a></div><div class="ttdeci">uint8_t meta</div><div class="ttdef"><b>Definition:</b> nvme.h:1232</div></div>
<div class="ttc" id="astructFemuCtrl_html_ab09f359cd5d2e1882bd8a04046becf28"><div class="ttname"><a href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">FemuCtrl::num_io_queues</a></div><div class="ttdeci">uint32_t num_io_queues</div><div class="ttdef"><b>Definition:</b> nvme.h:1219</div></div>
<div class="ttc" id="anvme_8h_html_a459a9ad482387e92a5fa8fc4c108f3f6"><div class="ttname"><a href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6">OCSSD</a></div><div class="ttdeci">static bool OCSSD(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nvme.h:1363</div></div>
<div class="ttc" id="anvme-util_8c_html_ae00a56019ece0039e9a209dfa7bc398e"><div class="ttname"><a href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e">nvme_free_sq</a></div><div class="ttdeci">void nvme_free_sq(NvmeSQueue *sq, FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:146</div></div>
<div class="ttc" id="anvme_8h_html_a2f70b9a841d79206c0e202811811bb1d"><div class="ttname"><a href="nvme_8h.html#a2f70b9a841d79206c0e202811811bb1d">NVME_CAP_SET_DSTRD</a></div><div class="ttdeci">#define NVME_CAP_SET_DSTRD(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:105</div></div>
<div class="ttc" id="astructFemuCtrl_html_ae737130695e70cf78e89fa16269b28ab"><div class="ttname"><a href="structFemuCtrl.html#ae737130695e70cf78e89fa16269b28ab">FemuCtrl::max_cqes</a></div><div class="ttdeci">uint8_t max_cqes</div><div class="ttdef"><b>Definition:</b> nvme.h:1231</div></div>
<div class="ttc" id="astructNvmeBar_html_ad9c59a25a4e498d4e4e900ffb3a88510"><div class="ttname"><a href="structNvmeBar.html#ad9c59a25a4e498d4e4e900ffb3a88510">NvmeBar::asq</a></div><div class="ttdeci">uint64_t asq</div><div class="ttdef"><b>Definition:</b> nvme.h:43</div></div>
<div class="ttc" id="astructFemuCtrl_html_a101673f97321bbc185c290625ce0d8b2"><div class="ttname"><a href="structFemuCtrl.html#a101673f97321bbc185c290625ce0d8b2">FemuCtrl::aerl</a></div><div class="ttdeci">uint8_t aerl</div><div class="ttdef"><b>Definition:</b> nvme.h:1223</div></div>
<div class="ttc" id="anvme_8h_html_ada404e80675e34a0a6c922252b59a2a4"><div class="ttname"><a href="nvme_8h.html#ada404e80675e34a0a6c922252b59a2a4">NVME_CC_SHN</a></div><div class="ttdeci">#define NVME_CC_SHN(cc)</div><div class="ttdef"><b>Definition:</b> nvme.h:152</div></div>
<div class="ttc" id="astructFemuCtrl_html_abd6b7da5cc2c552343a87ed43323a575"><div class="ttname"><a href="structFemuCtrl.html#abd6b7da5cc2c552343a87ed43323a575">FemuCtrl::max_q_ents</a></div><div class="ttdeci">uint32_t max_q_ents</div><div class="ttdef"><b>Definition:</b> nvme.h:1220</div></div>
<div class="ttc" id="astructFemuCtrl_html_ada17b92a62409a544d72524c34cfe8e4"><div class="ttname"><a href="structFemuCtrl.html#ada17b92a62409a544d72524c34cfe8e4">FemuCtrl::temperature</a></div><div class="ttdeci">uint16_t temperature</div><div class="ttdef"><b>Definition:</b> nvme.h:1209</div></div>
<div class="ttc" id="abb_8c_html_a5b8b300920ee99be86c5e3e80a6f7949"><div class="ttname"><a href="bb_8c.html#a5b8b300920ee99be86c5e3e80a6f7949">nvme_register_bbssd</a></div><div class="ttdeci">int nvme_register_bbssd(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> bb.c:102</div></div>
<div class="ttc" id="astructFemuCtrl_html_a010a28b0d592b4f5b5f0f0131afc60ed"><div class="ttname"><a href="structFemuCtrl.html#a010a28b0d592b4f5b5f0f0131afc60ed">FemuCtrl::ns_size</a></div><div class="ttdeci">uint64_t ns_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1221</div></div>
<div class="ttc" id="astructFemuCtrl_html_a157f69377a181cad8e1d1fe98aa6b31d"><div class="ttname"><a href="structFemuCtrl.html#a157f69377a181cad8e1d1fe98aa6b31d">FemuCtrl::femu_mode</a></div><div class="ttdeci">uint8_t femu_mode</div><div class="ttdef"><b>Definition:</b> nvme.h:1282</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a7fc816fae4f563f4f8c453cd1ec8726e"><div class="ttname"><a href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">NvmeCQueue::head</a></div><div class="ttdeci">uint32_t head</div><div class="ttdef"><b>Definition:</b> nvme.h:1034</div></div>
<div class="ttc" id="anvme_8h_html_a586a685e8170c1bff4967278814abf28"><div class="ttname"><a href="nvme_8h.html#a586a685e8170c1bff4967278814abf28">NVME_CC_IOCQES</a></div><div class="ttdeci">#define NVME_CC_IOCQES(cc)</div><div class="ttdef"><b>Definition:</b> nvme.h:154</div></div>
<div class="ttc" id="anvme_8h_html_ae2aa6c922156d9434b6794e442d9343d"><div class="ttname"><a href="nvme_8h.html#ae2aa6c922156d9434b6794e442d9343d">FEMU</a></div><div class="ttdeci">#define FEMU(obj)</div><div class="ttdef"><b>Definition:</b> nvme.h:1087</div></div>
<div class="ttc" id="astructFemuCtrl_html_af13a4a3fc3667cdddbd181c34378b406"><div class="ttname"><a href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">FemuCtrl::id_ctrl</a></div><div class="ttdeci">NvmeIdCtrl id_ctrl</div><div class="ttdef"><b>Definition:</b> nvme.h:1271</div></div>
<div class="ttc" id="anvme_8h_html_a08aeb05994f79207836886d8a1475372"><div class="ttname"><a href="nvme_8h.html#a08aeb05994f79207836886d8a1475372">nvme_register_znssd</a></div><div class="ttdeci">int nvme_register_znssd(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> zns.c:1312</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_a1fe51dee35d75796daf8b758c448543d"><div class="ttname"><a href="structNvmeIdCtrl.html#a1fe51dee35d75796daf8b758c448543d">NvmeIdCtrl::subnqn</a></div><div class="ttdeci">uint8_t subnqn[256]</div><div class="ttdef"><b>Definition:</b> nvme.h:747</div></div>
<div class="ttc" id="afemu_8c_html_a966fbeb7afc495936413dbc445a0dd45"><div class="ttname"><a href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45">femu_realize</a></div><div class="ttdeci">static void femu_realize(PCIDevice *pci_dev, Error **errp)</div><div class="ttdef"><b>Definition:</b> femu.c:518</div></div>
<div class="ttc" id="astructFemuCtrl_html_a525d33d10ee74874b135c7899fe80847"><div class="ttname"><a href="structFemuCtrl.html#a525d33d10ee74874b135c7899fe80847">FemuCtrl::eis_addr_hva</a></div><div class="ttdeci">uint64_t eis_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1280</div></div>
<div class="ttc" id="aintr_8c_html_ab8fc684c66f6970e095cb683d02426d5"><div class="ttname"><a href="intr_8c.html#ab8fc684c66f6970e095cb683d02426d5">nvme_isr_notify_admin</a></div><div class="ttdeci">void nvme_isr_notify_admin(void *opaque)</div><div class="ttdef"><b>Definition:</b> intr.c:173</div></div>
<div class="ttc" id="anvme_8h_html_a91fafe4960342e59b47d66f807966b2e"><div class="ttname"><a href="nvme_8h.html#a91fafe4960342e59b47d66f807966b2e">NOSSD</a></div><div class="ttdeci">static bool NOSSD(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nvme.h:1373</div></div>
<div class="ttc" id="arte__ring_8h_html_aae4026d87730ebef2cbcd08a42778e80"><div class="ttname"><a href="rte__ring_8h.html#aae4026d87730ebef2cbcd08a42778e80">femu_ring_free</a></div><div class="ttdeci">void femu_ring_free(struct rte_ring *ring)</div><div class="ttdef"><b>Definition:</b> rte_ring.c:213</div></div>
<div class="ttc" id="astructFemuCtrl_html_a3545397179421c6f3964e9953988655d"><div class="ttname"><a href="structFemuCtrl.html#a3545397179421c6f3964e9953988655d">FemuCtrl::dps</a></div><div class="ttdeci">uint8_t dps</div><div class="ttdef"><b>Definition:</b> nvme.h:1236</div></div>
<div class="ttc" id="astructFemuCtrl_html_addaf0def5160d73cf6adc2e5afb40948"><div class="ttname"><a href="structFemuCtrl.html#addaf0def5160d73cf6adc2e5afb40948">FemuCtrl::mc</a></div><div class="ttdeci">uint8_t mc</div><div class="ttdef"><b>Definition:</b> nvme.h:1234</div></div>
<div class="ttc" id="anvme_8h_html_a3137e88859bdb464f96bebbb259bbf8aa728dcb2daaf4d4b6fd6f67d441fd3dae"><div class="ttname"><a href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aa728dcb2daaf4d4b6fd6f67d441fd3dae">NVME_ONCS_COMPARE</a></div><div class="ttdeci">@ NVME_ONCS_COMPARE</div><div class="ttdef"><b>Definition:</b> nvme.h:762</div></div>
<div class="ttc" id="astructFemuCtrl_html_a10b78b0a27397642311d5a7571397dd5"><div class="ttname"><a href="structFemuCtrl.html#a10b78b0a27397642311d5a7571397dd5">FemuCtrl::intc_thresh</a></div><div class="ttdeci">uint8_t intc_thresh</div><div class="ttdef"><b>Definition:</b> nvme.h:1245</div></div>
<div class="ttc" id="anvme_8h_html_a8b54138b79410c03932cbda6432f11bcab48f109e06ae031c938dfecc3c5deca4"><div class="ttname"><a href="nvme_8h.html#a8b54138b79410c03932cbda6432f11bcab48f109e06ae031c938dfecc3c5deca4">NVME_OACS_FORMAT</a></div><div class="ttdeci">@ NVME_OACS_FORMAT</div><div class="ttdef"><b>Definition:</b> nvme.h:755</div></div>
<div class="ttc" id="anvme_8h_html_a3137e88859bdb464f96bebbb259bbf8aad3aa66210104808011e11bb2c9a52f14"><div class="ttname"><a href="nvme_8h.html#a3137e88859bdb464f96bebbb259bbf8aad3aa66210104808011e11bb2c9a52f14">NVME_ONCS_DSM</a></div><div class="ttdeci">@ NVME_ONCS_DSM</div><div class="ttdef"><b>Definition:</b> nvme.h:764</div></div>
<div class="ttc" id="astructNvmeIdNs_html_a37d82bc83c29f8eb8040f48a5262980c"><div class="ttname"><a href="structNvmeIdNs.html#a37d82bc83c29f8eb8040f48a5262980c">NvmeIdNs::nsfeat</a></div><div class="ttdeci">uint8_t nsfeat</div><div class="ttdef"><b>Definition:</b> nvme.h:861</div></div>
<div class="ttc" id="astructFemuCtrl_html_a3b6bdba05fa2cf581ace5cc08cd365f5"><div class="ttname"><a href="structFemuCtrl.html#a3b6bdba05fa2cf581ace5cc08cd365f5">FemuCtrl::pq</a></div><div class="ttdeci">pqueue_t ** pq</div><div class="ttdef"><b>Definition:</b> nvme.h:1314</div></div>
<div class="ttc" id="astructFemuCtrl_html_a380a277dfc1bb8f2a192f6244a3f4fdb"><div class="ttname"><a href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">FemuCtrl::cq</a></div><div class="ttdeci">NvmeCQueue ** cq</div><div class="ttdef"><b>Definition:</b> nvme.h:1267</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_a4d5b2ac38d5efd309393898a831db589"><div class="ttname"><a href="structNvmeIdCtrl.html#a4d5b2ac38d5efd309393898a831db589">NvmeIdCtrl::sqes</a></div><div class="ttdeci">uint8_t sqes</div><div class="ttdef"><b>Definition:</b> nvme.h:731</div></div>
<div class="ttc" id="astructNvmeIdNs_html_a4a814e395ae6ea7b3b7c5cba1c22ad85"><div class="ttname"><a href="structNvmeIdNs.html#a4a814e395ae6ea7b3b7c5cba1c22ad85">NvmeIdNs::nsze</a></div><div class="ttdeci">uint64_t nsze</div><div class="ttdef"><b>Definition:</b> nvme.h:858</div></div>
<div class="ttc" id="anop_8c_html_ad4130ad93f90bb1d6ba3bfd595214751"><div class="ttname"><a href="nop_8c.html#ad4130ad93f90bb1d6ba3bfd595214751">nvme_register_nossd</a></div><div class="ttdeci">int nvme_register_nossd(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nop.c:29</div></div>
<div class="ttc" id="astructNvmeIdNs_html_adaa4210801b64bb868cd33dff4f7853e"><div class="ttname"><a href="structNvmeIdNs.html#adaa4210801b64bb868cd33dff4f7853e">NvmeIdNs::dlfeat</a></div><div class="ttdeci">uint8_t dlfeat</div><div class="ttdef"><b>Definition:</b> nvme.h:870</div></div>
<div class="ttc" id="anvme_8h_html_a4dafffcc7e1c39b89809806b8dec8085"><div class="ttname"><a href="nvme_8h.html#a4dafffcc7e1c39b89809806b8dec8085">NVME_CAP_SET_CSS</a></div><div class="ttdeci">#define NVME_CAP_SET_CSS(cap, val)</div><div class="ttdef"><b>Definition:</b> nvme.h:109</div></div>
<div class="ttc" id="afemu_8c_html_ac38f13e024b64cd42d58b3e6951a3da8"><div class="ttname"><a href="femu_8c.html#ac38f13e024b64cd42d58b3e6951a3da8">nvme_init_namespace</a></div><div class="ttdeci">static int nvme_init_namespace(FemuCtrl *n, NvmeNamespace *ns, Error **errp)</div><div class="ttdef"><b>Definition:</b> femu.c:341</div></div>
<div class="ttc" id="afemu_8c_html_a863c74604ae2044f3df266c5d81c28e4"><div class="ttname"><a href="femu_8c.html#a863c74604ae2044f3df266c5d81c28e4">nvme_mmio_read</a></div><div class="ttdeci">static uint64_t nvme_mmio_read(void *opaque, hwaddr addr, unsigned size)</div><div class="ttdef"><b>Definition:</b> femu.c:133</div></div>
<div class="ttc" id="anvme-util_8c_html_a6410408d19dd2986cba9a815d25871a8"><div class="ttname"><a href="nvme-util_8c.html#a6410408d19dd2986cba9a815d25871a8">nvme_init_cq</a></div><div class="ttdeci">uint16_t nvme_init_cq(NvmeCQueue *cq, FemuCtrl *n, uint64_t dma_addr, uint16_t cqid, uint16_t vector, uint16_t size, uint16_t irq_enabled, int contig)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:225</div></div>
<div class="ttc" id="astructFemuCtrl_html_ad84aa0e64f9fbe7fdac3eaaa26c077e3"><div class="ttname"><a href="structFemuCtrl.html#ad84aa0e64f9fbe7fdac3eaaa26c077e3">FemuCtrl::iomem</a></div><div class="ttdeci">MemoryRegion iomem</div><div class="ttdef"><b>Definition:</b> nvme.h:1172</div></div>
<div class="ttc" id="afemu_8c_html_a19c88acc017844e5a46446e274947053"><div class="ttname"><a href="femu_8c.html#a19c88acc017844e5a46446e274947053">nvme_cmb_read</a></div><div class="ttdeci">static uint64_t nvme_cmb_read(void *opaque, hwaddr addr, unsigned size)</div><div class="ttdef"><b>Definition:</b> femu.c:256</div></div>
<div class="ttc" id="astructFemuCtrl_html_a0b48d3c6cc09b094369348af59a3b096"><div class="ttname"><a href="structFemuCtrl.html#a0b48d3c6cc09b094369348af59a3b096">FemuCtrl::csi</a></div><div class="ttdeci">uint8_t csi</div><div class="ttdef"><b>Definition:</b> nvme.h:1189</div></div>
<div class="ttc" id="astructFemuCtrl_html_af50df220250d2ca0ff915e5ed29b5434"><div class="ttname"><a href="structFemuCtrl.html#af50df220250d2ca0ff915e5ed29b5434">FemuCtrl::memsz</a></div><div class="ttdeci">uint32_t memsz</div><div class="ttdef"><b>Definition:</b> nvme.h:1284</div></div>
<div class="ttc" id="anvme_8h_html_a6447daa9208ec8c663aa5f6d9b403377a1c3265611429720e7eacd82fb5727b5d"><div class="ttname"><a href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a1c3265611429720e7eacd82fb5727b5d">NVME_CSTS_READY</a></div><div class="ttdeci">@ NVME_CSTS_READY</div><div class="ttdef"><b>Definition:</b> nvme.h:177</div></div>
<div class="ttc" id="afemu_8c_html_afdad4c815f4a43df7b71e178c19868f0"><div class="ttname"><a href="femu_8c.html#afdad4c815f4a43df7b71e178c19868f0">nvme_init_pci</a></div><div class="ttdeci">static void nvme_init_pci(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> femu.c:467</div></div>
<div class="ttc" id="astructNvmeBar_html_ab056a3f25a92f5ed0afc6be0ad423ebc"><div class="ttname"><a href="structNvmeBar.html#ab056a3f25a92f5ed0afc6be0ad423ebc">NvmeBar::cmbloc</a></div><div class="ttdeci">uint32_t cmbloc</div><div class="ttdef"><b>Definition:</b> nvme.h:45</div></div>
<div class="ttc" id="anvme_8h_html_aa0da8a8759cd4aaa954ce25be3fedd75"><div class="ttname"><a href="nvme_8h.html#aa0da8a8759cd4aaa954ce25be3fedd75">NVME_CTRL_SQES_MAX</a></div><div class="ttdeci">#define NVME_CTRL_SQES_MAX(sqes)</div><div class="ttdef"><b>Definition:</b> nvme.h:781</div></div>
<div class="ttc" id="anvme-admin_8c_html_a7042f589909852500d6f26c36b78850b"><div class="ttname"><a href="nvme-admin_8c.html#a7042f589909852500d6f26c36b78850b">nvme_process_sq_admin</a></div><div class="ttdeci">void nvme_process_sq_admin(void *opaque)</div><div class="ttdef"><b>Definition:</b> nvme-admin.c:1016</div></div>
<div class="ttc" id="astructNvmeIdNs_html_aaf996e4b4662143c7cb56cb8d42573e6"><div class="ttname"><a href="structNvmeIdNs.html#aaf996e4b4662143c7cb56cb8d42573e6">NvmeIdNs::mc</a></div><div class="ttdeci">uint8_t mc</div><div class="ttdef"><b>Definition:</b> nvme.h:864</div></div>
<div class="ttc" id="adram_8c_html_a41776022e272a7b574daea5add213702"><div class="ttname"><a href="dram_8c.html#a41776022e272a7b574daea5add213702">free_dram_backend</a></div><div class="ttdeci">void free_dram_backend(SsdDramBackend *b)</div><div class="ttdef"><b>Definition:</b> dram.c:21</div></div>
<div class="ttc" id="astructFemuCtrl_html_a17f33974ac2017aa9059ee2169fed8e5"><div class="ttname"><a href="structFemuCtrl.html#a17f33974ac2017aa9059ee2169fed8e5">FemuCtrl::intc_time</a></div><div class="ttdeci">uint8_t intc_time</div><div class="ttdef"><b>Definition:</b> nvme.h:1246</div></div>
<div class="ttc" id="astructNvmeLBAF_html_af9a6ca47dd0427de8ce39721e4b79464"><div class="ttname"><a href="structNvmeLBAF.html#af9a6ca47dd0427de8ce39721e4b79464">NvmeLBAF::ms</a></div><div class="ttdeci">uint16_t ms</div><div class="ttdef"><b>Definition:</b> nvme.h:850</div></div>
<div class="ttc" id="astructNvmeBar_html_a685531f770430492ba7ac28d3eb869c7"><div class="ttname"><a href="structNvmeBar.html#a685531f770430492ba7ac28d3eb869c7">NvmeBar::intmc</a></div><div class="ttdeci">uint32_t intmc</div><div class="ttdef"><b>Definition:</b> nvme.h:37</div></div>
<div class="ttc" id="anvme_8h_html_ac31b5eee3c66e628b92c5dd99fe9dbc9"><div class="ttname"><a href="nvme_8h.html#ac31b5eee3c66e628b92c5dd99fe9dbc9">NVME_MAX_STRIDE</a></div><div class="ttdeci">#define NVME_MAX_STRIDE</div><div class="ttdef"><b>Definition:</b> nvme.h:77</div></div>
<div class="ttc" id="astructNvmeIdNs_html_a751e3c19983752a5acb34244eba649e8"><div class="ttname"><a href="structNvmeIdNs.html#a751e3c19983752a5acb34244eba649e8">NvmeIdNs::lbaf</a></div><div class="ttdeci">NvmeLBAF lbaf[16]</div><div class="ttdef"><b>Definition:</b> nvme.h:887</div></div>
<div class="ttc" id="anvme_8h_html_ad36e96c860b2f3c47151a0c73fbb8095"><div class="ttname"><a href="nvme_8h.html#ad36e96c860b2f3c47151a0c73fbb8095">NVME_CTRL_CQES_MAX</a></div><div class="ttdeci">#define NVME_CTRL_CQES_MAX(cqes)</div><div class="ttdef"><b>Definition:</b> nvme.h:783</div></div>
<div class="ttc" id="afemu_8c_html_a04df02f4267b9ff3d1dc8cee3fab6581"><div class="ttname"><a href="femu_8c.html#a04df02f4267b9ff3d1dc8cee3fab6581">nvme_cmb_write</a></div><div class="ttdeci">static void nvme_cmb_write(void *opaque, hwaddr addr, uint64_t data, unsigned size)</div><div class="ttdef"><b>Definition:</b> femu.c:249</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9adc8aaa77ccdd696a9e230e5d05311d"><div class="ttname"><a href="structFemuCtrl.html#a9adc8aaa77ccdd696a9e230e5d05311d">FemuCtrl::lver</a></div><div class="ttdeci">uint8_t lver</div><div class="ttdef"><b>Definition:</b> nvme.h:1283</div></div>
<div class="ttc" id="astructFemuCtrl_html_a76662c7f1b9027edb1088c28b811c335"><div class="ttname"><a href="structFemuCtrl.html#a76662c7f1b9027edb1088c28b811c335">FemuCtrl::temp_warn_issued</a></div><div class="ttdeci">uint8_t temp_warn_issued</div><div class="ttdef"><b>Definition:</b> nvme.h:1248</div></div>
<div class="ttc" id="afemu_8c_html_aa5b4cf8d2b42e9d54982bcd45bd43d15"><div class="ttname"><a href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15">nvme_write_bar</a></div><div class="ttdeci">static void nvme_write_bar(FemuCtrl *n, hwaddr offset, uint64_t data, unsigned size)</div><div class="ttdef"><b>Definition:</b> femu.c:81</div></div>
<div class="ttc" id="afemu_8c_html_a78a5db5b8b1cead9d84276dfeeb4b066"><div class="ttname"><a href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066">nvme_mmio_write</a></div><div class="ttdeci">static void nvme_mmio_write(void *opaque, hwaddr addr, uint64_t data, unsigned size)</div><div class="ttdef"><b>Definition:</b> femu.c:237</div></div>
<div class="ttc" id="astructFemuCtrl_html_a4b7690748b8cf7f87af867703f1dd025"><div class="ttname"><a href="structFemuCtrl.html#a4b7690748b8cf7f87af867703f1dd025">FemuCtrl::admin_cq</a></div><div class="ttdeci">NvmeCQueue admin_cq</div><div class="ttdef"><b>Definition:</b> nvme.h:1269</div></div>
<div class="ttc" id="afemu_8c_html_a4067cc27c2856dec58abf30b2e3f121a"><div class="ttname"><a href="femu_8c.html#a4067cc27c2856dec58abf30b2e3f121a">nvme_process_db_io</a></div><div class="ttdeci">static void nvme_process_db_io(FemuCtrl *n, hwaddr addr, int val)</div><div class="ttdef"><b>Definition:</b> femu.c:186</div></div>
<div class="ttc" id="astructFemuCtrl_html_a19b37fe5892ac52aa01e3b8e7e0035f1"><div class="ttname"><a href="structFemuCtrl.html#a19b37fe5892ac52aa01e3b8e7e0035f1">FemuCtrl::oncs</a></div><div class="ttdeci">uint16_t oncs</div><div class="ttdef"><b>Definition:</b> nvme.h:1216</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a392d23a7bae9920c1573f7c601419ea7"><div class="ttname"><a href="structNvmeFeatureVal.html#a392d23a7bae9920c1573f7c601419ea7">NvmeFeatureVal::int_vector_config</a></div><div class="ttdeci">uint32_t * int_vector_config</div><div class="ttdef"><b>Definition:</b> nvme.h:793</div></div>
<div class="ttc" id="astructNvmeIdNs_html_ae17d963f2c76fadcb0f7962929e50345"><div class="ttname"><a href="structNvmeIdNs.html#ae17d963f2c76fadcb0f7962929e50345">NvmeIdNs::dpc</a></div><div class="ttdeci">uint8_t dpc</div><div class="ttdef"><b>Definition:</b> nvme.h:865</div></div>
<div class="ttc" id="anvme_8h_html_ac66de43e848ed6c3bf3c13aee9d9adc0"><div class="ttname"><a href="nvme_8h.html#ac66de43e848ed6c3bf3c13aee9d9adc0">NVME_CTRL_CQES_MIN</a></div><div class="ttdeci">#define NVME_CTRL_CQES_MIN(cqes)</div><div class="ttdef"><b>Definition:</b> nvme.h:782</div></div>
<div class="ttc" id="astructFemuCtrl_html_aad9e10e513218bf41a5fe498fea33e1f"><div class="ttname"><a href="structFemuCtrl.html#aad9e10e513218bf41a5fe498fea33e1f">FemuCtrl::oacs</a></div><div class="ttdeci">uint16_t oacs</div><div class="ttdef"><b>Definition:</b> nvme.h:1215</div></div>
<div class="ttc" id="anvme_8h_html_a84c4f2d49a3d154d0b737fad84f74f55"><div class="ttname"><a href="nvme_8h.html#a84c4f2d49a3d154d0b737fad84f74f55">NVME_MIN_CQUEUE_ES</a></div><div class="ttdeci">#define NVME_MIN_CQUEUE_ES</div><div class="ttdef"><b>Definition:</b> nvme.h:80</div></div>
<div class="ttc" id="astructFemuCtrl_html_a0ff7c6d5e0e6313cc66e2d62f4e98221"><div class="ttname"><a href="structFemuCtrl.html#a0ff7c6d5e0e6313cc66e2d62f4e98221">FemuCtrl::to_ftl</a></div><div class="ttdeci">struct rte_ring ** to_ftl</div><div class="ttdef"><b>Definition:</b> nvme.h:1312</div></div>
<div class="ttc" id="anvme_8h_html_a6447daa9208ec8c663aa5f6d9b403377a2953e4fbc13802a060c0453f9e35a713"><div class="ttname"><a href="nvme_8h.html#a6447daa9208ec8c663aa5f6d9b403377a2953e4fbc13802a060c0453f9e35a713">NVME_CSTS_SHST_COMPLETE</a></div><div class="ttdeci">@ NVME_CSTS_SHST_COMPLETE</div><div class="ttdef"><b>Definition:</b> nvme.h:181</div></div>
<div class="ttc" id="afemu_8c_html_a02f254917f6299ec50e4ed9cf78e13f9"><div class="ttname"><a href="femu_8c.html#a02f254917f6299ec50e4ed9cf78e13f9">nvme_check_constraints</a></div><div class="ttdeci">static int nvme_check_constraints(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> femu.c:286</div></div>
<div class="ttc" id="anvme_8h_html_a5e3ee6be1fc2a840978ffa649cf6339d"><div class="ttname"><a href="nvme_8h.html#a5e3ee6be1fc2a840978ffa649cf6339d">ZNSSD</a></div><div class="ttdeci">static bool ZNSSD(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nvme.h:1378</div></div>
<div class="ttc" id="anvme_8h_html_a01fa2fcaaecb728f8cc9eabc2e0fc971ac6aa7c4a8d807a2454ef40d6e77a4f10"><div class="ttname"><a href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971ac6aa7c4a8d807a2454ef40d6e77a4f10">NVME_Q_PRIO_HIGH</a></div><div class="ttdeci">@ NVME_Q_PRIO_HIGH</div><div class="ttdef"><b>Definition:</b> nvme.h:395</div></div>
<div class="ttc" id="anvme_8h_html_af67da6ec0e8971c48e5263aef804c871"><div class="ttname"><a href="nvme_8h.html#af67da6ec0e8971c48e5263aef804c871">NVME_ID_NS_DPC_TYPE_MASK</a></div><div class="ttdeci">#define NVME_ID_NS_DPC_TYPE_MASK</div><div class="ttdef"><b>Definition:</b> nvme.h:922</div></div>
<div class="ttc" id="astructNvmeNamespace_html_a1868691a915c0a0cc8eeef08fe969f51"><div class="ttname"><a href="structNvmeNamespace.html#a1868691a915c0a0cc8eeef08fe969f51">NvmeNamespace::size</a></div><div class="ttdeci">uint64_t size</div><div class="ttdef"><b>Definition:</b> nvme.h:1066</div></div>
<div class="ttc" id="anvme_8h_html_afbce5130c2fccec6d897d6efc144a7d8"><div class="ttname"><a href="nvme_8h.html#afbce5130c2fccec6d897d6efc144a7d8">nvme_register_ocssd20</a></div><div class="ttdeci">int nvme_register_ocssd20(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> oc20.c:1363</div></div>
<div class="ttc" id="anvme_8h_html_aaefe481d54f102fbcbf8e6fdc2732f03a9eed416cace45ae3b29b683488fc3ade"><div class="ttname"><a href="nvme_8h.html#aaefe481d54f102fbcbf8e6fdc2732f03a9eed416cace45ae3b29b683488fc3ade">NVME_CAP_CSS_ADMIN_ONLY</a></div><div class="ttdeci">@ NVME_CAP_CSS_ADMIN_ONLY</div><div class="ttdef"><b>Definition:</b> nvme.h:125</div></div>
<div class="ttc" id="anvme_8h_html_a720b004b4054c0faa53069ad867af926a5152447894ba419aa9ffbb2f638c67bd"><div class="ttname"><a href="nvme_8h.html#a720b004b4054c0faa53069ad867af926a5152447894ba419aa9ffbb2f638c67bd">NVME_LPA_EXTENDED</a></div><div class="ttdeci">@ NVME_LPA_EXTENDED</div><div class="ttdef"><b>Definition:</b> nvme.h:777</div></div>
<div class="ttc" id="astructNvmeIdNs_html_ac2061ba91f1d2bf0282bfe22221f65a2"><div class="ttname"><a href="structNvmeIdNs.html#ac2061ba91f1d2bf0282bfe22221f65a2">NvmeIdNs::flbas</a></div><div class="ttdeci">uint8_t flbas</div><div class="ttdef"><b>Definition:</b> nvme.h:863</div></div>
<div class="ttc" id="anvme_8h_html_a0191da122469b61090591fbe5f8fcd89"><div class="ttname"><a href="nvme_8h.html#a0191da122469b61090591fbe5f8fcd89">NVME_AQA_ACQS</a></div><div class="ttdeci">#define NVME_AQA_ACQS(aqa)</div><div class="ttdef"><b>Definition:</b> nvme.h:201</div></div>
<div class="ttc" id="afemu_8c_html_a61b5f2e26fd1e0a3d04ce574e8ef9d68"><div class="ttname"><a href="femu_8c.html#a61b5f2e26fd1e0a3d04ce574e8ef9d68">nvme_ns_init_identify</a></div><div class="ttdeci">static void nvme_ns_init_identify(FemuCtrl *n, NvmeIdNs *id_ns)</div><div class="ttdef"><b>Definition:</b> femu.c:317</div></div>
<div class="ttc" id="anvme_8h_html_aa12409d4e066a991b0d6224a7c23ba0e"><div class="ttname"><a href="nvme_8h.html#aa12409d4e066a991b0d6224a7c23ba0e">NVME_MIN_SQUEUE_ES</a></div><div class="ttdeci">#define NVME_MIN_SQUEUE_ES</div><div class="ttdef"><b>Definition:</b> nvme.h:81</div></div>
<div class="ttc" id="anvme_8h_html_aeea668dd085c0790c64598631f996b36"><div class="ttname"><a href="nvme_8h.html#aeea668dd085c0790c64598631f996b36">NVME_MAX_QS</a></div><div class="ttdeci">#define NVME_MAX_QS</div><div class="ttdef"><b>Definition:</b> nvme.h:75</div></div>
<div class="ttc" id="anvme-util_8c_html_ac3b74834e78afe9ce3db5074e8398a0f"><div class="ttname"><a href="nvme-util_8c.html#ac3b74834e78afe9ce3db5074e8398a0f">nvme_init_sq</a></div><div class="ttdeci">uint16_t nvme_init_sq(NvmeSQueue *sq, FemuCtrl *n, uint64_t dma_addr, uint16_t sqid, uint16_t cqid, uint16_t size, enum NvmeQueueFlags prio, int contig)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:158</div></div>
<div class="ttc" id="astructFemuCtrl_html_ad818a28bdef83c4bb07c0d4f00942b06"><div class="ttname"><a href="structFemuCtrl.html#ad818a28bdef83c4bb07c0d4f00942b06">FemuCtrl::to_poller</a></div><div class="ttdeci">struct rte_ring ** to_poller</div><div class="ttdef"><b>Definition:</b> nvme.h:1313</div></div>
<div class="ttc" id="afemu_8c_html_a3ee4d7c6797cc51dbd46104153e0e352"><div class="ttname"><a href="femu_8c.html#a3ee4d7c6797cc51dbd46104153e0e352">femu_vmstate</a></div><div class="ttdeci">static const VMStateDescription femu_vmstate</div><div class="ttdef"><b>Definition:</b> femu.c:653</div></div>
<div class="ttc" id="astructNvmeLBAF_html_ac0a10526d855cab5ceed66963c0f5a44"><div class="ttname"><a href="structNvmeLBAF.html#ac0a10526d855cab5ceed66963c0f5a44">NvmeLBAF::lbads</a></div><div class="ttdeci">uint8_t lbads</div><div class="ttdef"><b>Definition:</b> nvme.h:851</div></div>
<div class="ttc" id="astructFemuExtCtrlOps_html_abfbb9d2fd43fb82dcac7fc100e5eebf9"><div class="ttname"><a href="structFemuExtCtrlOps.html#abfbb9d2fd43fb82dcac7fc100e5eebf9">FemuExtCtrlOps::init</a></div><div class="ttdeci">void(* init)(struct FemuCtrl *, Error **)</div><div class="ttdef"><b>Definition:</b> nvme.h:1161</div></div>
<div class="ttc" id="afemu_8c_html_ac62fcc12cac3ca808b290e34dd507d66"><div class="ttname"><a href="femu_8c.html#ac62fcc12cac3ca808b290e34dd507d66">nvme_init_namespaces</a></div><div class="ttdeci">static int nvme_init_namespaces(FemuCtrl *n, Error **errp)</div><div class="ttdef"><b>Definition:</b> femu.c:362</div></div>
<div class="ttc" id="afemu_8c_html_a74a800b10ed96ab720491ce2d9c3d9e1"><div class="ttname"><a href="femu_8c.html#a74a800b10ed96ab720491ce2d9c3d9e1">nvme_mmio_ops</a></div><div class="ttdeci">static const MemoryRegionOps nvme_mmio_ops</div><div class="ttdef"><b>Definition:</b> femu.c:276</div></div>
<div class="ttc" id="anvme_8h_html_acb523111122957cb0cafcf2ca9208bcc"><div class="ttname"><a href="nvme_8h.html#acb523111122957cb0cafcf2ca9208bcc">NVME_MAX_QUEUE_ES</a></div><div class="ttdeci">#define NVME_MAX_QUEUE_ES</div><div class="ttdef"><b>Definition:</b> nvme.h:79</div></div>
<div class="ttc" id="astructFemuCtrl_html_a8bd3f2107e1a59779f7d6a669e29b5af"><div class="ttname"><a href="structFemuCtrl.html#a8bd3f2107e1a59779f7d6a669e29b5af">FemuCtrl::num_namespaces</a></div><div class="ttdeci">uint32_t num_namespaces</div><div class="ttdef"><b>Definition:</b> nvme.h:1218</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a484359e6104d0f3bfc1f3a81189497d7"><div class="ttname"><a href="structNvmeFeatureVal.html#a484359e6104d0f3bfc1f3a81189497d7">NvmeFeatureVal::int_coalescing</a></div><div class="ttdeci">uint32_t int_coalescing</div><div class="ttdef"><b>Definition:</b> nvme.h:792</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a7b8e3b48aee1060ab0095c0dfe449232"><div class="ttname"><a href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">NvmeSQueue::tail</a></div><div class="ttdeci">uint32_t tail</div><div class="ttdef"><b>Definition:</b> nvme.h:1010</div></div>
<div class="ttc" id="astructFemuCtrl_html_a362b7dc11bd4e51d46a93c43b2f011df"><div class="ttname"><a href="structFemuCtrl.html#a362b7dc11bd4e51d46a93c43b2f011df">FemuCtrl::max_prp_ents</a></div><div class="ttdeci">uint16_t max_prp_ents</div><div class="ttdef"><b>Definition:</b> nvme.h:1212</div></div>
<div class="ttc" id="anvme_8h_html_a720b004b4054c0faa53069ad867af926a95d3707d5039c7d79040091c7fda43a0"><div class="ttname"><a href="nvme_8h.html#a720b004b4054c0faa53069ad867af926a95d3707d5039c7d79040091c7fda43a0">NVME_LPA_CSE</a></div><div class="ttdeci">@ NVME_LPA_CSE</div><div class="ttdef"><b>Definition:</b> nvme.h:776</div></div>
<div class="ttc" id="astructFemuCtrl_html_ab4f555e0b42bfe51c089ab004c88ff48"><div class="ttname"><a href="structFemuCtrl.html#ab4f555e0b42bfe51c089ab004c88ff48">FemuCtrl::mbe</a></div><div class="ttdeci">SsdDramBackend * mbe</div><div class="ttdef"><b>Definition:</b> nvme.h:1308</div></div>
<div class="ttc" id="anvme_8h_html_a7e51f3d6fd2c420bd306a1ef4f8776bd"><div class="ttname"><a href="nvme_8h.html#a7e51f3d6fd2c420bd306a1ef4f8776bd">NVME_CC_EN</a></div><div class="ttdeci">#define NVME_CC_EN(cc)</div><div class="ttdef"><b>Definition:</b> nvme.h:148</div></div>
<div class="ttc" id="anvme-util_8c_html_ab586dd53da50fb72e2a7359e5f5ce7b6"><div class="ttname"><a href="nvme-util_8c.html#ab586dd53da50fb72e2a7359e5f5ce7b6">nvme_check_sqid</a></div><div class="ttdeci">int nvme_check_sqid(FemuCtrl *n, uint16_t sqid)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:3</div></div>
<div class="ttc" id="anvme_8h_html_a34bdca89b7571f765e4ff765b87f04da"><div class="ttname"><a href="nvme_8h.html#a34bdca89b7571f765e4ff765b87f04da">NVME_CAP_MPSMAX</a></div><div class="ttdeci">#define NVME_CAP_MPSMAX(cap)</div><div class="ttdef"><b>Definition:</b> nvme.h:95</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9d862ea82682f6232413280b92ddc4d1"><div class="ttname"><a href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">FemuCtrl::parent_obj</a></div><div class="ttdeci">PCIDevice parent_obj</div><div class="ttdef"><b>Definition:</b> nvme.h:1171</div></div>
<div class="ttc" id="anvme_8h_html_a5b29ebc822a49d8187a8c0e2a09da6db"><div class="ttname"><a href="nvme_8h.html#a5b29ebc822a49d8187a8c0e2a09da6db">NVME_AQA_ASQS</a></div><div class="ttdeci">#define NVME_AQA_ASQS(aqa)</div><div class="ttdef"><b>Definition:</b> nvme.h:200</div></div>
<div class="ttc" id="astructFemuCtrl_html_ab880f4820c2fda0e6068c014eda64d1f"><div class="ttname"><a href="structFemuCtrl.html#ab880f4820c2fda0e6068c014eda64d1f">FemuCtrl::ctrl_mem</a></div><div class="ttdeci">MemoryRegion ctrl_mem</div><div class="ttdef"><b>Definition:</b> nvme.h:1173</div></div>
<div class="ttc" id="anvme_8h_html_a19e708866bcd5dbe88a1a6ba68d62b41"><div class="ttname"><a href="nvme_8h.html#a19e708866bcd5dbe88a1a6ba68d62b41">NVME_ID_NS_MC_SEPARATE</a></div><div class="ttdeci">#define NVME_ID_NS_MC_SEPARATE(mc)</div><div class="ttdef"><b>Definition:</b> nvme.h:915</div></div>
<div class="ttc" id="astructFemuCtrl_html_a44e0e0b10fb25b302ecbe19b1e085940"><div class="ttname"><a href="structFemuCtrl.html#a44e0e0b10fb25b302ecbe19b1e085940">FemuCtrl::nlbaf</a></div><div class="ttdeci">uint8_t nlbaf</div><div class="ttdef"><b>Definition:</b> nvme.h:1237</div></div>
<div class="ttc" id="astructNvmeBar_html_ad4f47fa4c97b71d1135bc6af23366fd8"><div class="ttname"><a href="structNvmeBar.html#ad4f47fa4c97b71d1135bc6af23366fd8">NvmeBar::aqa</a></div><div class="ttdeci">uint32_t aqa</div><div class="ttdef"><b>Definition:</b> nvme.h:42</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a33aec6e6249873acbc63b47645bf182b"><div class="ttname"><a href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">NvmeSQueue::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> nvme.h:1011</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a877d533f2292d0b48b8fa51a0982e7be"><div class="ttname"><a href="structNvmeFeatureVal.html#a877d533f2292d0b48b8fa51a0982e7be">NvmeFeatureVal::sw_prog_marker</a></div><div class="ttdeci">uint32_t sw_prog_marker</div><div class="ttdef"><b>Definition:</b> nvme.h:796</div></div>
<div class="ttc" id="astructNvmeIdNs_html_acc6d0826dfaffd161fe99cf87b4872ce"><div class="ttname"><a href="structNvmeIdNs.html#acc6d0826dfaffd161fe99cf87b4872ce">NvmeIdNs::dps</a></div><div class="ttdeci">uint8_t dps</div><div class="ttdef"><b>Definition:</b> nvme.h:866</div></div>
<div class="ttc" id="astructFemuExtCtrlOps_html_ac413e402a862c54d63ad71202218b3ec"><div class="ttname"><a href="structFemuExtCtrlOps.html#ac413e402a862c54d63ad71202218b3ec">FemuExtCtrlOps::start_ctrl</a></div><div class="ttdeci">int(* start_ctrl)(struct FemuCtrl *)</div><div class="ttdef"><b>Definition:</b> nvme.h:1164</div></div>
<div class="ttc" id="anvme_8h_html_a8531499a7f89bcd8161379d5773eaa9a"><div class="ttname"><a href="nvme_8h.html#a8531499a7f89bcd8161379d5773eaa9a">NVME_CMBSZ_GETSIZE</a></div><div class="ttdeci">#define NVME_CMBSZ_GETSIZE(cmbsz)</div><div class="ttdef"><b>Definition:</b> nvme.h:263</div></div>
<div class="ttc" id="afemu_8c_html_a412d88dd847ec3c6e8f4f1f669e183e5"><div class="ttname"><a href="femu_8c.html#a412d88dd847ec3c6e8f4f1f669e183e5">NVME_SPEC_VER</a></div><div class="ttdeci">#define NVME_SPEC_VER</div><div class="ttdef"><b>Definition:</b> femu.c:6</div></div>
<div class="ttc" id="anvme_8h_html_a35e5d0f44d80ad9b99d3dac6672af991"><div class="ttname"><a href="nvme_8h.html#a35e5d0f44d80ad9b99d3dac6672af991">NVME_TEMPERATURE</a></div><div class="ttdeci">#define NVME_TEMPERATURE</div><div class="ttdef"><b>Definition:</b> nvme.h:83</div></div>
<div class="ttc" id="astructFemuCtrl_html_a98ca6ff3bc65ccc7f98a589e018b7d71"><div class="ttname"><a href="structFemuCtrl.html#a98ca6ff3bc65ccc7f98a589e018b7d71">FemuCtrl::namespaces</a></div><div class="ttdeci">NvmeNamespace * namespaces</div><div class="ttdef"><b>Definition:</b> nvme.h:1265</div></div>
<div class="ttc" id="astructFemuCtrl_html_a5a2d2916702c9376ea6f688c9cb812e5"><div class="ttname"><a href="structFemuCtrl.html#a5a2d2916702c9376ea6f688c9cb812e5">FemuCtrl::did</a></div><div class="ttdeci">uint16_t did</div><div class="ttdef"><b>Definition:</b> nvme.h:1252</div></div>
<div class="ttc" id="anvme_8h_html_ab5233c5c538a64df4e9b391949d334e3"><div class="ttname"><a href="nvme_8h.html#ab5233c5c538a64df4e9b391949d334e3">ns_blks</a></div><div class="ttdeci">static uint64_t ns_blks(NvmeNamespace *ns, uint8_t lba_idx)</div><div class="ttdef"><b>Definition:</b> nvme.h:1444</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a3425f02bb96f18760ef44b0e0a055741"><div class="ttname"><a href="structNvmeFeatureVal.html#a3425f02bb96f18760ef44b0e0a055741">NvmeFeatureVal::volatile_wc</a></div><div class="ttdeci">uint32_t volatile_wc</div><div class="ttdef"><b>Definition:</b> nvme.h:790</div></div>
<div class="ttc" id="astructFemuCtrl_html_a0456828e9802380dee025b663079afcf"><div class="ttname"><a href="structFemuCtrl.html#a0456828e9802380dee025b663079afcf">FemuCtrl::elpes</a></div><div class="ttdeci">NvmeErrorLog * elpes</div><div class="ttdef"><b>Definition:</b> nvme.h:1263</div></div>
<div class="ttc" id="astructFemuCtrl_html_ad8874d5f34ad77b916883e54291465e4"><div class="ttname"><a href="structFemuCtrl.html#ad8874d5f34ad77b916883e54291465e4">FemuCtrl::dpc</a></div><div class="ttdeci">uint8_t dpc</div><div class="ttdef"><b>Definition:</b> nvme.h:1235</div></div>
<div class="ttc" id="astructFemuCtrl_html_a6291ffd43b13aa9c7bc871a7e1bb4a11"><div class="ttname"><a href="structFemuCtrl.html#a6291ffd43b13aa9c7bc871a7e1bb4a11">FemuCtrl::dataplane_started</a></div><div class="ttdeci">bool dataplane_started</div><div class="ttdef"><b>Definition:</b> nvme.h:1259</div></div>
<div class="ttc" id="anvme-util_8c_html_accdd9730e70228b02a109051bcd3ac93"><div class="ttname"><a href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93">nvme_free_cq</a></div><div class="ttdeci">void nvme_free_cq(NvmeCQueue *cq, FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:270</div></div>
<div class="ttc" id="astructFemuCtrl_html_a665e480db08bf31552661c521abdd768"><div class="ttname"><a href="structFemuCtrl.html#a665e480db08bf31552661c521abdd768">FemuCtrl::lba_index</a></div><div class="ttdeci">uint8_t lba_index</div><div class="ttdef"><b>Definition:</b> nvme.h:1239</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a6115970b3015eb88da80de2ef298c39a"><div class="ttname"><a href="structNvmeFeatureVal.html#a6115970b3015eb88da80de2ef298c39a">NvmeFeatureVal::num_io_queues</a></div><div class="ttdeci">uint32_t num_io_queues</div><div class="ttdef"><b>Definition:</b> nvme.h:791</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html"><div class="ttname"><a href="structNvmeIdCtrl.html">NvmeIdCtrl</a></div><div class="ttdef"><b>Definition:</b> nvme.h:686</div></div>
<div class="ttc" id="afemu_8c_html_aeb3b70286609648db37222148efcf8d3"><div class="ttname"><a href="femu_8c.html#aeb3b70286609648db37222148efcf8d3">femu_class_init</a></div><div class="ttdeci">static void femu_class_init(ObjectClass *oc, void *data)</div><div class="ttdef"><b>Definition:</b> femu.c:658</div></div>
<div class="ttc" id="anvme_8h_html_a82d8c50b518a59a20ab2ce44e8fbb649"><div class="ttname"><a href="nvme_8h.html#a82d8c50b518a59a20ab2ce44e8fbb649">NVME_CC_IOSQES</a></div><div class="ttdeci">#define NVME_CC_IOSQES(cc)</div><div class="ttdef"><b>Definition:</b> nvme.h:153</div></div>
<div class="ttc" id="adram_8c_html_a995036898006c525a601ec4c0bd16091"><div class="ttname"><a href="dram_8c.html#a995036898006c525a601ec4c0bd16091">init_dram_backend</a></div><div class="ttdeci">int init_dram_backend(SsdDramBackend **mbe, int64_t nbytes)</div><div class="ttdef"><b>Definition:</b> dram.c:5</div></div>
<div class="ttc" id="astructNvmeNamespace_html_ad0b627e5006c33450b452a995b5c4704"><div class="ttname"><a href="structNvmeNamespace.html#ad0b627e5006c33450b452a995b5c4704">NvmeNamespace::ns_blks</a></div><div class="ttdeci">uint64_t ns_blks</div><div class="ttdef"><b>Definition:</b> nvme.h:1067</div></div>
<div class="ttc" id="astructFemuCtrl_html_a6d0418e38e888b2b8980a34198bfd463"><div class="ttname"><a href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">FemuCtrl::page_size</a></div><div class="ttdeci">uint16_t page_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1210</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_ad0949f4a41576cf534231a8ceb73bec7"><div class="ttname"><a href="structNvmeFeatureVal.html#ad0949f4a41576cf534231a8ceb73bec7">NvmeFeatureVal::power_mgmt</a></div><div class="ttdeci">uint32_t power_mgmt</div><div class="ttdef"><b>Definition:</b> nvme.h:787</div></div>
<div class="ttc" id="afemu_8c_html_a749caeadb2968b6c63c5f1b2d646eb5a"><div class="ttname"><a href="femu_8c.html#a749caeadb2968b6c63c5f1b2d646eb5a">nvme_destroy_poller</a></div><div class="ttdeci">static void nvme_destroy_poller(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> femu.c:558</div></div>
<div class="ttc" id="anvme_8h_html_a91333268a64e669e088f20aaf0bfd9b7"><div class="ttname"><a href="nvme_8h.html#a91333268a64e669e088f20aaf0bfd9b7">NVME_ID_NS_FLBAS_INDEX</a></div><div class="ttdeci">#define NVME_ID_NS_FLBAS_INDEX(flbas)</div><div class="ttdef"><b>Definition:</b> nvme.h:914</div></div>
<div class="ttc" id="astructFemuCtrl_html_aeec16819b74093e71d70d08ec2a45eea"><div class="ttname"><a href="structFemuCtrl.html#aeec16819b74093e71d70d08ec2a45eea">FemuCtrl::acl</a></div><div class="ttdeci">uint8_t acl</div><div class="ttdef"><b>Definition:</b> nvme.h:1224</div></div>
<div class="ttc" id="anvme_8h_html_a86a363198b7e3bc64f884486fbdeb54e"><div class="ttname"><a href="nvme_8h.html#a86a363198b7e3bc64f884486fbdeb54e">NVME_CC_MPS</a></div><div class="ttdeci">#define NVME_CC_MPS(cc)</div><div class="ttdef"><b>Definition:</b> nvme.h:150</div></div>
<div class="ttc" id="astructFemuCtrl_html_a1be1203ca1d05eb8f7824e365c3c44e2"><div class="ttname"><a href="structFemuCtrl.html#a1be1203ca1d05eb8f7824e365c3c44e2">FemuCtrl::cmbuf</a></div><div class="ttdeci">uint8_t * cmbuf</div><div class="ttdef"><b>Definition:</b> nvme.h:1256</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a63adb2ba3685f4bf39e7375c37be8b14"><div class="ttname"><a href="structNvmeFeatureVal.html#a63adb2ba3685f4bf39e7375c37be8b14">NvmeFeatureVal::err_rec</a></div><div class="ttdeci">uint32_t err_rec</div><div class="ttdef"><b>Definition:</b> nvme.h:789</div></div>
<div class="ttc" id="astructNvmeBar_html_aca1bc08dfde0c3b5be3c9a73e9579f9b"><div class="ttname"><a href="structNvmeBar.html#aca1bc08dfde0c3b5be3c9a73e9579f9b">NvmeBar::vs</a></div><div class="ttdeci">uint32_t vs</div><div class="ttdef"><b>Definition:</b> nvme.h:35</div></div>
<div class="ttc" id="afemu_8c_html_a340aa0343b4141d520e32a9e4bc303a0"><div class="ttname"><a href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0">femu_exit</a></div><div class="ttdeci">static void femu_exit(PCIDevice *pci_dev)</div><div class="ttdef"><b>Definition:</b> femu.c:575</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="femu_8c.html">femu.c</a></li>
    <li class="footer">制作者
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
