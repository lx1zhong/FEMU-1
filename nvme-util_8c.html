<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FEMU: nvme-util.c 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FEMU
   &#160;<span id="projectnumber">原版 master 7e238cc</span>
   </div>
   <div id="projectbrief">FEMU: Accurate, Scalable and Extensible NVMe SSD Emulator (FAST&#39;18)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('nvme-util_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">nvme-util.c 文件参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="nvme_8h_source.html">./nvme.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
nvme-util.c 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c__incl.png" border="0" usemap="#nvme-util_8c" alt=""/></div>
<map name="nvme-util_8c" id="nvme-util_8c">
<area shape="rect" title=" " alt="" coords="888,5,984,32"/>
<area shape="rect" href="nvme_8h.html" title=" " alt="" coords="897,80,975,107"/>
<area shape="rect" title=" " alt="" coords="5,155,120,181"/>
<area shape="rect" title=" " alt="" coords="145,155,247,181"/>
<area shape="rect" title=" " alt="" coords="272,155,379,181"/>
<area shape="rect" title=" " alt="" coords="403,155,514,181"/>
<area shape="rect" title=" " alt="" coords="539,155,651,181"/>
<area shape="rect" title=" " alt="" coords="675,155,779,181"/>
<area shape="rect" title=" " alt="" coords="803,155,933,181"/>
<area shape="rect" title=" " alt="" coords="957,155,1053,181"/>
<area shape="rect" title=" " alt="" coords="1078,155,1197,181"/>
<area shape="rect" href="dram_8h.html" title=" " alt="" coords="1221,155,1347,181"/>
<area shape="rect" href="rte__ring_8h.html" title=" " alt="" coords="1372,155,1479,181"/>
<area shape="rect" href="pqueue_8h.html" title="Priority Queue function declarations" alt="" coords="1503,155,1609,181"/>
<area shape="rect" href="nand_8h.html" title=" " alt="" coords="1633,155,1735,181"/>
<area shape="rect" href="timing_8h.html" title=" " alt="" coords="1760,155,1928,181"/>
<area shape="rect" title=" " alt="" coords="1134,229,1205,256"/>
<area shape="rect" title=" " alt="" coords="1229,229,1296,256"/>
<area shape="rect" title=" " alt="" coords="1321,229,1421,256"/>
<area shape="rect" title=" " alt="" coords="1445,229,1513,256"/>
<area shape="rect" title=" " alt="" coords="1537,229,1639,256"/>
<area shape="rect" href="rte__atomic__x86_8h.html" title=" " alt="" coords="1663,229,1798,256"/>
<area shape="rect" href="rte__branch__prediction_8h.html" title=" " alt="" coords="1822,229,1997,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ab586dd53da50fb72e2a7359e5f5ce7b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#ab586dd53da50fb72e2a7359e5f5ce7b6">nvme_check_sqid</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, uint16_t sqid)</td></tr>
<tr class="separator:ab586dd53da50fb72e2a7359e5f5ce7b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c210df43397e8f04e184a472f8efe0e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a7c210df43397e8f04e184a472f8efe0e">nvme_check_cqid</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, uint16_t cqid)</td></tr>
<tr class="separator:a7c210df43397e8f04e184a472f8efe0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1983cbf62a2b154bc0c1e8f01f2bb1b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a1983cbf62a2b154bc0c1e8f01f2bb1b6">nvme_inc_cq_tail</a> (<a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *cq)</td></tr>
<tr class="separator:a1983cbf62a2b154bc0c1e8f01f2bb1b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c728e2926a6efc38005202a2b224647"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a0c728e2926a6efc38005202a2b224647">nvme_inc_sq_head</a> (<a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *sq)</td></tr>
<tr class="separator:a0c728e2926a6efc38005202a2b224647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21b2434a9d5f978d0b4cf9661820ca63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a21b2434a9d5f978d0b4cf9661820ca63">nvme_update_sq_tail</a> (<a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *sq)</td></tr>
<tr class="separator:a21b2434a9d5f978d0b4cf9661820ca63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c23400ec899cbc551757929a872089e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a2c23400ec899cbc551757929a872089e">nvme_update_cq_head</a> (<a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *cq)</td></tr>
<tr class="separator:a2c23400ec899cbc551757929a872089e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e852fdb44ac17526a5b317eb3e4dac7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a4e852fdb44ac17526a5b317eb3e4dac7">nvme_cq_full</a> (<a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *cq)</td></tr>
<tr class="separator:a4e852fdb44ac17526a5b317eb3e4dac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fdc790b9e67ae29e3ef256182ed345b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a4fdc790b9e67ae29e3ef256182ed345b">nvme_sq_empty</a> (<a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *sq)</td></tr>
<tr class="separator:a4fdc790b9e67ae29e3ef256182ed345b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d8a42fcd63a79e262250aa8f54522da"><td class="memItemLeft" align="right" valign="top">uint64_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da">nvme_setup_discontig</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, uint64_t prp_addr, uint16_t queue_depth, uint16_t entry_size)</td></tr>
<tr class="separator:a9d8a42fcd63a79e262250aa8f54522da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad5e0fb9283798af6a6b70e7254a183"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183">nvme_set_error_page</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, uint16_t sqid, uint16_t cid, uint16_t status, uint16_t location, uint64_t <a class="el" href="oc12_8h.html#aafa9f203f0abc59a4b08b3833f39b92c">lba</a>, uint32_t nsid)</td></tr>
<tr class="separator:a6ad5e0fb9283798af6a6b70e7254a183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13db5864083eb3bdfb33cbb42f2a4350"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a13db5864083eb3bdfb33cbb42f2a4350">femu_nvme_rw_check_req</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, <a class="el" href="structNvmeNamespace.html">NvmeNamespace</a> *ns, <a class="el" href="structNvmeCmd.html">NvmeCmd</a> *cmd, <a class="el" href="structNvmeRequest.html">NvmeRequest</a> *req, uint64_t slba, uint64_t elba, uint32_t nlb, uint16_t ctrl, uint64_t data_size, uint64_t meta_size)</td></tr>
<tr class="separator:a13db5864083eb3bdfb33cbb42f2a4350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00a56019ece0039e9a209dfa7bc398e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#ae00a56019ece0039e9a209dfa7bc398e">nvme_free_sq</a> (<a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *sq, <a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:ae00a56019ece0039e9a209dfa7bc398e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3b74834e78afe9ce3db5074e8398a0f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#ac3b74834e78afe9ce3db5074e8398a0f">nvme_init_sq</a> (<a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *sq, <a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, uint64_t dma_addr, uint16_t sqid, uint16_t cqid, uint16_t size, enum <a class="el" href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971">NvmeQueueFlags</a> prio, int contig)</td></tr>
<tr class="separator:ac3b74834e78afe9ce3db5074e8398a0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6410408d19dd2986cba9a815d25871a8"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a6410408d19dd2986cba9a815d25871a8">nvme_init_cq</a> (<a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *cq, <a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, uint64_t dma_addr, uint16_t cqid, uint16_t vector, uint16_t size, uint16_t irq_enabled, int contig)</td></tr>
<tr class="separator:a6410408d19dd2986cba9a815d25871a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accdd9730e70228b02a109051bcd3ac93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#accdd9730e70228b02a109051bcd3ac93">nvme_free_cq</a> (<a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *cq, <a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n)</td></tr>
<tr class="separator:accdd9730e70228b02a109051bcd3ac93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e84e8328646dcb1f24be9c79018e6a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvme-util_8c.html#a9e84e8328646dcb1f24be9c79018e6a0">nvme_set_ctrl_name</a> (<a class="el" href="structFemuCtrl.html">FemuCtrl</a> *n, const char *mn, const char *sn, int *dev_id)</td></tr>
<tr class="separator:a9e84e8328646dcb1f24be9c79018e6a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">函数说明</h2>
<a id="a13db5864083eb3bdfb33cbb42f2a4350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13db5864083eb3bdfb33cbb42f2a4350">&#9670;&nbsp;</a></span>femu_nvme_rw_check_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t femu_nvme_rw_check_req </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structNvmeNamespace.html">NvmeNamespace</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structNvmeCmd.html">NvmeCmd</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structNvmeRequest.html">NvmeRequest</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>slba</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>elba</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nlb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>meta_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (elba &gt; le64_to_cpu(ns-&gt;<a class="code" href="structNvmeNamespace.html#ac5c0ddf3fd8b71e4387062b8a5e1075d">id_ns</a>.<a class="code" href="structNvmeIdNs.html#a4a814e395ae6ea7b3b7c5cba1c22ad85">nsze</a>)) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183">nvme_set_error_page</a>(n, req-&gt;<a class="code" href="structNvmeRequest.html#a18ef977aa1abc169de646d142d6c77d9">sq</a>-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a>, cmd-&gt;<a class="code" href="structNvmeCmd.html#a80a15bb450d4810749be585c66eba0af">cid</a>, <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a43aae0e0a370dd16186369148885344f">NVME_LBA_RANGE</a>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                            offsetof(<a class="code" href="structNvmeRwCmd.html">NvmeRwCmd</a>, nlb), elba, ns-&gt;<a class="code" href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">id</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a43aae0e0a370dd16186369148885344f">NVME_LBA_RANGE</a> | <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1">NVME_DNR</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>.<a class="code" href="structNvmeIdCtrl.html#a7aa6155f605fdb78fab28db981e0c5c4">mdts</a> &amp;&amp; data_size &gt; n-&gt;<a class="code" href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">page_size</a> * (1 &lt;&lt; n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>.<a class="code" href="structNvmeIdCtrl.html#a7aa6155f605fdb78fab28db981e0c5c4">mdts</a>)) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183">nvme_set_error_page</a>(n, req-&gt;<a class="code" href="structNvmeRequest.html#a18ef977aa1abc169de646d142d6c77d9">sq</a>-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a>, cmd-&gt;<a class="code" href="structNvmeCmd.html#a80a15bb450d4810749be585c66eba0af">cid</a>, <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                            offsetof(<a class="code" href="structNvmeRwCmd.html">NvmeRwCmd</a>, nlb), nlb, ns-&gt;<a class="code" href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">id</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a> | <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1">NVME_DNR</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (meta_size) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183">nvme_set_error_page</a>(n, req-&gt;<a class="code" href="structNvmeRequest.html#a18ef977aa1abc169de646d142d6c77d9">sq</a>-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a>, cmd-&gt;<a class="code" href="structNvmeCmd.html#a80a15bb450d4810749be585c66eba0af">cid</a>, <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a>,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                            offsetof(<a class="code" href="structNvmeRwCmd.html">NvmeRwCmd</a>, control), ctrl, ns-&gt;<a class="code" href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">id</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a> | <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1">NVME_DNR</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> ((ctrl &amp; <a class="code" href="nvme_8h.html#abed82baf7f470b522273a3e37c24c600a7ff268ac8770a6c0d845f07947b85d46">NVME_RW_PRINFO_PRACT</a>) &amp;&amp; !(ns-&gt;<a class="code" href="structNvmeNamespace.html#ac5c0ddf3fd8b71e4387062b8a5e1075d">id_ns</a>.<a class="code" href="structNvmeIdNs.html#acc6d0826dfaffd161fe99cf87b4872ce">dps</a> &amp; <a class="code" href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524abf6bf44feedb74c6a49654775529d786">DPS_TYPE_MASK</a>)) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183">nvme_set_error_page</a>(n, req-&gt;<a class="code" href="structNvmeRequest.html#a18ef977aa1abc169de646d142d6c77d9">sq</a>-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a>, cmd-&gt;<a class="code" href="structNvmeCmd.html#a80a15bb450d4810749be585c66eba0af">cid</a>, <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                            offsetof(<a class="code" href="structNvmeRwCmd.html">NvmeRwCmd</a>, control), ctrl, ns-&gt;<a class="code" href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">id</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">/* Not contemplated in LightNVM for now */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6">OCSSD</a>(n)) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a> | <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1">NVME_DNR</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (!req-&gt;<a class="code" href="structNvmeRequest.html#a6f04006cddb851afcc919412c6e90b60">is_write</a> &amp;&amp; find_next_bit(ns-&gt;<a class="code" href="structNvmeNamespace.html#a82fb6235b209c097c887181151ad33a1">uncorrectable</a>, elba, slba) &lt; elba) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183">nvme_set_error_page</a>(n, req-&gt;<a class="code" href="structNvmeRequest.html#a18ef977aa1abc169de646d142d6c77d9">sq</a>-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a>, cmd-&gt;<a class="code" href="structNvmeCmd.html#a80a15bb450d4810749be585c66eba0af">cid</a>, <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a5157ff55aedb970b020e6602903bd46a">NVME_UNRECOVERED_READ</a>,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                            offsetof(<a class="code" href="structNvmeRwCmd.html">NvmeRwCmd</a>, slba), elba, ns-&gt;<a class="code" href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">id</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a5157ff55aedb970b020e6602903bd46a">NVME_UNRECOVERED_READ</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_cgraph.png" border="0" usemap="#nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_cgraph" alt=""/></div>
<map name="nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_cgraph" id="nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,201,57"/>
<area shape="rect" href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183" title=" " alt="" coords="249,5,412,32"/>
<area shape="rect" href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6" title=" " alt="" coords="297,56,364,83"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_icgraph.png" border="0" usemap="#nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_icgraph" alt=""/></div>
<map name="nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_icgraph" id="nvme-util_8c_a13db5864083eb3bdfb33cbb42f2a4350_icgraph">
<area shape="rect" title=" " alt="" coords="1208,31,1404,57"/>
<area shape="rect" href="nvme_8h.html#a57765d5f7b83e5c6af69f1f5c501beb7" title=" " alt="" coords="1077,31,1160,57"/>
<area shape="rect" href="bb_8c.html#a3b0eb3030af1311ad77c85da413a32d8" title=" " alt="" coords="924,5,1029,32"/>
<area shape="rect" href="nop_8c.html#a56ad5bb3626f3d51b93f720d91e65e69" title=" " alt="" coords="927,56,1027,83"/>
<area shape="rect" href="bb_8c.html#a86a2ad222c79ea1e3eb798c53f472908" title=" " alt="" coords="784,5,876,32"/>
<area shape="rect" href="nvme_8h.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="575,5,736,32"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="332,31,527,57"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,31,284,57"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,31,129,57"/>
<area shape="rect" href="nvme_8h.html#ad4130ad93f90bb1d6ba3bfd595214751" title=" " alt="" coords="575,56,736,83"/>
</map>
</div>

</div>
</div>
<a id="a7c210df43397e8f04e184a472f8efe0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c210df43397e8f04e184a472f8efe0e">&#9670;&nbsp;</a></span>nvme_check_cqid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nvme_check_cqid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cqid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;{</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="keywordflow">return</span> cqid &lt;= n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[cqid] != NULL ? 0 : -1;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a7c210df43397e8f04e184a472f8efe0e_icgraph.png" border="0" usemap="#nvme-util_8c_a7c210df43397e8f04e184a472f8efe0e_icgraph" alt=""/></div>
<map name="nvme-util_8c_a7c210df43397e8f04e184a472f8efe0e_icgraph" id="nvme-util_8c_a7c210df43397e8f04e184a472f8efe0e_icgraph">
<area shape="rect" title=" " alt="" coords="1051,132,1189,159"/>
<area shape="rect" href="nvme-admin_8c.html#af3ddf1e4e280aa3f367a5b2b44879b41" title=" " alt="" coords="873,5,1003,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,208,384,235"/>
<area shape="rect" href="nvme-admin_8c.html#a2c43f1bdb51a2e35c2ecdb9ed9db64ec" title=" " alt="" coords="873,56,1003,83"/>
<area shape="rect" href="nvme-admin_8c.html#ac1090eb738e0aa389ef5a647e647a09f" title=" " alt="" coords="884,107,992,133"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="884,157,992,184"/>
<area shape="rect" href="femu_8c.html#a4067cc27c2856dec58abf30b2e3f121a" title=" " alt="" coords="667,259,825,285"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="675,107,817,133"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,132,619,159"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,233,149,260"/>
</map>
</div>

</div>
</div>
<a id="ab586dd53da50fb72e2a7359e5f5ce7b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab586dd53da50fb72e2a7359e5f5ce7b6">&#9670;&nbsp;</a></span>nvme_check_sqid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nvme_check_sqid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sqid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;{</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    <span class="keywordflow">return</span> sqid &lt;= n-&gt;<a class="code" href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">num_io_queues</a> &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[sqid] != NULL ? 0 : -1;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_ab586dd53da50fb72e2a7359e5f5ce7b6_icgraph.png" border="0" usemap="#nvme-util_8c_ab586dd53da50fb72e2a7359e5f5ce7b6_icgraph" alt=""/></div>
<map name="nvme-util_8c_ab586dd53da50fb72e2a7359e5f5ce7b6_icgraph" id="nvme-util_8c_ab586dd53da50fb72e2a7359e5f5ce7b6_icgraph">
<area shape="rect" title=" " alt="" coords="1051,107,1189,133"/>
<area shape="rect" href="nvme-admin_8c.html#abd65f91764a2624cdc4e608f3dc7932e" title=" " alt="" coords="874,5,1002,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,157,384,184"/>
<area shape="rect" href="nvme-admin_8c.html#a2c43f1bdb51a2e35c2ecdb9ed9db64ec" title=" " alt="" coords="873,56,1003,83"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="884,107,992,133"/>
<area shape="rect" href="femu_8c.html#a4067cc27c2856dec58abf30b2e3f121a" title=" " alt="" coords="667,208,825,235"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="675,81,817,108"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,93,619,120"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,183,149,209"/>
</map>
</div>

</div>
</div>
<a id="a4e852fdb44ac17526a5b317eb3e4dac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e852fdb44ac17526a5b317eb3e4dac7">&#9670;&nbsp;</a></span>nvme_cq_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t nvme_cq_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *&#160;</td>
          <td class="paramname"><em>cq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="nvme-util_8c.html#a2c23400ec899cbc551757929a872089e">nvme_update_cq_head</a>(cq);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">return</span> (cq-&gt;<a class="code" href="structNvmeCQueue.html#a8ecbdfc4863d2633f279c2ae70dff1dd">tail</a> + 1) % cq-&gt;<a class="code" href="structNvmeCQueue.html#a9699dd12674bbfdeba9ee84a1e6b2d79">size</a> == cq-&gt;<a class="code" href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">head</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_cgraph.png" border="0" usemap="#nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_cgraph" alt=""/></div>
<map name="nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_cgraph" id="nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,115,32"/>
<area shape="rect" href="nvme-util_8c.html#a2c23400ec899cbc551757929a872089e" title=" " alt="" coords="163,5,335,32"/>
<area shape="rect" href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484" title=" " alt="" coords="383,5,513,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_icgraph.png" border="0" usemap="#nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_icgraph" alt=""/></div>
<map name="nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_icgraph" id="nvme-util_8c_a4e852fdb44ac17526a5b317eb3e4dac7_icgraph">
<area shape="rect" title=" " alt="" coords="1212,5,1321,32"/>
<area shape="rect" href="nvme_8h.html#a03a3accd495e0b00d01b80e009af5c9f" title=" " alt="" coords="1013,5,1164,32"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="857,5,965,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="accdd9730e70228b02a109051bcd3ac93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accdd9730e70228b02a109051bcd3ac93">&#9670;&nbsp;</a></span>nvme_free_cq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_free_cq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *&#160;</td>
          <td class="paramname"><em>cq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[cq-&gt;<a class="code" href="structNvmeCQueue.html#a81de77c41f0fe454ab844dff5914bae5">cqid</a>] = NULL;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    msix_vector_unuse(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>, cq-&gt;<a class="code" href="structNvmeCQueue.html#a42f6225e7294b5db037fd1e099a8060f">vector</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (cq-&gt;<a class="code" href="structNvmeCQueue.html#abee73fe2f6a1749b69ee6edf4b08f751">prp_list</a>) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        g_free(cq-&gt;<a class="code" href="structNvmeCQueue.html#abee73fe2f6a1749b69ee6edf4b08f751">prp_list</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (cq-&gt;<a class="code" href="structNvmeCQueue.html#a81de77c41f0fe454ab844dff5914bae5">cqid</a>) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        g_free(cq);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_accdd9730e70228b02a109051bcd3ac93_icgraph.png" border="0" usemap="#nvme-util_8c_accdd9730e70228b02a109051bcd3ac93_icgraph" alt=""/></div>
<map name="nvme-util_8c_accdd9730e70228b02a109051bcd3ac93_icgraph" id="nvme-util_8c_accdd9730e70228b02a109051bcd3ac93_icgraph">
<area shape="rect" title=" " alt="" coords="1035,81,1149,108"/>
<area shape="rect" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19" title=" " alt="" coords="859,31,985,57"/>
<area shape="rect" href="nvme-admin_8c.html#af3ddf1e4e280aa3f367a5b2b44879b41" title=" " alt="" coords="857,81,987,108"/>
<area shape="rect" href="nvme-admin_8c.html#ac1090eb738e0aa389ef5a647e647a09f" title=" " alt="" coords="868,132,976,159"/>
<area shape="rect" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0" title=" " alt="" coords="694,5,782,32"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="227,56,354,83"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="463,5,587,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,81,149,108"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,107,809,133"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,107,619,133"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,107,384,133"/>
</map>
</div>

</div>
</div>
<a id="ae00a56019ece0039e9a209dfa7bc398e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae00a56019ece0039e9a209dfa7bc398e">&#9670;&nbsp;</a></span>nvme_free_sq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_free_sq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *&#160;</td>
          <td class="paramname"><em>sq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[sq-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a>] = NULL;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    g_free(sq-&gt;<a class="code" href="structNvmeSQueue.html#a95a5ce1549fa4e2b6fc57b79175e4ac2">io_req</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (sq-&gt;<a class="code" href="structNvmeSQueue.html#a168092b36fc33b9d4367f36613e9eb9d">prp_list</a>) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        g_free(sq-&gt;<a class="code" href="structNvmeSQueue.html#a168092b36fc33b9d4367f36613e9eb9d">prp_list</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (sq-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a>) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        g_free(sq);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_ae00a56019ece0039e9a209dfa7bc398e_icgraph.png" border="0" usemap="#nvme-util_8c_ae00a56019ece0039e9a209dfa7bc398e_icgraph" alt=""/></div>
<map name="nvme-util_8c_ae00a56019ece0039e9a209dfa7bc398e_icgraph" id="nvme-util_8c_ae00a56019ece0039e9a209dfa7bc398e_icgraph">
<area shape="rect" title=" " alt="" coords="1032,81,1147,108"/>
<area shape="rect" href="femu_8c.html#a25b1d92e20b65b39e29a38cb02ddcc19" title=" " alt="" coords="857,56,984,83"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="867,107,975,133"/>
<area shape="rect" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0" title=" " alt="" coords="694,5,782,32"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="227,56,354,83"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="463,5,587,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,81,149,108"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,107,809,133"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,107,619,133"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,107,384,133"/>
</map>
</div>

</div>
</div>
<a id="a1983cbf62a2b154bc0c1e8f01f2bb1b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1983cbf62a2b154bc0c1e8f01f2bb1b6">&#9670;&nbsp;</a></span>nvme_inc_cq_tail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_inc_cq_tail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *&#160;</td>
          <td class="paramname"><em>cq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a8ecbdfc4863d2633f279c2ae70dff1dd">tail</a>++;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="keywordflow">if</span> (cq-&gt;<a class="code" href="structNvmeCQueue.html#a8ecbdfc4863d2633f279c2ae70dff1dd">tail</a> &gt;= cq-&gt;<a class="code" href="structNvmeCQueue.html#a9699dd12674bbfdeba9ee84a1e6b2d79">size</a>) {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#a8ecbdfc4863d2633f279c2ae70dff1dd">tail</a> = 0;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#a550822923ef54d73d7efa7f4bf6159c3">phase</a> = !cq-&gt;<a class="code" href="structNvmeCQueue.html#a550822923ef54d73d7efa7f4bf6159c3">phase</a>;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    }</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a1983cbf62a2b154bc0c1e8f01f2bb1b6_icgraph.png" border="0" usemap="#nvme-util_8c_a1983cbf62a2b154bc0c1e8f01f2bb1b6_icgraph" alt=""/></div>
<map name="nvme-util_8c_a1983cbf62a2b154bc0c1e8f01f2bb1b6_icgraph" id="nvme-util_8c_a1983cbf62a2b154bc0c1e8f01f2bb1b6_icgraph">
<area shape="rect" title=" " alt="" coords="1809,81,1944,108"/>
<area shape="rect" href="nvme-io_8c.html#aa412c2f46a5bc43ac2234173c9743abe" title=" " alt="" coords="1637,56,1761,83"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,81,619,108"/>
<area shape="rect" href="nvme_8h.html#a03a3accd495e0b00d01b80e009af5c9f" title=" " alt="" coords="1432,5,1583,32"/>
<area shape="rect" href="nvme-io_8c.html#a581e208522e056298eed5248b50af242" title=" " alt="" coords="1425,56,1589,83"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="1097,5,1205,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,56,809,83"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,81,384,108"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,81,149,108"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title=" " alt="" coords="1275,56,1377,83"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title=" " alt="" coords="1076,56,1227,83"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,56,1028,83"/>
</map>
</div>

</div>
</div>
<a id="a0c728e2926a6efc38005202a2b224647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c728e2926a6efc38005202a2b224647">&#9670;&nbsp;</a></span>nvme_inc_sq_head()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_inc_sq_head </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *&#160;</td>
          <td class="paramname"><em>sq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;{</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#aec83bc34b2dd3541fda15c0279348264">head</a> = (sq-&gt;<a class="code" href="structNvmeSQueue.html#aec83bc34b2dd3541fda15c0279348264">head</a> + 1) % sq-&gt;<a class="code" href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">size</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a0c728e2926a6efc38005202a2b224647_icgraph.png" border="0" usemap="#nvme-util_8c_a0c728e2926a6efc38005202a2b224647_icgraph" alt=""/></div>
<map name="nvme-util_8c_a0c728e2926a6efc38005202a2b224647_icgraph" id="nvme-util_8c_a0c728e2926a6efc38005202a2b224647_icgraph">
<area shape="rect" title=" " alt="" coords="1631,17,1777,44"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,17,619,44"/>
<area shape="rect" href="nvme-io_8c.html#aaa8fe64369c3e7b33785cabed5a4cbde" title=" " alt="" coords="1425,43,1583,69"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,17,384,44"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,17,149,44"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title=" " alt="" coords="1275,43,1377,69"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title=" " alt="" coords="1076,43,1227,69"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,43,1028,69"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,43,809,69"/>
</map>
</div>

</div>
</div>
<a id="a6410408d19dd2986cba9a815d25871a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6410408d19dd2986cba9a815d25871a8">&#9670;&nbsp;</a></span>nvme_init_cq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t nvme_init_cq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *&#160;</td>
          <td class="paramname"><em>cq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>dma_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cqid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>vector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>irq_enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>contig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;{</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a83ec5b565d4c97540ef1db6462f3efd2">ctrl</a> = n;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a81de77c41f0fe454ab844dff5914bae5">cqid</a> = cqid;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a9699dd12674bbfdeba9ee84a1e6b2d79">size</a> = <a class="code" href="structrte__ring.html#a87cbbf8a4319375d954819403ff292d7">size</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a550822923ef54d73d7efa7f4bf6159c3">phase</a> = 1;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#adbb1a433a87d65e986849bc91d4c46e0">irq_enabled</a> = irq_enabled;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a42f6225e7294b5db037fd1e099a8060f">vector</a> = vector;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">head</a> = cq-&gt;<a class="code" href="structNvmeCQueue.html#a8ecbdfc4863d2633f279c2ae70dff1dd">tail</a> = 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    cq-&gt;<a class="code" href="structNvmeCQueue.html#a376ae99c71a9fb4157bd4fb45b2a5090">phys_contig</a> = contig;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    uint8_t stride = n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">int</span> dbbuf_entry_sz = 1 &lt;&lt; (2 + stride);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    AddressSpace *as = pci_get_address_space(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    dma_addr_t cqsz = (dma_addr_t)<a class="code" href="structrte__ring.html#a87cbbf8a4319375d954819403ff292d7">size</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (cq-&gt;<a class="code" href="structNvmeCQueue.html#a376ae99c71a9fb4157bd4fb45b2a5090">phys_contig</a>) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#a212c26a71132a5d3ca6e4c3992773235">dma_addr</a> = dma_addr;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#ae71382828723bfcbe3c2430f490c0ac3">dma_addr_hva</a> = (uint64_t)dma_memory_map(as, dma_addr, &amp;cqsz, 1);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#abee73fe2f6a1749b69ee6edf4b08f751">prp_list</a> = <a class="code" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da">nvme_setup_discontig</a>(n, dma_addr, <a class="code" href="structrte__ring.html#a87cbbf8a4319375d954819403ff292d7">size</a>,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                n-&gt;<a class="code" href="structFemuCtrl.html#ac4f8d305f94dfd341fe6e7f39c06c47c">cqe_size</a>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> (!cq-&gt;<a class="code" href="structNvmeCQueue.html#abee73fe2f6a1749b69ee6edf4b08f751">prp_list</a>) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a> | <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1">NVME_DNR</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    QTAILQ_INIT(&amp;cq-&gt;req_list);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    QTAILQ_INIT(&amp;cq-&gt;sq_list);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (cqid &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#a9eed30c84e2fdec251abd2d112aa857a">dbs_addr</a> &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#a6f86d8c1d2b5365aef55a5d879316868">eis_addr</a>) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#a90d654f42e288f38b3ff2df34ed71eda">db_addr</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a9eed30c84e2fdec251abd2d112aa857a">dbs_addr</a> + (2 * cqid + 1) * dbbuf_entry_sz;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#a38b8318d3c3040f22eff1fff5f1482e5">db_addr_hva</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a8deef2eb4dfac999392c54657407b645">dbs_addr_hva</a> + (2 * cqid + 1) * dbbuf_entry_sz;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#acae37027eeb09a4a07017b099f3faabe">eventidx_addr</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a6f86d8c1d2b5365aef55a5d879316868">eis_addr</a> + (2 * cqid + 1) * dbbuf_entry_sz;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#af31e498d59d5db90e6fe9d1e7127119d">eventidx_addr_hva</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a525d33d10ee74874b135c7899fe80847">eis_addr_hva</a> + (2 * cqid + 1) * dbbuf_entry_sz;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a>(<span class="stringliteral">&quot;CQ, db_addr=%&quot;</span> PRIu64 <span class="stringliteral">&quot;, eventidx_addr=%&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                cq-&gt;<a class="code" href="structNvmeCQueue.html#a90d654f42e288f38b3ff2df34ed71eda">db_addr</a>, cq-&gt;<a class="code" href="structNvmeCQueue.html#acae37027eeb09a4a07017b099f3faabe">eventidx_addr</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    msix_vector_use(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>, cq-&gt;<a class="code" href="structNvmeCQueue.html#a42f6225e7294b5db037fd1e099a8060f">vector</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[cqid] = cq;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a3268f6be90861f0c2270d86a44d5b09c">NVME_SUCCESS</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_cgraph.png" border="0" usemap="#nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_cgraph" alt=""/></div>
<map name="nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_cgraph" id="nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,115,32"/>
<area shape="rect" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da" title=" " alt="" coords="163,5,331,32"/>
<area shape="rect" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8" title=" " alt="" coords="379,5,513,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_icgraph.png" border="0" usemap="#nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_icgraph" alt=""/></div>
<map name="nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_icgraph" id="nvme-util_8c_a6410408d19dd2986cba9a815d25871a8_icgraph">
<area shape="rect" title=" " alt="" coords="1035,31,1144,57"/>
<area shape="rect" href="nvme-admin_8c.html#af3ddf1e4e280aa3f367a5b2b44879b41" title=" " alt="" coords="857,5,987,32"/>
<area shape="rect" href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987" title=" " alt="" coords="860,56,984,83"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,31,149,57"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="462,56,589,83"/>
</map>
</div>

</div>
</div>
<a id="ac3b74834e78afe9ce3db5074e8398a0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3b74834e78afe9ce3db5074e8398a0f">&#9670;&nbsp;</a></span>nvme_init_sq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t nvme_init_sq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *&#160;</td>
          <td class="paramname"><em>sq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>dma_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sqid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cqid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971">NvmeQueueFlags</a>&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>contig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    uint8_t stride = n-&gt;<a class="code" href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">db_stride</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">int</span> dbbuf_entry_sz = 1 &lt;&lt; (2 + stride);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    AddressSpace *as = pci_get_address_space(&amp;n-&gt;<a class="code" href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">parent_obj</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    dma_addr_t sqsz = (dma_addr_t)<a class="code" href="structrte__ring.html#a87cbbf8a4319375d954819403ff292d7">size</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="structNvmeCQueue.html">NvmeCQueue</a> *cq;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#a09944fa7acccfc87c0c8440aeacc3dc7">ctrl</a> = n;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">sqid</a> = sqid;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">size</a> = <a class="code" href="structrte__ring.html#a87cbbf8a4319375d954819403ff292d7">size</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#a201708806f82565f9dc80a1649f11246">cqid</a> = cqid;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#aec83bc34b2dd3541fda15c0279348264">head</a> = sq-&gt;<a class="code" href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">tail</a> = 0;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#abb10aae49e80be9c67dd28f484514adb">phys_contig</a> = contig;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (sq-&gt;<a class="code" href="structNvmeSQueue.html#abb10aae49e80be9c67dd28f484514adb">phys_contig</a>) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a7e289d563e907e4a724af16364350602">dma_addr</a> = dma_addr;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#ac294c2452da2c57956569dac9c897355">dma_addr_hva</a> = (uint64_t)dma_memory_map(as, dma_addr, &amp;sqsz, 0);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a168092b36fc33b9d4367f36613e9eb9d">prp_list</a> = <a class="code" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da">nvme_setup_discontig</a>(n, dma_addr, <a class="code" href="structrte__ring.html#a87cbbf8a4319375d954819403ff292d7">size</a>, n-&gt;<a class="code" href="structFemuCtrl.html#a3cbec385b70e8c6a03b463e00ac08d92">sqe_size</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (!sq-&gt;<a class="code" href="structNvmeSQueue.html#a168092b36fc33b9d4367f36613e9eb9d">prp_list</a>) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a> | <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1">NVME_DNR</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    sq-&gt;<a class="code" href="structNvmeSQueue.html#a95a5ce1549fa4e2b6fc57b79175e4ac2">io_req</a> = g_malloc0(sq-&gt;<a class="code" href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">size</a> * <span class="keyword">sizeof</span>(*sq-&gt;<a class="code" href="structNvmeSQueue.html#a95a5ce1549fa4e2b6fc57b79175e4ac2">io_req</a>));</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    QTAILQ_INIT(&amp;sq-&gt;req_list);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    QTAILQ_INIT(&amp;sq-&gt;out_req_list);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sq-&gt;<a class="code" href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">size</a>; i++) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a95a5ce1549fa4e2b6fc57b79175e4ac2">io_req</a>[i].<a class="code" href="structNvmeRequest.html#a18ef977aa1abc169de646d142d6c77d9">sq</a> = sq;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        QTAILQ_INSERT_TAIL(&amp;(sq-&gt;req_list), &amp;sq-&gt;<a class="code" href="structNvmeSQueue.html#a95a5ce1549fa4e2b6fc57b79175e4ac2">io_req</a>[i], entry);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">switch</span> (prio) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971a784d856031b0bef2ad697a45e2a40691">NVME_Q_PRIO_URGENT</a>:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a0584d06f4fe2de3d04594160bff0802d">arb_burst</a> = (1 &lt;&lt; <a class="code" href="nvme_8h.html#a0c37ce40c3b635b3c2426de47f6d67c3">NVME_ARB_AB</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a58f1323ae312b9d4781f1bb8d3a30e0f">arbitration</a>));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971ac6aa7c4a8d807a2454ef40d6e77a4f10">NVME_Q_PRIO_HIGH</a>:</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a0584d06f4fe2de3d04594160bff0802d">arb_burst</a> = <a class="code" href="nvme_8h.html#a612e3ddaf959f9b13991010287863c87">NVME_ARB_HPW</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a58f1323ae312b9d4781f1bb8d3a30e0f">arbitration</a>) + 1;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971a03629c32ac63a0f7ba74cec149dda17c">NVME_Q_PRIO_NORMAL</a>:</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a0584d06f4fe2de3d04594160bff0802d">arb_burst</a> = <a class="code" href="nvme_8h.html#a2cedcc048dead4cfe3156cd083aed6e7">NVME_ARB_MPW</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a58f1323ae312b9d4781f1bb8d3a30e0f">arbitration</a>) + 1;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971a696490ee3190e69d0153d3c7b22cc943">NVME_Q_PRIO_LOW</a>:</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a0584d06f4fe2de3d04594160bff0802d">arb_burst</a> = <a class="code" href="nvme_8h.html#a6ed10a5f898d5d839bc22da9276b7d93">NVME_ARB_LPW</a>(n-&gt;<a class="code" href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">features</a>.<a class="code" href="structNvmeFeatureVal.html#a58f1323ae312b9d4781f1bb8d3a30e0f">arbitration</a>) + 1;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (sqid &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#a9eed30c84e2fdec251abd2d112aa857a">dbs_addr</a> &amp;&amp; n-&gt;<a class="code" href="structFemuCtrl.html#a6f86d8c1d2b5365aef55a5d879316868">eis_addr</a>) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a6c854ba52b14d2f7bbc195451d41dc6d">db_addr</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a9eed30c84e2fdec251abd2d112aa857a">dbs_addr</a> + 2 * sqid * dbbuf_entry_sz;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a0328aeea530626544944138d5a1bca54">db_addr_hva</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a8deef2eb4dfac999392c54657407b645">dbs_addr_hva</a> + 2 * sqid * dbbuf_entry_sz;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a019c28f2b0e28a7c7d0f511de65b5045">eventidx_addr</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a6f86d8c1d2b5365aef55a5d879316868">eis_addr</a> + 2 * sqid * dbbuf_entry_sz;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a019c28f2b0e28a7c7d0f511de65b5045">eventidx_addr</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a525d33d10ee74874b135c7899fe80847">eis_addr_hva</a> + 2 * sqid + dbbuf_entry_sz;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a>(<span class="stringliteral">&quot;SQ[%d],db=%&quot;</span> PRIu64 <span class="stringliteral">&quot;,ei=%&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span>, sqid, sq-&gt;<a class="code" href="structNvmeSQueue.html#a6c854ba52b14d2f7bbc195451d41dc6d">db_addr</a>,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                sq-&gt;<a class="code" href="structNvmeSQueue.html#a019c28f2b0e28a7c7d0f511de65b5045">eventidx_addr</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    assert(n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[cqid]);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    cq = n-&gt;<a class="code" href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">cq</a>[cqid];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    QTAILQ_INSERT_TAIL(&amp;(cq-&gt;sq_list), sq, entry);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">sq</a>[sqid] = sq;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a3268f6be90861f0c2270d86a44d5b09c">NVME_SUCCESS</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_cgraph.png" border="0" usemap="#nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_cgraph" alt=""/></div>
<map name="nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_cgraph" id="nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,115,32"/>
<area shape="rect" href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da" title=" " alt="" coords="163,5,331,32"/>
<area shape="rect" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8" title=" " alt="" coords="379,5,513,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_icgraph.png" border="0" usemap="#nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_icgraph" alt=""/></div>
<map name="nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_icgraph" id="nvme-util_8c_ac3b74834e78afe9ce3db5074e8398a0f_icgraph">
<area shape="rect" title=" " alt="" coords="1035,31,1144,57"/>
<area shape="rect" href="nvme-admin_8c.html#a2c43f1bdb51a2e35c2ecdb9ed9db64ec" title=" " alt="" coords="857,5,987,32"/>
<area shape="rect" href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987" title=" " alt="" coords="860,56,984,83"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,31,149,57"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="462,56,589,83"/>
</map>
</div>

</div>
</div>
<a id="a9e84e8328646dcb1f24be9c79018e6a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e84e8328646dcb1f24be9c79018e6a0">&#9670;&nbsp;</a></span>nvme_set_ctrl_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_set_ctrl_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>dev_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="structNvmeIdCtrl.html">NvmeIdCtrl</a> *<span class="keywordtype">id</span> = &amp;n-&gt;<a class="code" href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">id_ctrl</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">char</span> *subnqn;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">char</span> serial[<a class="code" href="nvme_8h.html#a248e87626d667145c329503e802207f0">MN_MAX_LEN</a>], dev_id_str[<a class="code" href="nvme_8h.html#ab948599d7252d70406c01753bcf72512">ID_MAX_LEN</a>];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    memset(serial, 0, <a class="code" href="nvme_8h.html#a248e87626d667145c329503e802207f0">MN_MAX_LEN</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    memset(dev_id_str, 0, <a class="code" href="nvme_8h.html#ab948599d7252d70406c01753bcf72512">ID_MAX_LEN</a>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    strcat(serial, sn);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    sprintf(dev_id_str, <span class="stringliteral">&quot;%d&quot;</span>, *dev_id);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    strcat(serial, dev_id_str);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    (*dev_id)++;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    strpadcpy((<span class="keywordtype">char</span> *)id-&gt;<a class="code" href="structNvmeIdCtrl.html#abf371d53e71ed474914a6f5b5d94a253">mn</a>, <span class="keyword">sizeof</span>(id-&gt;<a class="code" href="structNvmeIdCtrl.html#abf371d53e71ed474914a6f5b5d94a253">mn</a>), mn, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    memset(n-&gt;<a class="code" href="structFemuCtrl.html#a7c69e429f2da05dd6a0ecb4591c2c4fb">devname</a>, 0, <a class="code" href="nvme_8h.html#a248e87626d667145c329503e802207f0">MN_MAX_LEN</a>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    g_strlcpy(n-&gt;<a class="code" href="structFemuCtrl.html#a7c69e429f2da05dd6a0ecb4591c2c4fb">devname</a>, serial, <span class="keyword">sizeof</span>(serial));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    strpadcpy((<span class="keywordtype">char</span> *)id-&gt;<a class="code" href="structNvmeIdCtrl.html#a35b699fee3e790206ef6c2d09830bbe0">sn</a>, <span class="keyword">sizeof</span>(id-&gt;<a class="code" href="structNvmeIdCtrl.html#a35b699fee3e790206ef6c2d09830bbe0">sn</a>), serial, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    strpadcpy((<span class="keywordtype">char</span> *)id-&gt;<a class="code" href="structNvmeIdCtrl.html#a351b809c9cd07a0775f5b35440fa609f">fr</a>, <span class="keyword">sizeof</span>(id-&gt;<a class="code" href="structNvmeIdCtrl.html#a351b809c9cd07a0775f5b35440fa609f">fr</a>), <span class="stringliteral">&quot;1.0&quot;</span>, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    subnqn = g_strdup_printf(<span class="stringliteral">&quot;nqn.2021-05.org.femu:%s&quot;</span>, serial);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    strpadcpy((<span class="keywordtype">char</span> *)id-&gt;<a class="code" href="structNvmeIdCtrl.html#a1fe51dee35d75796daf8b758c448543d">subnqn</a>, <span class="keyword">sizeof</span>(id-&gt;<a class="code" href="structNvmeIdCtrl.html#a1fe51dee35d75796daf8b758c448543d">subnqn</a>), subnqn, <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a9e84e8328646dcb1f24be9c79018e6a0_icgraph.png" border="0" usemap="#nvme-util_8c_a9e84e8328646dcb1f24be9c79018e6a0_icgraph" alt=""/></div>
<map name="nvme-util_8c_a9e84e8328646dcb1f24be9c79018e6a0_icgraph" id="nvme-util_8c_a9e84e8328646dcb1f24be9c79018e6a0_icgraph">
<area shape="rect" title=" " alt="" coords="1349,81,1508,108"/>
<area shape="rect" href="bb_8c.html#aeaee718de94247f9ea5dc15b03680329" title=" " alt="" coords="1176,5,1295,32"/>
<area shape="rect" href="oc12_8c.html#aef55b0e79dd4659d66fc1d7d83b3a88a" title=" " alt="" coords="1169,56,1301,83"/>
<area shape="rect" href="oc20_8c.html#abbab335c5f5b0e99f9a5587a93289a8c" title=" " alt="" coords="1169,107,1301,133"/>
<area shape="rect" href="zns_8c.html#a05f7689d91910e1a2f865b30a9bc5393" title=" " alt="" coords="1174,157,1297,184"/>
<area shape="rect" href="bb_8c.html#a3fc7384f815cca2f52003206b20324df" title=" " alt="" coords="1039,5,1105,32"/>
<area shape="rect" href="nvme_8h.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="582,5,743,32"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="332,81,527,108"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="177,81,284,108"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,81,129,108"/>
<area shape="rect" href="oc12_8c.html#a0caef7cdff7d502bdf678c7e8c57e35e" title=" " alt="" coords="1031,56,1113,83"/>
<area shape="rect" href="oc12_8c.html#a623f6939cbe95d9de1eab8847f6ddba0" title=" " alt="" coords="575,56,751,83"/>
<area shape="rect" href="oc20_8c.html#ab8b64d072bf22bd8976f359cf512d456" title=" " alt="" coords="1031,107,1113,133"/>
<area shape="rect" href="oc20_8c.html#afbce5130c2fccec6d897d6efc144a7d8" title=" " alt="" coords="799,107,975,133"/>
<area shape="rect" href="zns_8c.html#ace4f37fd873afd711375d7c88dc333ff" title=" " alt="" coords="1023,157,1121,184"/>
<area shape="rect" href="zns_8c.html#aa65a4a4ae802bdd6f8cc362247c6325b" title=" " alt="" coords="851,157,923,184"/>
<area shape="rect" href="zns_8c.html#a08aeb05994f79207836886d8a1475372" title=" " alt="" coords="583,157,743,184"/>
</map>
</div>

</div>
</div>
<a id="a6ad5e0fb9283798af6a6b70e7254a183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ad5e0fb9283798af6a6b70e7254a183">&#9670;&nbsp;</a></span>nvme_set_error_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_set_error_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sqid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>lba</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nsid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="structNvmeErrorLog.html">NvmeErrorLog</a> *elp;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    elp = &amp;n-&gt;<a class="code" href="structFemuCtrl.html#a0456828e9802380dee025b663079afcf">elpes</a>[n-&gt;<a class="code" href="structFemuCtrl.html#a1afb4cdf7871ec97ee3fe1aa2baa7138">elp_index</a>];</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    elp-&gt;<a class="code" href="structNvmeErrorLog.html#afe741a54d5612bd2b2e978cd86600dc9">error_count</a> = n-&gt;<a class="code" href="structFemuCtrl.html#a81eb4ffac10eb4abea4985adc4b368e1">error_count</a>++;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    elp-&gt;<a class="code" href="structNvmeErrorLog.html#ac8e30be0d08cf527014c3bf23d5934f9">sqid</a> = sqid;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    elp-&gt;<a class="code" href="structNvmeErrorLog.html#a0f00a2ce20b7f9e944049d047ac0377c">cid</a> = cid;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    elp-&gt;<a class="code" href="structNvmeErrorLog.html#a2c64d78f4f584861c9be5e67f29cad8c">status_field</a> = status;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    elp-&gt;<a class="code" href="structNvmeErrorLog.html#abb12d210517974c51ae3fe6613e222cd">param_error_location</a> = location;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    elp-&gt;<a class="code" href="structNvmeErrorLog.html#a34c2236aaad4b53fb84d00e65f2eb533">lba</a> = <a class="code" href="oc12_8h.html#aafa9f203f0abc59a4b08b3833f39b92c">lba</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    elp-&gt;<a class="code" href="structNvmeErrorLog.html#a0f8722a98215a9e4e7f17fb53707f22d">nsid</a> = nsid;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    n-&gt;<a class="code" href="structFemuCtrl.html#a1afb4cdf7871ec97ee3fe1aa2baa7138">elp_index</a> = (n-&gt;<a class="code" href="structFemuCtrl.html#a1afb4cdf7871ec97ee3fe1aa2baa7138">elp_index</a> + 1) % n-&gt;<a class="code" href="structFemuCtrl.html#a31fb867a33c2ccad78e9c82456391e89">elpe</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    ++n-&gt;<a class="code" href="structFemuCtrl.html#a6461a7eda526fcc86770a43380615b7c">num_errors</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a6ad5e0fb9283798af6a6b70e7254a183_icgraph.png" border="0" usemap="#nvme-util_8c_a6ad5e0fb9283798af6a6b70e7254a183_icgraph" alt=""/></div>
<map name="nvme-util_8c_a6ad5e0fb9283798af6a6b70e7254a183_icgraph" id="nvme-util_8c_a6ad5e0fb9283798af6a6b70e7254a183_icgraph">
<area shape="rect" title=" " alt="" coords="2209,221,2372,248"/>
<area shape="rect" href="nvme_8h.html#a13db5864083eb3bdfb33cbb42f2a4350" title=" " alt="" coords="1965,145,2161,172"/>
<area shape="rect" href="nvme_8h.html#a57765d5f7b83e5c6af69f1f5c501beb7" title=" " alt="" coords="1781,171,1864,197"/>
<area shape="rect" href="nvme-io_8c.html#a1ea0938f847741b1399583080d7bd9ae" title=" " alt="" coords="2002,348,2125,375"/>
<area shape="rect" href="nvme-io_8c.html#ae1f6c99fbfdd8d6c788ee82c6d13086d" title=" " alt="" coords="2016,399,2111,425"/>
<area shape="rect" href="nvme-io_8c.html#a646ae4b9455eb7bf01b18eea275a2379" title=" " alt="" coords="1992,247,2135,273"/>
<area shape="rect" href="nvme-io_8c.html#ae3fe0206159ec6d704c59e7393b6d85c" title=" " alt="" coords="1993,297,2134,324"/>
<area shape="rect" href="oc20_8c.html#a6f0ef064288e5faf705144a99f2d702b" title=" " alt="" coords="1345,69,1421,96"/>
<area shape="rect" href="oc20_8c.html#ac1624519937881c989bac88bd9556295" title=" " alt="" coords="1980,29,2147,70"/>
<area shape="rect" href="bb_8c.html#a3b0eb3030af1311ad77c85da413a32d8" title=" " alt="" coords="1529,145,1634,172"/>
<area shape="rect" href="nop_8c.html#a56ad5bb3626f3d51b93f720d91e65e69" title=" " alt="" coords="1531,196,1631,223"/>
<area shape="rect" href="bb_8c.html#a86a2ad222c79ea1e3eb798c53f472908" title=" " alt="" coords="1337,145,1429,172"/>
<area shape="rect" href="nvme_8h.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="917,145,1078,172"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="667,145,861,172"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="472,145,579,172"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="229,145,353,172"/>
<area shape="rect" href="nvme_8h.html#ad4130ad93f90bb1d6ba3bfd595214751" title=" " alt="" coords="917,196,1078,223"/>
<area shape="rect" href="nvme-io_8c.html#ae6d2b4ae7957a876e1e221b7f2ee1fb8" title=" " alt="" coords="1766,323,1879,349"/>
<area shape="rect" href="nvme-io_8c.html#aaa8fe64369c3e7b33785cabed5a4cbde" title=" " alt="" coords="1503,323,1660,349"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title=" " alt="" coords="1332,323,1435,349"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title=" " alt="" coords="1133,323,1284,349"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="912,323,1083,349"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="693,323,835,349"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,323,619,349"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,323,384,349"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,323,149,349"/>
<area shape="rect" href="oc20_8c.html#a2b271895f51ed6a3e57db3cf0a7f9f94" title=" " alt="" coords="1155,69,1262,96"/>
<area shape="rect" href="oc20_8c.html#afbce5130c2fccec6d897d6efc144a7d8" title=" " alt="" coords="909,69,1085,96"/>
<area shape="rect" href="oc20_8c.html#a59be92e5cac7979f5bba9f2bf96bf9d3" title=" " alt="" coords="1134,5,1283,32"/>
<area shape="rect" href="oc20_8c.html#a9275cfcb96b4d6325c9b8518de820af0" title=" " alt="" coords="1728,44,1917,71"/>
<area shape="rect" href="oc20_8c.html#a2089ad6d786056bee5a293126c9c2ed1" title=" " alt="" coords="1483,44,1680,71"/>
</map>
</div>

</div>
</div>
<a id="a9d8a42fcd63a79e262250aa8f54522da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d8a42fcd63a79e262250aa8f54522da">&#9670;&nbsp;</a></span>nvme_setup_discontig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t* nvme_setup_discontig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFemuCtrl.html">FemuCtrl</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>prp_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>queue_depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>entry_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    uint16_t prps_per_page = n-&gt;<a class="code" href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">page_size</a> &gt;&gt; 3;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    uint64_t prp[prps_per_page];</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    uint16_t total_prps = DIV_ROUND_UP(queue_depth * entry_size, n-&gt;<a class="code" href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">page_size</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    uint64_t *prp_list = g_malloc0(total_prps * <span class="keyword">sizeof</span>(*prp_list));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; total_prps; i++) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">if</span> (i % prps_per_page == 0 &amp;&amp; i &lt; total_prps - 1) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">if</span> (!prp_addr || prp_addr &amp; (n-&gt;<a class="code" href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">page_size</a> - 1)) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                g_free(prp_list);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <a class="code" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8">nvme_addr_write</a>(n, prp_addr, (uint8_t *)&amp;prp, <span class="keyword">sizeof</span>(prp));</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            prp_addr = le64_to_cpu(prp[prps_per_page - 1]);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        prp_list[i] = le64_to_cpu(prp[i % prps_per_page]);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span> (!prp_list[i] || prp_list[i] &amp; (n-&gt;<a class="code" href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">page_size</a> - 1)) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            g_free(prp_list);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> prp_list;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_cgraph.png" border="0" usemap="#nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_cgraph" alt=""/></div>
<map name="nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_cgraph" id="nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,173,32"/>
<area shape="rect" href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8" title=" " alt="" coords="221,5,356,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_icgraph.png" border="0" usemap="#nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_icgraph" alt=""/></div>
<map name="nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_icgraph" id="nvme-util_8c_a9d8a42fcd63a79e262250aa8f54522da_icgraph">
<area shape="rect" title=" " alt="" coords="1192,56,1360,83"/>
<area shape="rect" href="nvme_8h.html#a6410408d19dd2986cba9a815d25871a8" title=" " alt="" coords="1035,81,1144,108"/>
<area shape="rect" href="nvme_8h.html#ac3b74834e78afe9ce3db5074e8398a0f" title=" " alt="" coords="1035,31,1144,57"/>
<area shape="rect" href="nvme-admin_8c.html#af3ddf1e4e280aa3f367a5b2b44879b41" title=" " alt="" coords="857,107,987,133"/>
<area shape="rect" href="femu_8c.html#a31d7536be0fd698bd44a2ce15ce54987" title=" " alt="" coords="860,56,984,83"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,31,149,57"/>
<area shape="rect" href="femu_8c.html#aa5b4cf8d2b42e9d54982bcd45bd43d15" title=" " alt="" coords="462,56,589,83"/>
<area shape="rect" href="nvme-admin_8c.html#a2c43f1bdb51a2e35c2ecdb9ed9db64ec" title=" " alt="" coords="857,5,987,32"/>
</map>
</div>

</div>
</div>
<a id="a4fdc790b9e67ae29e3ef256182ed345b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fdc790b9e67ae29e3ef256182ed345b">&#9670;&nbsp;</a></span>nvme_sq_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t nvme_sq_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *&#160;</td>
          <td class="paramname"><em>sq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span> sq-&gt;<a class="code" href="structNvmeSQueue.html#aec83bc34b2dd3541fda15c0279348264">head</a> == sq-&gt;<a class="code" href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">tail</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a4fdc790b9e67ae29e3ef256182ed345b_icgraph.png" border="0" usemap="#nvme-util_8c_a4fdc790b9e67ae29e3ef256182ed345b_icgraph" alt=""/></div>
<map name="nvme-util_8c_a4fdc790b9e67ae29e3ef256182ed345b_icgraph" id="nvme-util_8c_a4fdc790b9e67ae29e3ef256182ed345b_icgraph">
<area shape="rect" title=" " alt="" coords="1631,17,1761,44"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,17,619,44"/>
<area shape="rect" href="nvme-io_8c.html#aaa8fe64369c3e7b33785cabed5a4cbde" title=" " alt="" coords="1425,43,1583,69"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,17,384,44"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,17,149,44"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title=" " alt="" coords="1275,43,1377,69"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title=" " alt="" coords="1076,43,1227,69"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,43,1028,69"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,43,809,69"/>
</map>
</div>

</div>
</div>
<a id="a2c23400ec899cbc551757929a872089e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c23400ec899cbc551757929a872089e">&#9670;&nbsp;</a></span>nvme_update_cq_head()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_update_cq_head </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeCQueue.html">NvmeCQueue</a> *&#160;</td>
          <td class="paramname"><em>cq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">if</span> (cq-&gt;<a class="code" href="structNvmeCQueue.html#a38b8318d3c3040f22eff1fff5f1482e5">db_addr_hva</a>) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        cq-&gt;<a class="code" href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">head</a> = *(uint32_t *)(cq-&gt;<a class="code" href="structNvmeCQueue.html#a38b8318d3c3040f22eff1fff5f1482e5">db_addr_hva</a>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span> (cq-&gt;<a class="code" href="structNvmeCQueue.html#a90d654f42e288f38b3ff2df34ed71eda">db_addr</a>) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <a class="code" href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484">nvme_addr_read</a>(cq-&gt;<a class="code" href="structNvmeCQueue.html#a83ec5b565d4c97540ef1db6462f3efd2">ctrl</a>, cq-&gt;<a class="code" href="structNvmeCQueue.html#a90d654f42e288f38b3ff2df34ed71eda">db_addr</a>, &amp;cq-&gt;<a class="code" href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">head</a>, <span class="keyword">sizeof</span>(cq-&gt;<a class="code" href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">head</a>));</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    }</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a2c23400ec899cbc551757929a872089e_cgraph.png" border="0" usemap="#nvme-util_8c_a2c23400ec899cbc551757929a872089e_cgraph" alt=""/></div>
<map name="nvme-util_8c_a2c23400ec899cbc551757929a872089e_cgraph" id="nvme-util_8c_a2c23400ec899cbc551757929a872089e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,177,32"/>
<area shape="rect" href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484" title=" " alt="" coords="225,5,356,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a2c23400ec899cbc551757929a872089e_icgraph.png" border="0" usemap="#nvme-util_8c_a2c23400ec899cbc551757929a872089e_icgraph" alt=""/></div>
<map name="nvme-util_8c_a2c23400ec899cbc551757929a872089e_icgraph" id="nvme-util_8c_a2c23400ec899cbc551757929a872089e_icgraph">
<area shape="rect" title=" " alt="" coords="1369,5,1541,32"/>
<area shape="rect" href="nvme_8h.html#a4e852fdb44ac17526a5b317eb3e4dac7" title=" " alt="" coords="1212,5,1321,32"/>
<area shape="rect" href="nvme_8h.html#a03a3accd495e0b00d01b80e009af5c9f" title=" " alt="" coords="1013,5,1164,32"/>
<area shape="rect" href="nvme-admin_8c.html#a6f5c22b725b5eca5912f17066e95cf67" title=" " alt="" coords="857,5,965,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="a21b2434a9d5f978d0b4cf9661820ca63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21b2434a9d5f978d0b4cf9661820ca63">&#9670;&nbsp;</a></span>nvme_update_sq_tail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nvme_update_sq_tail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNvmeSQueue.html">NvmeSQueue</a> *&#160;</td>
          <td class="paramname"><em>sq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">if</span> (sq-&gt;<a class="code" href="structNvmeSQueue.html#a0328aeea530626544944138d5a1bca54">db_addr_hva</a>) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        sq-&gt;<a class="code" href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">tail</a> = *((uint32_t *)sq-&gt;<a class="code" href="structNvmeSQueue.html#a0328aeea530626544944138d5a1bca54">db_addr_hva</a>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">if</span> (sq-&gt;<a class="code" href="structNvmeSQueue.html#a6c854ba52b14d2f7bbc195451d41dc6d">db_addr</a>) {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <a class="code" href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484">nvme_addr_read</a>(sq-&gt;<a class="code" href="structNvmeSQueue.html#a09944fa7acccfc87c0c8440aeacc3dc7">ctrl</a>, sq-&gt;<a class="code" href="structNvmeSQueue.html#a6c854ba52b14d2f7bbc195451d41dc6d">db_addr</a>, &amp;sq-&gt;<a class="code" href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">tail</a>, <span class="keyword">sizeof</span>(sq-&gt;<a class="code" href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">tail</a>));</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_cgraph.png" border="0" usemap="#nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_cgraph" alt=""/></div>
<map name="nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_cgraph" id="nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,167,32"/>
<area shape="rect" href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484" title=" " alt="" coords="215,5,345,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_icgraph.png" border="0" usemap="#nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_icgraph" alt=""/></div>
<map name="nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_icgraph" id="nvme-util_8c_a21b2434a9d5f978d0b4cf9661820ca63_icgraph">
<area shape="rect" title=" " alt="" coords="1631,5,1792,32"/>
<area shape="rect" href="nvme-io_8c.html#aaa8fe64369c3e7b33785cabed5a4cbde" title=" " alt="" coords="1425,5,1583,32"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title=" " alt="" coords="1275,5,1377,32"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title=" " alt="" coords="1076,5,1227,32"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,5,1028,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title=" " alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title=" " alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astructNvmeCQueue_html"><div class="ttname"><a href="structNvmeCQueue.html">NvmeCQueue</a></div><div class="ttdef"><b>Definition:</b> nvme.h:1028</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a019c28f2b0e28a7c7d0f511de65b5045"><div class="ttname"><a href="structNvmeSQueue.html#a019c28f2b0e28a7c7d0f511de65b5045">NvmeSQueue::eventidx_addr</a></div><div class="ttdeci">uint64_t eventidx_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1023</div></div>
<div class="ttc" id="anvme_8h_html_abed82baf7f470b522273a3e37c24c600a7ff268ac8770a6c0d845f07947b85d46"><div class="ttname"><a href="nvme_8h.html#abed82baf7f470b522273a3e37c24c600a7ff268ac8770a6c0d845f07947b85d46">NVME_RW_PRINFO_PRACT</a></div><div class="ttdeci">@ NVME_RW_PRINFO_PRACT</div><div class="ttdef"><b>Definition:</b> nvme.h:451</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_abf371d53e71ed474914a6f5b5d94a253"><div class="ttname"><a href="structNvmeIdCtrl.html#abf371d53e71ed474914a6f5b5d94a253">NvmeIdCtrl::mn</a></div><div class="ttdeci">uint8_t mn[40]</div><div class="ttdef"><b>Definition:</b> nvme.h:690</div></div>
<div class="ttc" id="anvme_8h_html_a2259ab6ad32aaf55b340159f4fb043f4a43aae0e0a370dd16186369148885344f"><div class="ttname"><a href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a43aae0e0a370dd16186369148885344f">NVME_LBA_RANGE</a></div><div class="ttdeci">@ NVME_LBA_RANGE</div><div class="ttdef"><b>Definition:</b> nvme.h:534</div></div>
<div class="ttc" id="astructNvmeNamespace_html_aded48306fad86bd7ca9160443a24604d"><div class="ttname"><a href="structNvmeNamespace.html#aded48306fad86bd7ca9160443a24604d">NvmeNamespace::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> nvme.h:1065</div></div>
<div class="ttc" id="astructFemuCtrl_html_a31fb867a33c2ccad78e9c82456391e89"><div class="ttname"><a href="structFemuCtrl.html#a31fb867a33c2ccad78e9c82456391e89">FemuCtrl::elpe</a></div><div class="ttdeci">uint8_t elpe</div><div class="ttdef"><b>Definition:</b> nvme.h:1225</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a09944fa7acccfc87c0c8440aeacc3dc7"><div class="ttname"><a href="structNvmeSQueue.html#a09944fa7acccfc87c0c8440aeacc3dc7">NvmeSQueue::ctrl</a></div><div class="ttdeci">struct FemuCtrl * ctrl</div><div class="ttdef"><b>Definition:</b> nvme.h:1004</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9f37c1e2d56205e4c7d0015aa9af44e2"><div class="ttname"><a href="structFemuCtrl.html#a9f37c1e2d56205e4c7d0015aa9af44e2">FemuCtrl::sq</a></div><div class="ttdeci">NvmeSQueue ** sq</div><div class="ttdef"><b>Definition:</b> nvme.h:1266</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a6c854ba52b14d2f7bbc195451d41dc6d"><div class="ttname"><a href="structNvmeSQueue.html#a6c854ba52b14d2f7bbc195451d41dc6d">NvmeSQueue::db_addr</a></div><div class="ttdeci">uint64_t db_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1021</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a42f6225e7294b5db037fd1e099a8060f"><div class="ttname"><a href="structNvmeCQueue.html#a42f6225e7294b5db037fd1e099a8060f">NvmeCQueue::vector</a></div><div class="ttdeci">uint32_t vector</div><div class="ttdef"><b>Definition:</b> nvme.h:1037</div></div>
<div class="ttc" id="anvme_8h_html_ab948599d7252d70406c01753bcf72512"><div class="ttname"><a href="nvme_8h.html#ab948599d7252d70406c01753bcf72512">ID_MAX_LEN</a></div><div class="ttdeci">#define ID_MAX_LEN</div><div class="ttdef"><b>Definition:</b> nvme.h:1478</div></div>
<div class="ttc" id="anvme_8h_html_a6ed10a5f898d5d839bc22da9276b7d93"><div class="ttname"><a href="nvme_8h.html#a6ed10a5f898d5d839bc22da9276b7d93">NVME_ARB_LPW</a></div><div class="ttdeci">#define NVME_ARB_LPW(arb)</div><div class="ttdef"><b>Definition:</b> nvme.h:800</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a81de77c41f0fe454ab844dff5914bae5"><div class="ttname"><a href="structNvmeCQueue.html#a81de77c41f0fe454ab844dff5914bae5">NvmeCQueue::cqid</a></div><div class="ttdeci">uint16_t cqid</div><div class="ttdef"><b>Definition:</b> nvme.h:1032</div></div>
<div class="ttc" id="astructNvmeNamespace_html_a82fb6235b209c097c887181151ad33a1"><div class="ttname"><a href="structNvmeNamespace.html#a82fb6235b209c097c887181151ad33a1">NvmeNamespace::uncorrectable</a></div><div class="ttdeci">unsigned long * uncorrectable</div><div class="ttdef"><b>Definition:</b> nvme.h:1064</div></div>
<div class="ttc" id="astructNvmeSQueue_html_ac294c2452da2c57956569dac9c897355"><div class="ttname"><a href="structNvmeSQueue.html#ac294c2452da2c57956569dac9c897355">NvmeSQueue::dma_addr_hva</a></div><div class="ttdeci">uint64_t dma_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1013</div></div>
<div class="ttc" id="astructNvmeCmd_html_a80a15bb450d4810749be585c66eba0af"><div class="ttname"><a href="structNvmeCmd.html#a80a15bb450d4810749be585c66eba0af">NvmeCmd::cid</a></div><div class="ttdeci">uint16_t cid</div><div class="ttdef"><b>Definition:</b> nvme.h:295</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a8ecbdfc4863d2633f279c2ae70dff1dd"><div class="ttname"><a href="structNvmeCQueue.html#a8ecbdfc4863d2633f279c2ae70dff1dd">NvmeCQueue::tail</a></div><div class="ttdeci">uint32_t tail</div><div class="ttdef"><b>Definition:</b> nvme.h:1035</div></div>
<div class="ttc" id="astructNvmeFeatureVal_html_a58f1323ae312b9d4781f1bb8d3a30e0f"><div class="ttname"><a href="structNvmeFeatureVal.html#a58f1323ae312b9d4781f1bb8d3a30e0f">NvmeFeatureVal::arbitration</a></div><div class="ttdeci">uint32_t arbitration</div><div class="ttdef"><b>Definition:</b> nvme.h:786</div></div>
<div class="ttc" id="aoc12_8h_html_aafa9f203f0abc59a4b08b3833f39b92c"><div class="ttname"><a href="oc12_8h.html#aafa9f203f0abc59a4b08b3833f39b92c">lba</a></div><div class="ttdeci">uint64_t lba</div><div class="ttdef"><b>Definition:</b> oc12.h:2</div></div>
<div class="ttc" id="anvme_8h_html_aef2bfc05ccbdba79aef90226efe46ad4"><div class="ttname"><a href="nvme_8h.html#aef2bfc05ccbdba79aef90226efe46ad4">femu_debug</a></div><div class="ttdeci">#define femu_debug(fmt,...)</div><div class="ttdef"><b>Definition:</b> nvme.h:1485</div></div>
<div class="ttc" id="anvme_8h_html_a2259ab6ad32aaf55b340159f4fb043f4a3268f6be90861f0c2270d86a44d5b09c"><div class="ttname"><a href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a3268f6be90861f0c2270d86a44d5b09c">NVME_SUCCESS</a></div><div class="ttdeci">@ NVME_SUCCESS</div><div class="ttdef"><b>Definition:</b> nvme.h:520</div></div>
<div class="ttc" id="astructFemuCtrl_html_a3cbec385b70e8c6a03b463e00ac08d92"><div class="ttname"><a href="structFemuCtrl.html#a3cbec385b70e8c6a03b463e00ac08d92">FemuCtrl::sqe_size</a></div><div class="ttdeci">uint16_t sqe_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1214</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a212c26a71132a5d3ca6e4c3992773235"><div class="ttname"><a href="structNvmeCQueue.html#a212c26a71132a5d3ca6e4c3992773235">NvmeCQueue::dma_addr</a></div><div class="ttdeci">uint64_t dma_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1039</div></div>
<div class="ttc" id="astructFemuCtrl_html_a8deef2eb4dfac999392c54657407b645"><div class="ttname"><a href="structFemuCtrl.html#a8deef2eb4dfac999392c54657407b645">FemuCtrl::dbs_addr_hva</a></div><div class="ttdeci">uint64_t dbs_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1279</div></div>
<div class="ttc" id="anvme_8h_html_a0c37ce40c3b635b3c2426de47f6d67c3"><div class="ttname"><a href="nvme_8h.html#a0c37ce40c3b635b3c2426de47f6d67c3">NVME_ARB_AB</a></div><div class="ttdeci">#define NVME_ARB_AB(arb)</div><div class="ttdef"><b>Definition:</b> nvme.h:799</div></div>
<div class="ttc" id="astructFemuCtrl_html_a4f7a49ec4c0d8551955122bf9ddb73c5"><div class="ttname"><a href="structFemuCtrl.html#a4f7a49ec4c0d8551955122bf9ddb73c5">FemuCtrl::db_stride</a></div><div class="ttdeci">uint8_t db_stride</div><div class="ttdef"><b>Definition:</b> nvme.h:1222</div></div>
<div class="ttc" id="astructFemuCtrl_html_a6461a7eda526fcc86770a43380615b7c"><div class="ttname"><a href="structFemuCtrl.html#a6461a7eda526fcc86770a43380615b7c">FemuCtrl::num_errors</a></div><div class="ttdeci">uint8_t num_errors</div><div class="ttdef"><b>Definition:</b> nvme.h:1249</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9eed30c84e2fdec251abd2d112aa857a"><div class="ttname"><a href="structFemuCtrl.html#a9eed30c84e2fdec251abd2d112aa857a">FemuCtrl::dbs_addr</a></div><div class="ttdeci">uint64_t dbs_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1277</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a9699dd12674bbfdeba9ee84a1e6b2d79"><div class="ttname"><a href="structNvmeCQueue.html#a9699dd12674bbfdeba9ee84a1e6b2d79">NvmeCQueue::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> nvme.h:1038</div></div>
<div class="ttc" id="astructFemuCtrl_html_a4bd5012806e5cda6eb475cb787f4be3d"><div class="ttname"><a href="structFemuCtrl.html#a4bd5012806e5cda6eb475cb787f4be3d">FemuCtrl::features</a></div><div class="ttdeci">NvmeFeatureVal features</div><div class="ttdef"><b>Definition:</b> nvme.h:1270</div></div>
<div class="ttc" id="astructFemuCtrl_html_a1afb4cdf7871ec97ee3fe1aa2baa7138"><div class="ttname"><a href="structFemuCtrl.html#a1afb4cdf7871ec97ee3fe1aa2baa7138">FemuCtrl::elp_index</a></div><div class="ttdeci">uint8_t elp_index</div><div class="ttdef"><b>Definition:</b> nvme.h:1226</div></div>
<div class="ttc" id="anvme_8h_html_a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1"><div class="ttname"><a href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a885e33aaef46f9a32806fd9d576167a1">NVME_DNR</a></div><div class="ttdeci">@ NVME_DNR</div><div class="ttdef"><b>Definition:</b> nvme.h:575</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a0584d06f4fe2de3d04594160bff0802d"><div class="ttname"><a href="structNvmeSQueue.html#a0584d06f4fe2de3d04594160bff0802d">NvmeSQueue::arb_burst</a></div><div class="ttdeci">uint8_t arb_burst</div><div class="ttdef"><b>Definition:</b> nvme.h:1006</div></div>
<div class="ttc" id="anvme_8h_html_a01fa2fcaaecb728f8cc9eabc2e0fc971a03629c32ac63a0f7ba74cec149dda17c"><div class="ttname"><a href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971a03629c32ac63a0f7ba74cec149dda17c">NVME_Q_PRIO_NORMAL</a></div><div class="ttdeci">@ NVME_Q_PRIO_NORMAL</div><div class="ttdef"><b>Definition:</b> nvme.h:396</div></div>
<div class="ttc" id="anvme_8h_html_a2259ab6ad32aaf55b340159f4fb043f4a5157ff55aedb970b020e6602903bd46a"><div class="ttname"><a href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a5157ff55aedb970b020e6602903bd46a">NVME_UNRECOVERED_READ</a></div><div class="ttdeci">@ NVME_UNRECOVERED_READ</div><div class="ttdef"><b>Definition:</b> nvme.h:567</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a201708806f82565f9dc80a1649f11246"><div class="ttname"><a href="structNvmeSQueue.html#a201708806f82565f9dc80a1649f11246">NvmeSQueue::cqid</a></div><div class="ttdeci">uint16_t cqid</div><div class="ttdef"><b>Definition:</b> nvme.h:1008</div></div>
<div class="ttc" id="astructNvmeErrorLog_html_a0f8722a98215a9e4e7f17fb53707f22d"><div class="ttname"><a href="structNvmeErrorLog.html#a0f8722a98215a9e4e7f17fb53707f22d">NvmeErrorLog::nsid</a></div><div class="ttdeci">uint32_t nsid</div><div class="ttdef"><b>Definition:</b> nvme.h:601</div></div>
<div class="ttc" id="astructrte__ring_html_a87cbbf8a4319375d954819403ff292d7"><div class="ttname"><a href="structrte__ring.html#a87cbbf8a4319375d954819403ff292d7">rte_ring::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> rte_ring.h:136</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a0328aeea530626544944138d5a1bca54"><div class="ttname"><a href="structNvmeSQueue.html#a0328aeea530626544944138d5a1bca54">NvmeSQueue::db_addr_hva</a></div><div class="ttdeci">uint64_t db_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1022</div></div>
<div class="ttc" id="astructNvmeNamespace_html_ac5c0ddf3fd8b71e4387062b8a5e1075d"><div class="ttname"><a href="structNvmeNamespace.html#ac5c0ddf3fd8b71e4387062b8a5e1075d">NvmeNamespace::id_ns</a></div><div class="ttdeci">NvmeIdNs id_ns</div><div class="ttdef"><b>Definition:</b> nvme.h:1061</div></div>
<div class="ttc" id="astructFemuCtrl_html_a81eb4ffac10eb4abea4985adc4b368e1"><div class="ttname"><a href="structFemuCtrl.html#a81eb4ffac10eb4abea4985adc4b368e1">FemuCtrl::error_count</a></div><div class="ttdeci">uint8_t error_count</div><div class="ttdef"><b>Definition:</b> nvme.h:1227</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a376ae99c71a9fb4157bd4fb45b2a5090"><div class="ttname"><a href="structNvmeCQueue.html#a376ae99c71a9fb4157bd4fb45b2a5090">NvmeCQueue::phys_contig</a></div><div class="ttdeci">uint8_t phys_contig</div><div class="ttdef"><b>Definition:</b> nvme.h:1030</div></div>
<div class="ttc" id="astructNvmeErrorLog_html"><div class="ttname"><a href="structNvmeErrorLog.html">NvmeErrorLog</a></div><div class="ttdef"><b>Definition:</b> nvme.h:594</div></div>
<div class="ttc" id="astructNvmeErrorLog_html_a34c2236aaad4b53fb84d00e65f2eb533"><div class="ttname"><a href="structNvmeErrorLog.html#a34c2236aaad4b53fb84d00e65f2eb533">NvmeErrorLog::lba</a></div><div class="ttdeci">uint64_t lba</div><div class="ttdef"><b>Definition:</b> nvme.h:600</div></div>
<div class="ttc" id="anvme_8h_html_a01fa2fcaaecb728f8cc9eabc2e0fc971a784d856031b0bef2ad697a45e2a40691"><div class="ttname"><a href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971a784d856031b0bef2ad697a45e2a40691">NVME_Q_PRIO_URGENT</a></div><div class="ttdeci">@ NVME_Q_PRIO_URGENT</div><div class="ttdef"><b>Definition:</b> nvme.h:394</div></div>
<div class="ttc" id="adma_8c_html_a0ac25a907651fbfbf9710b15dc45e484"><div class="ttname"><a href="dma_8c.html#a0ac25a907651fbfbf9710b15dc45e484">nvme_addr_read</a></div><div class="ttdeci">void nvme_addr_read(FemuCtrl *n, hwaddr addr, void *buf, int size)</div><div class="ttdef"><b>Definition:</b> dma.c:3</div></div>
<div class="ttc" id="anvme_8h_html_a612e3ddaf959f9b13991010287863c87"><div class="ttname"><a href="nvme_8h.html#a612e3ddaf959f9b13991010287863c87">NVME_ARB_HPW</a></div><div class="ttdeci">#define NVME_ARB_HPW(arb)</div><div class="ttdef"><b>Definition:</b> nvme.h:802</div></div>
<div class="ttc" id="anvme_8h_html_a2cedcc048dead4cfe3156cd083aed6e7"><div class="ttname"><a href="nvme_8h.html#a2cedcc048dead4cfe3156cd083aed6e7">NVME_ARB_MPW</a></div><div class="ttdeci">#define NVME_ARB_MPW(arb)</div><div class="ttdef"><b>Definition:</b> nvme.h:801</div></div>
<div class="ttc" id="astructNvmeRwCmd_html"><div class="ttname"><a href="structNvmeRwCmd.html">NvmeRwCmd</a></div><div class="ttdef"><b>Definition:</b> nvme.h:415</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a90d654f42e288f38b3ff2df34ed71eda"><div class="ttname"><a href="structNvmeCQueue.html#a90d654f42e288f38b3ff2df34ed71eda">NvmeCQueue::db_addr</a></div><div class="ttdeci">uint64_t db_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1046</div></div>
<div class="ttc" id="astructFemuCtrl_html_a6f86d8c1d2b5365aef55a5d879316868"><div class="ttname"><a href="structFemuCtrl.html#a6f86d8c1d2b5365aef55a5d879316868">FemuCtrl::eis_addr</a></div><div class="ttdeci">uint64_t eis_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1278</div></div>
<div class="ttc" id="anvme_8h_html_a8f00ab0eaff0945cb32aff5a10ed1524abf6bf44feedb74c6a49654775529d786"><div class="ttname"><a href="nvme_8h.html#a8f00ab0eaff0945cb32aff5a10ed1524abf6bf44feedb74c6a49654775529d786">DPS_TYPE_MASK</a></div><div class="ttdeci">@ DPS_TYPE_MASK</div><div class="ttdef"><b>Definition:</b> nvme.h:929</div></div>
<div class="ttc" id="astructFemuCtrl_html_ac4f8d305f94dfd341fe6e7f39c06c47c"><div class="ttname"><a href="structFemuCtrl.html#ac4f8d305f94dfd341fe6e7f39c06c47c">FemuCtrl::cqe_size</a></div><div class="ttdeci">uint16_t cqe_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1213</div></div>
<div class="ttc" id="astructFemuCtrl_html_ab09f359cd5d2e1882bd8a04046becf28"><div class="ttname"><a href="structFemuCtrl.html#ab09f359cd5d2e1882bd8a04046becf28">FemuCtrl::num_io_queues</a></div><div class="ttdeci">uint32_t num_io_queues</div><div class="ttdef"><b>Definition:</b> nvme.h:1219</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a38b8318d3c3040f22eff1fff5f1482e5"><div class="ttname"><a href="structNvmeCQueue.html#a38b8318d3c3040f22eff1fff5f1482e5">NvmeCQueue::db_addr_hva</a></div><div class="ttdeci">uint64_t db_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1047</div></div>
<div class="ttc" id="anvme_8h_html_a459a9ad482387e92a5fa8fc4c108f3f6"><div class="ttname"><a href="nvme_8h.html#a459a9ad482387e92a5fa8fc4c108f3f6">OCSSD</a></div><div class="ttdeci">static bool OCSSD(FemuCtrl *n)</div><div class="ttdef"><b>Definition:</b> nvme.h:1363</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_a7aa6155f605fdb78fab28db981e0c5c4"><div class="ttname"><a href="structNvmeIdCtrl.html#a7aa6155f605fdb78fab28db981e0c5c4">NvmeIdCtrl::mdts</a></div><div class="ttdeci">uint8_t mdts</div><div class="ttdef"><b>Definition:</b> nvme.h:695</div></div>
<div class="ttc" id="astructNvmeRequest_html_a6f04006cddb851afcc919412c6e90b60"><div class="ttname"><a href="structNvmeRequest.html#a6f04006cddb851afcc919412c6e90b60">NvmeRequest::is_write</a></div><div class="ttdeci">uint16_t is_write</div><div class="ttdef"><b>Definition:</b> nvme.h:967</div></div>
<div class="ttc" id="astructNvmeErrorLog_html_ac8e30be0d08cf527014c3bf23d5934f9"><div class="ttname"><a href="structNvmeErrorLog.html#ac8e30be0d08cf527014c3bf23d5934f9">NvmeErrorLog::sqid</a></div><div class="ttdeci">uint16_t sqid</div><div class="ttdef"><b>Definition:</b> nvme.h:596</div></div>
<div class="ttc" id="adma_8c_html_a08f51254313a657c3826f77e6bd9a1b8"><div class="ttname"><a href="dma_8c.html#a08f51254313a657c3826f77e6bd9a1b8">nvme_addr_write</a></div><div class="ttdeci">void nvme_addr_write(FemuCtrl *n, hwaddr addr, void *buf, int size)</div><div class="ttdef"><b>Definition:</b> dma.c:13</div></div>
<div class="ttc" id="astructNvmeErrorLog_html_abb12d210517974c51ae3fe6613e222cd"><div class="ttname"><a href="structNvmeErrorLog.html#abb12d210517974c51ae3fe6613e222cd">NvmeErrorLog::param_error_location</a></div><div class="ttdeci">uint16_t param_error_location</div><div class="ttdef"><b>Definition:</b> nvme.h:599</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a7fc816fae4f563f4f8c453cd1ec8726e"><div class="ttname"><a href="structNvmeCQueue.html#a7fc816fae4f563f4f8c453cd1ec8726e">NvmeCQueue::head</a></div><div class="ttdeci">uint32_t head</div><div class="ttdef"><b>Definition:</b> nvme.h:1034</div></div>
<div class="ttc" id="astructFemuCtrl_html_af13a4a3fc3667cdddbd181c34378b406"><div class="ttname"><a href="structFemuCtrl.html#af13a4a3fc3667cdddbd181c34378b406">FemuCtrl::id_ctrl</a></div><div class="ttdeci">NvmeIdCtrl id_ctrl</div><div class="ttdef"><b>Definition:</b> nvme.h:1271</div></div>
<div class="ttc" id="anvme-util_8c_html_a9d8a42fcd63a79e262250aa8f54522da"><div class="ttname"><a href="nvme-util_8c.html#a9d8a42fcd63a79e262250aa8f54522da">nvme_setup_discontig</a></div><div class="ttdeci">uint64_t * nvme_setup_discontig(FemuCtrl *n, uint64_t prp_addr, uint16_t queue_depth, uint16_t entry_size)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:63</div></div>
<div class="ttc" id="astructNvmeSQueue_html_abb10aae49e80be9c67dd28f484514adb"><div class="ttname"><a href="structNvmeSQueue.html#abb10aae49e80be9c67dd28f484514adb">NvmeSQueue::phys_contig</a></div><div class="ttdeci">uint8_t phys_contig</div><div class="ttdef"><b>Definition:</b> nvme.h:1005</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_a1fe51dee35d75796daf8b758c448543d"><div class="ttname"><a href="structNvmeIdCtrl.html#a1fe51dee35d75796daf8b758c448543d">NvmeIdCtrl::subnqn</a></div><div class="ttdeci">uint8_t subnqn[256]</div><div class="ttdef"><b>Definition:</b> nvme.h:747</div></div>
<div class="ttc" id="astructFemuCtrl_html_a525d33d10ee74874b135c7899fe80847"><div class="ttname"><a href="structFemuCtrl.html#a525d33d10ee74874b135c7899fe80847">FemuCtrl::eis_addr_hva</a></div><div class="ttdeci">uint64_t eis_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1280</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_a35b699fee3e790206ef6c2d09830bbe0"><div class="ttname"><a href="structNvmeIdCtrl.html#a35b699fee3e790206ef6c2d09830bbe0">NvmeIdCtrl::sn</a></div><div class="ttdeci">uint8_t sn[20]</div><div class="ttdef"><b>Definition:</b> nvme.h:689</div></div>
<div class="ttc" id="astructFemuCtrl_html_a380a277dfc1bb8f2a192f6244a3f4fdb"><div class="ttname"><a href="structFemuCtrl.html#a380a277dfc1bb8f2a192f6244a3f4fdb">FemuCtrl::cq</a></div><div class="ttdeci">NvmeCQueue ** cq</div><div class="ttdef"><b>Definition:</b> nvme.h:1267</div></div>
<div class="ttc" id="astructNvmeIdNs_html_a4a814e395ae6ea7b3b7c5cba1c22ad85"><div class="ttname"><a href="structNvmeIdNs.html#a4a814e395ae6ea7b3b7c5cba1c22ad85">NvmeIdNs::nsze</a></div><div class="ttdeci">uint64_t nsze</div><div class="ttdef"><b>Definition:</b> nvme.h:858</div></div>
<div class="ttc" id="astructNvmeCQueue_html_adbb1a433a87d65e986849bc91d4c46e0"><div class="ttname"><a href="structNvmeCQueue.html#adbb1a433a87d65e986849bc91d4c46e0">NvmeCQueue::irq_enabled</a></div><div class="ttdeci">uint16_t irq_enabled</div><div class="ttdef"><b>Definition:</b> nvme.h:1033</div></div>
<div class="ttc" id="astructNvmeCQueue_html_af31e498d59d5db90e6fe9d1e7127119d"><div class="ttname"><a href="structNvmeCQueue.html#af31e498d59d5db90e6fe9d1e7127119d">NvmeCQueue::eventidx_addr_hva</a></div><div class="ttdeci">uint64_t eventidx_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1049</div></div>
<div class="ttc" id="anvme_8h_html_a248e87626d667145c329503e802207f0"><div class="ttname"><a href="nvme_8h.html#a248e87626d667145c329503e802207f0">MN_MAX_LEN</a></div><div class="ttdeci">#define MN_MAX_LEN</div><div class="ttdef"><b>Definition:</b> nvme.h:1477</div></div>
<div class="ttc" id="astructNvmeSQueue_html_ac5aa365b6e571542994f682254a5e457"><div class="ttname"><a href="structNvmeSQueue.html#ac5aa365b6e571542994f682254a5e457">NvmeSQueue::sqid</a></div><div class="ttdeci">uint16_t sqid</div><div class="ttdef"><b>Definition:</b> nvme.h:1007</div></div>
<div class="ttc" id="astructNvmeCQueue_html_ae71382828723bfcbe3c2430f490c0ac3"><div class="ttname"><a href="structNvmeCQueue.html#ae71382828723bfcbe3c2430f490c0ac3">NvmeCQueue::dma_addr_hva</a></div><div class="ttdeci">uint64_t dma_addr_hva</div><div class="ttdef"><b>Definition:</b> nvme.h:1040</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a95a5ce1549fa4e2b6fc57b79175e4ac2"><div class="ttname"><a href="structNvmeSQueue.html#a95a5ce1549fa4e2b6fc57b79175e4ac2">NvmeSQueue::io_req</a></div><div class="ttdeci">NvmeRequest * io_req</div><div class="ttdef"><b>Definition:</b> nvme.h:1016</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a83ec5b565d4c97540ef1db6462f3efd2"><div class="ttname"><a href="structNvmeCQueue.html#a83ec5b565d4c97540ef1db6462f3efd2">NvmeCQueue::ctrl</a></div><div class="ttdeci">struct FemuCtrl * ctrl</div><div class="ttdef"><b>Definition:</b> nvme.h:1029</div></div>
<div class="ttc" id="astructNvmeCQueue_html_abee73fe2f6a1749b69ee6edf4b08f751"><div class="ttname"><a href="structNvmeCQueue.html#abee73fe2f6a1749b69ee6edf4b08f751">NvmeCQueue::prp_list</a></div><div class="ttdeci">uint64_t * prp_list</div><div class="ttdef"><b>Definition:</b> nvme.h:1041</div></div>
<div class="ttc" id="anvme_8h_html_a01fa2fcaaecb728f8cc9eabc2e0fc971ac6aa7c4a8d807a2454ef40d6e77a4f10"><div class="ttname"><a href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971ac6aa7c4a8d807a2454ef40d6e77a4f10">NVME_Q_PRIO_HIGH</a></div><div class="ttdeci">@ NVME_Q_PRIO_HIGH</div><div class="ttdef"><b>Definition:</b> nvme.h:395</div></div>
<div class="ttc" id="astructNvmeRequest_html_a18ef977aa1abc169de646d142d6c77d9"><div class="ttname"><a href="structNvmeRequest.html#a18ef977aa1abc169de646d142d6c77d9">NvmeRequest::sq</a></div><div class="ttdeci">struct NvmeSQueue * sq</div><div class="ttdef"><b>Definition:</b> nvme.h:962</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html_a351b809c9cd07a0775f5b35440fa609f"><div class="ttname"><a href="structNvmeIdCtrl.html#a351b809c9cd07a0775f5b35440fa609f">NvmeIdCtrl::fr</a></div><div class="ttdeci">uint8_t fr[8]</div><div class="ttdef"><b>Definition:</b> nvme.h:691</div></div>
<div class="ttc" id="anvme-util_8c_html_a2c23400ec899cbc551757929a872089e"><div class="ttname"><a href="nvme-util_8c.html#a2c23400ec899cbc551757929a872089e">nvme_update_cq_head</a></div><div class="ttdeci">void nvme_update_cq_head(NvmeCQueue *cq)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:39</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a168092b36fc33b9d4367f36613e9eb9d"><div class="ttname"><a href="structNvmeSQueue.html#a168092b36fc33b9d4367f36613e9eb9d">NvmeSQueue::prp_list</a></div><div class="ttdeci">uint64_t * prp_list</div><div class="ttdef"><b>Definition:</b> nvme.h:1015</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a7b8e3b48aee1060ab0095c0dfe449232"><div class="ttname"><a href="structNvmeSQueue.html#a7b8e3b48aee1060ab0095c0dfe449232">NvmeSQueue::tail</a></div><div class="ttdeci">uint32_t tail</div><div class="ttdef"><b>Definition:</b> nvme.h:1010</div></div>
<div class="ttc" id="astructNvmeSQueue_html_aec83bc34b2dd3541fda15c0279348264"><div class="ttname"><a href="structNvmeSQueue.html#aec83bc34b2dd3541fda15c0279348264">NvmeSQueue::head</a></div><div class="ttdeci">uint32_t head</div><div class="ttdef"><b>Definition:</b> nvme.h:1009</div></div>
<div class="ttc" id="astructNvmeCQueue_html_acae37027eeb09a4a07017b099f3faabe"><div class="ttname"><a href="structNvmeCQueue.html#acae37027eeb09a4a07017b099f3faabe">NvmeCQueue::eventidx_addr</a></div><div class="ttdeci">uint64_t eventidx_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1048</div></div>
<div class="ttc" id="astructFemuCtrl_html_a9d862ea82682f6232413280b92ddc4d1"><div class="ttname"><a href="structFemuCtrl.html#a9d862ea82682f6232413280b92ddc4d1">FemuCtrl::parent_obj</a></div><div class="ttdeci">PCIDevice parent_obj</div><div class="ttdef"><b>Definition:</b> nvme.h:1171</div></div>
<div class="ttc" id="astructFemuCtrl_html_a7c69e429f2da05dd6a0ecb4591c2c4fb"><div class="ttname"><a href="structFemuCtrl.html#a7c69e429f2da05dd6a0ecb4591c2c4fb">FemuCtrl::devname</a></div><div class="ttdeci">char devname[64]</div><div class="ttdef"><b>Definition:</b> nvme.h:1311</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a33aec6e6249873acbc63b47645bf182b"><div class="ttname"><a href="structNvmeSQueue.html#a33aec6e6249873acbc63b47645bf182b">NvmeSQueue::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> nvme.h:1011</div></div>
<div class="ttc" id="anvme_8h_html_a01fa2fcaaecb728f8cc9eabc2e0fc971a696490ee3190e69d0153d3c7b22cc943"><div class="ttname"><a href="nvme_8h.html#a01fa2fcaaecb728f8cc9eabc2e0fc971a696490ee3190e69d0153d3c7b22cc943">NVME_Q_PRIO_LOW</a></div><div class="ttdeci">@ NVME_Q_PRIO_LOW</div><div class="ttdef"><b>Definition:</b> nvme.h:397</div></div>
<div class="ttc" id="anvme-util_8c_html_a6ad5e0fb9283798af6a6b70e7254a183"><div class="ttname"><a href="nvme-util_8c.html#a6ad5e0fb9283798af6a6b70e7254a183">nvme_set_error_page</a></div><div class="ttdeci">void nvme_set_error_page(FemuCtrl *n, uint16_t sqid, uint16_t cid, uint16_t status, uint16_t location, uint64_t lba, uint32_t nsid)</div><div class="ttdef"><b>Definition:</b> nvme-util.c:90</div></div>
<div class="ttc" id="astructNvmeIdNs_html_acc6d0826dfaffd161fe99cf87b4872ce"><div class="ttname"><a href="structNvmeIdNs.html#acc6d0826dfaffd161fe99cf87b4872ce">NvmeIdNs::dps</a></div><div class="ttdeci">uint8_t dps</div><div class="ttdef"><b>Definition:</b> nvme.h:866</div></div>
<div class="ttc" id="astructFemuCtrl_html_a0456828e9802380dee025b663079afcf"><div class="ttname"><a href="structFemuCtrl.html#a0456828e9802380dee025b663079afcf">FemuCtrl::elpes</a></div><div class="ttdeci">NvmeErrorLog * elpes</div><div class="ttdef"><b>Definition:</b> nvme.h:1263</div></div>
<div class="ttc" id="astructNvmeIdCtrl_html"><div class="ttname"><a href="structNvmeIdCtrl.html">NvmeIdCtrl</a></div><div class="ttdef"><b>Definition:</b> nvme.h:686</div></div>
<div class="ttc" id="astructNvmeCQueue_html_a550822923ef54d73d7efa7f4bf6159c3"><div class="ttname"><a href="structNvmeCQueue.html#a550822923ef54d73d7efa7f4bf6159c3">NvmeCQueue::phase</a></div><div class="ttdeci">uint8_t phase</div><div class="ttdef"><b>Definition:</b> nvme.h:1031</div></div>
<div class="ttc" id="astructNvmeErrorLog_html_afe741a54d5612bd2b2e978cd86600dc9"><div class="ttname"><a href="structNvmeErrorLog.html#afe741a54d5612bd2b2e978cd86600dc9">NvmeErrorLog::error_count</a></div><div class="ttdeci">uint64_t error_count</div><div class="ttdef"><b>Definition:</b> nvme.h:595</div></div>
<div class="ttc" id="astructNvmeErrorLog_html_a0f00a2ce20b7f9e944049d047ac0377c"><div class="ttname"><a href="structNvmeErrorLog.html#a0f00a2ce20b7f9e944049d047ac0377c">NvmeErrorLog::cid</a></div><div class="ttdeci">uint16_t cid</div><div class="ttdef"><b>Definition:</b> nvme.h:597</div></div>
<div class="ttc" id="astructFemuCtrl_html_a6d0418e38e888b2b8980a34198bfd463"><div class="ttname"><a href="structFemuCtrl.html#a6d0418e38e888b2b8980a34198bfd463">FemuCtrl::page_size</a></div><div class="ttdeci">uint16_t page_size</div><div class="ttdef"><b>Definition:</b> nvme.h:1210</div></div>
<div class="ttc" id="astructNvmeSQueue_html_a7e289d563e907e4a724af16364350602"><div class="ttname"><a href="structNvmeSQueue.html#a7e289d563e907e4a724af16364350602">NvmeSQueue::dma_addr</a></div><div class="ttdeci">uint64_t dma_addr</div><div class="ttdef"><b>Definition:</b> nvme.h:1012</div></div>
<div class="ttc" id="astructNvmeErrorLog_html_a2c64d78f4f584861c9be5e67f29cad8c"><div class="ttname"><a href="structNvmeErrorLog.html#a2c64d78f4f584861c9be5e67f29cad8c">NvmeErrorLog::status_field</a></div><div class="ttdeci">uint16_t status_field</div><div class="ttdef"><b>Definition:</b> nvme.h:598</div></div>
<div class="ttc" id="anvme_8h_html_a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c"><div class="ttname"><a href="nvme_8h.html#a2259ab6ad32aaf55b340159f4fb043f4a8b85ba3cbcb57ab6be06fdced051d11c">NVME_INVALID_FIELD</a></div><div class="ttdeci">@ NVME_INVALID_FIELD</div><div class="ttdef"><b>Definition:</b> nvme.h:522</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="nvme-util_8c.html">nvme-util.c</a></li>
    <li class="footer">制作者
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
